<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-D3AC022F-B6F6-4C99-A2AE-06D35AF3F0A6">
      <meta name="description" content="粒子流对事件中材质的使用施加特定的限制。特别是，指定给事件的材质（无论是通过标准“材质”操作符还是作为“图形实例”操作符的参数指定）不会与粒子一起从一个事件移至下一个事件。这会减弱“粒子流”系统的总体灵活性，且需要使用一些解决方法，包括：将“材质”操作符指定给全局事件，或将“材质”操作符指定给所有受影响的事件。">
      <meta name="indexterm" content="粒子流: 材质继承">
      <meta name="topic-type" content="concept">
      <title>材质继承</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-D3AC022F-B6F6-4C99-A2AE-06D35AF3F0A6"></a><div class="head">
            <h1> 材质继承</h1>
         </div>
         <p class="blurb"> 粒子流对事件中材质的使用施加特定的限制。特别是，指定给事件的材质（无论是通过标准“材质”操作符还是作为“图形实例”操作符的参数指定）不会与粒子一起从一个事件移至下一个事件。这会减弱“粒子流”系统的总体灵活性，且需要使用一些解决方法，包括：将“材质”操作符指定给全局事件，或将“材质”操作符指定给所有受影响的事件。
            
         </p>
         <div class="bodyReference"><a name="GUID-FB4ADB0B-0BC5-4AE8-8544-33BF3D4A9CB0"></a><ul>
               <li> <span class="MenuCascade" id="GUID-8B7AAA35-1EB8-45B3-BA7B-5C9E6336DFA3">在“粒子视图”中单击任一非全局事件的标题栏。 <img src="../images/ac.menuaro.gif"> “事件 ##”卷展栏</span> 
               </li>
            </ul>
            <p><a name="GUID-96F2D322-522C-445E-AE14-641FD8AFB8F1"></a> 粒子流可增强事件功能以改善粒子流系统中材质的整体处理。它仍不允许粒子在事件之间携带材质，但它提供了各种用于简化材质指定和继承的工具。 
            </p>
            <div class="section"><a name="SECTION_CFA79B941B6E4DC68DFDCD8C32136C94"></a> 
               <h2><a name="GUID-8012248A-E737-48A1-8C6A-6745039B1FF8"></a>参数化和合成材质
               </h2> 
               <p><a name="GUID-205A8249-7C93-4F1E-9F44-AE46051F57E1"></a> 在将材质指定到粒子流事件的上下文中，材质可以分成参数化与合成两类。 
               </p> 
               <p><a name="GUID-CAC1E1E3-D05B-4B7C-BF2A-65C74ACAECD0"></a> 当您使用任何标准“材质”操作符时，材质是参数化的。操作符具有一个用于从材质编辑器定义材质的按钮。该材质将作为参考传递到如下事件：所含的“材质”操作符要供驻留在该事件中的粒子使用。同样，这是一种参数化材质，它被指定为“材质”操作符中的一个参数。
                  
               </p> 
               <p><a name="GUID-1A2AEA61-8215-4CFD-A372-29A2E6EB7627"></a> 例如，当使用标准“图形实例”操作符时，材质是合成的。当操作符的“获取材质”启用时，它将采用指定给参考几何体的材质并将其指定给当前事件。此外，如果操作符引用的是一组对象（用作“粒子几何体对象”），则操作符从组中收集所有材质，并创建一个新的<span class="char_link"><a href="GUID-D968CDD9-4C5D-489D-A311-ED7486FCD4AA.htm">“多维/子对象”材质</a></span>并指定给事件。在这种情况下，新材质从其他材质合成。 
               </p> 
               <p><a name="GUID-4835BDC6-5207-4F52-9D95-BBE4713E2747"></a> 如果单击全局事件的标题区域，将显示与整个粒子流粒子系统相关的参数。也可以单击局部事件的标题区域，并查看与材质处理相关的工具，以及指定给事件的材质。 
               </p> 
            </div>
            <div class="section"><a name="SECTION_78A57DC654C74D1D96CCE1665FA521FA"></a> 
               <h2><a name="GUID-7A879B9F-8B20-4C6A-8FBF-278FA0709E13"></a>查看示例
               </h2> 
               <p><a name="GUID-1FFB830E-90A2-4293-A136-4557690492E0"></a> 打开简单示例文件 <span class="filePath">MaterialInheritance01.max</span>（包括在教程文件的 <span class="filePath">ParticleFlowSamples</span> 文件夹中）以查看“材质”工具的工作方式。该场景包含一个具有四个事件的简单粒子流系统。它不包含“材质”操作符；视口中粒子的颜色均由每个事件中不同的“显示”操作符定义，以便在播放动画时，可以在粒子切换事件时通过其颜色变化进行辨别。 
               </p> 
               <p><a name="GUID-CBF39E69-7E2E-45BA-9B39-23C75945DBA4"></a> 现在，将“材质静态”操作符添加到事件 01 并选中，然后从材质编辑器（第一个窗口）指定“多维/子对象”材质作为实例（默认模式），然后将“材质静态”参数调整为循环浏览子材质。事件贴图将如下所示： 
               </p> <a name="FIG_295A30AC5A00414590A323AAAD70C3ED"></a><div class="figure-anchor"><img src="../images/GUID-DB883A22-97E2-40C1-B944-26074A133F78-low.png"></div>  
               <p><a name="GUID-A6D89C7D-57C0-4EBB-A12D-00B9E501C31D"></a> 如果现在播放动画，将看到在开始所有粒子具有不同的颜色，但随后它们会作为块切换至另一种颜色。这是由于接下来的三个事件没有“材质”操作符，因此使用视口中的“显示”颜色。 
               </p> 
               <p><a name="GUID-4F030E9B-0456-46B4-8042-13AD38E4FC87"></a> 单击事件 01 的标题栏以显示事件 01 的参数，然后单击“下游材质”按钮。粒子流报告其已使用某种材质更新了三个事件。再次播放动画，现在，所有事件中的粒子颜色一致。此外，如果选择其他事件，现在您可以看到“当前材质”按钮指示与第一个事件中相同的材质。
                  
               </p> 
               <p><a name="GUID-2FCF316C-E637-4AAC-B48C-07306C88A812"></a> 接下来，查看更复杂的示例 <span class="filePath">MaterialInheritance02.max</span>（包括在教程文件的 <span class="filePath">ParticleFlowSamples</span> 文件夹中）。它将两个粒子流聚合为一个公用流。开始事件具有“材质静态”操作符定义的不同材质。粒子转至第二个事件（事件 02）后，它们将失去其材质。让我们看一下在此情况下可以执行的操作。 
               </p> <a name="FIG_3F63CC34CFF0408D8970ACB224058071"></a><div class="figure-anchor"><img src="../images/GUID-BE34D6CE-C4E2-4E45-B14A-64250F0A6AF8-low.png"></div>  
               <p><a name="GUID-521522B2-CBBC-4400-B7AF-0BD980279FA8"></a> 选中事件 01，单击“下游材质”按钮。可以仅通过播放动画检查指定给事件 02、事件 03 和事件 04 的材质；结果为来自事件 01 下游的所有事件均继承了绿色材质。该操作的运行不甚理想，因为来自事件 05 的粒子也获得了绿色材质。我们需要采用某种方法改善此情况。目标是使起源于两个出生事件的粒子保留其各自的原始材质。
                  
               </p> 
               <p><a name="GUID-95BDF850-9FC4-44F6-8DD4-87CBE871D115"></a> 首先，请尝试以下操作：选择事件 05（具有“蓝色”材质的开始事件），然后单击“下游材质”按钮。您可能会记得当您单击事件 01 中的按钮时，软件报告“3 个事件中的材质已更新”。现在，通过事件 05，报告有所不同：“所有事件具有有效的材质”。通过此报告，您将了解下游事件中的材质未更改。如果播放动画或检查下游事件，则可以看到它们仍具有来自事件
                  01 的绿色材质。为什么？ 
               </p> 
               <p><a name="GUID-8090BADD-5764-4F8C-91D8-B342EBDB9746"></a> 单击“下游材质”按钮时，插件将从当前事件查找所有下游事件，并为每个下游事件触发“材质更新”。事件中的材质已根据其材质继承参数进行更新。如果继承类型为“无”，或事件有其自己具有材质的操作符（任何“材质”操作符，或具有材质获取的“图形实例”操作符），则事件不会更新其材质，因为事件中的材质已经过定义。如果“继承”类型设置为“最高优先级”，则事件查找其上游事件（事件
                  02 的上游事件为事件 01 和事件 05），检查其“材质优先级”值，并将从具有最高优先级的事件继承材质。在本例中，事件 01 和事件 05 具有相同的材质优先级：0（零）。因此结果不明确：事件 02 可以选择其发现的第一个上游事件。若要强制继承事件
                  05 的材质，请将事件 05 中的材质优先级值更改为 1，然后再次单击“下游材质”。现在您可以看到下游事件具有“蓝色”的材质。 
               </p> 
               <p><a name="GUID-A2F98C42-9E42-436A-96FA-EB53DAE63B96"></a>既定的目标仍然是难以捉摸的：事件 01 中的粒子在进入事件 02 后将材质从“绿色”更改为“蓝色”。因此我们还需要做其他事情。 
               </p> 
               <p><a name="GUID-9632F7BB-6690-43AA-9305-1BAEAD42C745"></a> 用于“继承”类型的最后一个选项为“组合材质”。该类型用于将材质正确传播到下游。选择事件 02，然后将“继承”设置为“组合材质”。现在，单击“当前事件材质”按钮从上游拖动组合材质。现在，如果您查看事件 02 中的“当前材质”，它不是“绿色”或“蓝色”材质，而是标记为类似“材质
                  #10”的新材质。如果将材质拖到“材质编辑器”中，您可以看到，它是一个“多维/子对象”材质，具有一个命名为“蓝色”的子材质。 
               </p> 
               <p><a name="GUID-3C87C460-9EEE-4B74-8D50-B388F20E3048"></a> 为什么？事件 01 和事件 05 均有标准材质，根据事件设置，事件 05 具有更高的优先级。因为这些材质都是标准材质（而不是“多维/子对象”材质），这些材质尝试为事件 02 分配合成“多维/子对象”材质中的第一个窗口。但是，由于较高的优先级值，事件
                  05 起作用。 
               </p> 
               <p><a name="GUID-2B50694C-E3DA-49AD-94D8-11E5DD3A01C1"></a> 若要解决材质碰撞，则需要调整事件 01 或事件 05 中的材质。下面是具体的方法：在事件 05 中选择“材质静态”操作符，然后将“子材质 ID 偏移”值设置为 1（默认值为 0）。请注意，“指定材质 ID”选项会自动启用（稍后介绍原因），但需要启用“在视口中显示”以在视口中查看材质效果。还请注意，操作符的动态名称已从“材质静态
                  02（蓝色）”更改为“材质静态 02（蓝色 &gt;&gt; 1）”，这表明已应用 ID 偏移。 
               </p> 
               <p><a name="GUID-BEEEA79B-52FC-4E0F-8AC0-22E800C9EB13"></a> 选择事件 05 并检查“当前材质”按钮中的材质（拖动到材质编辑器）。此材质是真正的多维/子对象材质，具有两个子材质：第一个窗口为空，第二个窗口被蓝色材质占据。现在可以毫无碰撞地组合事件 01 和事件 05 的材质。 
               </p> 
               <p><a name="GUID-EF395B6C-F7B9-4F51-B7B1-B7734F666B9D"></a> 选中事件 02，然后单击“更新当前材质”按钮。检查“当前材质”按钮中的材质：组合的材质具有两个子材质（绿色和蓝色）。单击“下游材质”按钮将此材质传播到事件 03 和事件 04。 
               </p> 
               <p><a name="GUID-CA8B70B5-25B3-44D8-B922-9AC51F610B74"></a> 如果现在播放动画，您仍然可以看到源自事件 01 中粒子的差异：一旦离开事件 01，它们会变为蓝色。若要修复此问题，需要在“材质静态 01（绿色）”中启用“指定材质 ID”和“在视口中显示”。即使“绿色”材质不具有子材质，子材质索引也是必需的，因为稍后粒子离开事件并由“多维/子对象”材质控制。
                  
               </p> 
            </div>
            <div class="section"><a name="AA1014202"></a> 
               <h2><a name="GUID-7610DEA8-624E-4CB7-9EC3-2C60C7194422"></a> 界面 
               </h2> 
               <p><a name="GUID-1783A21C-FD81-47CF-9384-0C7EA48B8788"></a>本部分描述了材质继承控制（可通过单击事件标题栏进行访问），以及附加新参数“子材质 ID 偏移”（已添加至使用材质的操作符中）。 
               </p> <a name="FIG_2A51467D587741FF95DA9BBBEB2A5F1D"></a><div class="figure-anchor"><img src="../images/GUID-873AE81A-1D53-4CC1-B63A-0D16660588F6-low.jpg"></div>  <a name="GUID-20A1AC0A-35CB-4116-BF03-62C9374A4BF8"></a><div class="dl_section"><a name="GUID-F76A480C-FF22-4403-B67C-1BDD98F70AF0"></a><p class="title"><a name="GUID-C6790CFC-F676-4B5B-BD87-AD51FF450591"></a>“材质继承”组
                  </p>
                  <dl>
                     <dt><a name="GUID-3A5B5911-F04F-4C5E-B205-3ECE774F8319"></a><span class="term"><a name="GUID-6927D40A-A15C-490A-BA17-64E227138922"></a>继承</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-62A6E481-989E-44C4-8387-8DD47CA946B6"></a>在上游事件的基础上定义如何将材质指定给当前事件，以及当前事件如何影响材质下游。从下拉列表中进行选择： <a name="UL_4C236E5C239A421080362166BA3001F3"></a><ul>
                              <li><em class="strong">无</em> - 该事件不从上游事件继承材质。 
                              </li>
                              <li><em class="strong">最高优先级</em> - 从当前所有上游事件选择具有最高优先级的事件，然后从该事件获取材质。 
                              </li>
                              <li><em class="strong">组合材质</em> - 使用来自上游事件的材质合成多维/子对象材质。如果不同的材质和子材质之间存在碰撞，则具有最高优先级的实体占主导地位。 
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt><a name="GUID-8589AFE7-048D-4106-96B8-0CCCA9CC98F5"></a><span class="term"><a name="GUID-D9F7F2C5-E90A-465C-9926-41CDE166CCFE"></a>材质优先级</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-3C734358-12CE-4A73-9F42-D45ADB2398E5"></a>为“继承”设置“最高优先级”和“组合材质”选项使用的优先级值（请参见上文）。
                        </div>
                     </dd>
                  </dl>
                  <div><a name="GUID-7D32F792-4C77-4DCB-B214-480E5245F057"></a><div class="note-note"><span class="label label-target-language">注意:</span>如果事件包含材质类型操作符，则此事件不从上游事件继承材质；“继承”类型选项将不起作用。 
                     </div>
                  </div>
               </div>
               <div class="dl_section"><a name="GUID-16EEC58C-89B9-4FD3-B8D3-4F49AC3C0B0A"></a><p class="title"><a name="GUID-DB924F2F-A72B-4CD6-A6EF-1585185D1FC5"></a>“更新材质”组
                  </p>
                  <p><a name="GUID-B1F544B6-EDB3-4F46-9350-4260500A97C5"></a>该组包含用于设置粒子流事件中的材质的工具。 
                  </p>
                  <dl>
                     <dt><a name="GUID-33C32005-9BAB-43E9-AC9D-2B496C581DDF"></a><span class="term"><a name="GUID-8A109304-6ACE-41A0-B2B9-98BCA2A51632"></a>当前事件材质</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-E05A41AE-1BA8-4167-9E49-D30AF834F0E1"></a>通过从上游事件拖动材质更新当前事件材质。
                        </div>
                     </dd>
                     <dt><a name="GUID-5B0476E1-7782-43F0-988B-0F6E76EA7327"></a><span class="term"><a name="GUID-1BFDB27F-3F9A-4E7E-990B-169E8E6DCF46"></a>下游材质</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-34665132-7852-4348-983D-5A79B37AC4CD"></a> 更新所有下游事件中的材质。 
                        </div>
                     </dd>
                     <dt><a name="GUID-9ED308CD-B1B9-412C-BA00-74289DA35727"></a><span class="term"><a name="GUID-EF6AECD1-4E61-407F-BADC-4413C0D90951"></a>所有事件中的材质</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-44B4A01F-30F7-4231-941D-474315C628C8"></a>更新场景中所有粒子流系统中所有事件的材质。
                        </div>
                     </dd>
                     <dt><a name="GUID-F7B42AC6-4FDE-4974-945B-FC6BBD2A4799"></a><span class="term"><a name="GUID-6E93DD9E-7C7B-490F-B0EF-72031AA91674"></a>当前材质</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-03170B86-ABB5-4706-B2B7-2EC85F5DD81A"></a>显示事件所用的材质。这是一个只读属性；可以将材质从该按钮拖动到材质编辑器以供检查，但是不能将材质从材质编辑器拖动到该按钮。 
                        </div>
                     </dd>
                  </dl>
               </div> 
            </div>
            <div class="section"><a name="AA1014363"></a> 
               <h2><a name="GUID-D5FA760E-331F-4E87-87EF-43CDF91465E2"></a>其他参数：“材质/出生组/图形实例”操作符
               </h2> <a name="GUID-C2A13A60-179D-4752-930B-C175E03AE642"></a><dl>
                  <dt><a name="GUID-D71EC2F3-6C01-4696-B325-928ECE934BAC"></a><span class="term"><a name="GUID-0A5A2C58-2C20-413D-A543-EA067592EF1E"></a>子材质 ID 偏移</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-CA0F89C8-ECB6-4066-A49C-95D8C64C9D56"></a>当使用材质继承与“多维/子对象”材质时，“材质”操作符、“出生组”操作符和“图形实例”操作符将此值添加到“材质 ID”值来创建子材质 ID，该子材质 ID 由“粒子流”使用以确定要继承的材质的子材质，并根据材质中的子材质的 ID 应用到其事件中的粒子。
                     </div>
                  </dd>
               </dl> 
            </div>
         </div>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>