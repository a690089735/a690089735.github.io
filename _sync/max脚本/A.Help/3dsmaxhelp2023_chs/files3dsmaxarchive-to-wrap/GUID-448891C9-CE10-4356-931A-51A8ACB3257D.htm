<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-17">
      <meta name="topicid" content="GUID-448891C9-CE10-4356-931A-51A8ACB3257D">
      <meta name="description" content="在模拟过程中，可以根据环境使用认知控制器功能来使群组成员改变行为。例如，一个角色可以随机漫步，直到它移动到和一目标相距一定距离时开始朝那个目标直行。">
      <meta name="indexterm" content="群组: 人工智能">
      <meta name="indexterm" content="群组: 认知控制器">
      <meta name="indexterm" content="群组行为: 认知控制器">
      <meta name="indexterm" content="群组行为: 脚本更改">
      <meta name="contextid" content="TOPIC_COGNITIVE_CONTROLLERS_PROC">
      <meta name="topic-type" content="concept">
      <title>认知控制器</title><script language="javascript">var index = 'index.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-448891C9-CE10-4356-931A-51A8ACB3257D"></a><div class="head">
            <h1>认知控制器</h1>
         </div>
         <p class="blurb">在模拟过程中，可以根据环境使用认知控制器功能来使群组成员改变行为。例如，一个角色可以随机漫步，直到它移动到和一目标相距一定距离时开始朝那个目标直行。 </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169D6"></a>在技术术语中，认知控制器使用条件脚本来影响群组模拟，这可以有效的实现一系列的人工智能。可以使用<span class="char_link"><a href="GUID-435DDD88-C220-48BB-ACAF-764EF09AC349.htm">认知控制器编辑器 </a></span>，这是一个流程图样式编辑器（很像<span class="char_link"><a href="../files3dsmaxhelp/GUID-841BC7B2-AE0E-434F-B6E9-28BB14A4098A.htm">“运动流图”对话框</a></span>），来设置行为网络和行为组合，我们将其称之为状态。然后，可以应用基于 MAXScript 脚本的变化来指定代理何时从一个状态移动到另一个状态。即便使用相对简单的设置，也可以创建模拟，以使角色栩栩如生、具有意识、在场景中移动时能作出决定。 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169D7"></a>可以在<span class="char_link"><a href="GUID-533D2EC1-1943-4123-BD62-101F02A5AA3B.htm">“状态”对话框</a></span>主题中找到介绍认知控制器变换的各种示例的步骤： 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169D8"></a> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm#WSF742DAB041063133728B9B2112A1CE7292-7E0E">测试粒子系统参数</a></span> 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169D9"></a> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm#WSF742DAB041063133728B9B2112A1CE7292-7E0D">测试对象位置</a></span> 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169DA"></a> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm#WSF742DAB041063133728B9B2112A1CE7292-7E0C">测试大气效果属性</a></span> 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169DB"></a> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm#WSF742DAB041063133728B9B2112A1CE7292-7E0B">测试两个对象之间距离</a></span> 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169DC"></a> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm#WSF742DAB041063133728B9B2112A1CE7292-7E0A">测试修改器参数</a></span> 
         </p>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF169DD"></a> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm#WSF742DAB041063133728B9B2112A1CE7292-7E09">测试另一对象行为</a></span> 
         </p>
         <div class="section"><a name="WS1A9193826455F5FF103859C11318F51BDD-4643"></a> 
            <h2><a name="GUID-39115FFD-E681-4A2B-9A1A-1B116B5C1701"></a>过程
            </h2> <a name="WSF742DAB041063133728B9B2112A1CE7292-7E38"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190045EBC"></a>
               <!--CPM-ContextId = 'TOPIC_COGNITIVE_CONTROLLERS_PROC'--><a name="GUID-BF89DED9-E94D-4DAB-B931-DBDA377345F4"></a>要设置并使用认知控制器，请执行以下操作：
            </p>
            <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E1"></a>此步骤是创建和使用认知控制器的典型设置过程。此步骤假设您已具备群组模拟设置的基本知识。为获得更多关于群组设置的信息，请参阅<span class="char_link"><a href="GUID-164ED404-D6B9-4B4B-A6CD-CE4F1B67EA04.htm">群组辅助对象</a></span>和<span class="char_link"><a href="GUID-90993367-2EB0-4E7E-B37C-B66C81D20F3C.htm">“设置”卷展栏</a></span>。 
            </p>
            <ol type="1" start="1">
               <li>创建一个包含群组对象和一个或多个代理的场景。请参见<span class="char_link"><a href="GUID-A0B43BC0-5D11-4852-A83A-5B380B5526EB.htm">创建群组辅助对象</a></span>。 
               </li>
               <li>至少创建两个行为。请参见<span class="char_link"><a href="GUID-5CDDE2B2-DA06-4003-872D-5B181E58EEF1.htm">指定行为</a></span>。 
               </li>
               <li><img src="../images/GUID-3015B9FB-1B62-4864-860C-1DC395CF1EB6-low.png"> 打开<span class="char_link"><a href="GUID-435DDD88-C220-48BB-ACAF-764EF09AC349.htm">认知控制器编辑器 </a></span>。 
               </li>
               <li>单击“新建”按钮来创建认知控制器。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E2"></a>character studio 将此控制器命名为默认名称“认知控制器”。推荐为此认知控制器命名一个描述性的名称，例如：“查找/漫步”。单击文本框中的名称并从键盘进行编辑。 
                  </p> 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E3"></a><img src="../images/GUID-0BEB2699-1E9D-42B6-BA1A-71C13C2FB6F6-low.png"> 创建一个认知控制器会自动转到“创建状态”模式中。 
                  </p> 
               </li>
               <li>单击编辑器窗口来创建并放置一个状态。在不同位置继续单击来添加任意多的状态。 </li>
               <li>右键单击状态以打开<span class="char_link"><a href="GUID-533D2EC1-1943-4123-BD62-101F02A5AA3B.htm">“状态”对话框</a></span>。 
               </li>
               <li>推荐为状态命名更具描述性的名称，这可以在“状态”对话框中设置。在文本框中单击名称（状态或状态号码）并从键盘进行编辑。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E4"></a>下一步，给每一状态定义一个或多个行为。 
                  </p> 
               </li>
               <li>单击“添加”按钮。 </li>
               <li>在“选择行为”对话框中，选择一个或多个行为。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E5"></a>如果选中了多个行为，那么可以在“状态”编辑器中给每个行为指定不同权重。例如，可以把二分之一权重的“漫步”行为合并到全权重的“查找”行为中，以便在代理查找目标时会轻盈地漫步。 
                  </p> 
               </li>
               <li>关闭“选择行为”对话框，然后关闭“状态”编辑器。 </li>
               <li>根据需要重复步骤 6－10，来为控制器中的其它状态定义行为。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E6"></a>下一步，使用“创建变换”来定义在模拟过程中的状态序列。 
                  </p> 
               </li>
               <li>决定状态发生的顺序。 </li>
               <li>单击 <img src="../images/GUID-E3E68807-9771-478D-84F6-1CBF87A1FFBC-low.png">（创建过渡）。 
               </li>
               <li>在一个状态到下一状态间拖动一条直线以便执行它们。单击某个状态来创建从状态自身到自身的变换。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E7"></a>显示一个变换箭头，它从“源”状态指向“目标”状态。 
                  </p> 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E8"></a>每一状态可以拥有任意数目的传入和外出变换。可以根据需要给每一状态指定不同的状态变换条件来创建复杂状态图表。 
                  </p> 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169E9"></a>下一步，使用“状态变换”对话框给每一变换定义一个条件。 
                  </p> 
               </li>
               <li>右键单击变换线条。 </li>
               <li>在<span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm">“状态变换”对话框</a></span>中，为变换条件输入一个名称，然后单击“编辑 MAXScript”按钮。 
               </li>
               <li>使用 MAXScript 编辑器窗口来输入或加载脚本，这些脚本定义了变换发生的一个条件或多个条件。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169EA"></a>通常，它是一个用来测试条件的函数，并返回 1（如果为真）或 0（如果为假）。 
                  </p> 
                  <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E80A"></a><div class="note-note"><span class="label label-target-language">注意:</span>有关此函数的示例 MAXScript 代码的信息，请参见联机《用户参考》中的此主题。<span class="charspan-emphasis"> <em class="mild"></em> </span> 
                     </div>
                  </div> 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169EB"></a>例如： 
                  </p> 
                  <div class="codeBlock"><pre>fn test1 del t = (
if (del.simpos.x &lt;= 40 and del.duration &gt; 50) then 1 else 0
)</pre></div> 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF169EC"></a>简而言之，上述内容说明如果代理在 X 轴上的位置小于或等于 40，而它当前所处的状态占用了 50 多个帧，则会发生过渡。然而，如果条件其中之一为假或都为假，那么代理应该呆在当前状态（或测试其它变换）。下面列出关键字： 
                  </p> <a name="WS1A9193826455F5FFBA679E112A6A190045EBD"></a><ul>
                     <li>fn - 以下是 MAXScript 函数。 </li>
                     <li>test1 - 函数名应该作为变换条件显示在“变换”对话框中。当变换通过测试时，首先执行此函数。此脚本可能包含任意数目的条件函数，它们被脚本内部函数所调用。 </li>
                     <li>del - 指当前正应用该脚本的代理。每个认知控制器指向的代理/组成员的每帧中都执行一次变换脚本。因此，如果在脚本中使用“del”而不是指定的代理名称，那么将测试指定到认知控制器的所有代理。 </li>
                     <li>t - 模拟中的当前时间（帧编号）。 </li>
                     <li>del.simpos.x - X 轴上代理的的当前位置。特殊函数“simpos”确定代理在模拟过程中的位置。这是必要的，因为在模拟过程中使用标准函数“[node].pos”导致 MAXScrip 不可使用代理位置。 </li>
                     <li>del.duration - 代理位于当前状态的帧数。 
                        <p><a name="WS73099CC142F4875514C01AC112A7ACEF169ED"></a>通过打开 MAXScript 监听窗口（按 <span class="keyboardEntry">F11</span> 键）并输入以下字符，能够看到可以检入脚本的特定于代理的参数的完整列表： 
                        </p> 
                        <p><a name="WS73099CC142F4875514C01AC112A7ACEF169EE"></a> <em class="strong">显示属性 $delegate01</em> 
                        </p> 
                        <p><a name="WS73099CC142F4875514C01AC112A7ACEF169EF"></a>因为代理是一个节点，除了上面提到的“simpos”之外，它也能对标准的 MAXScript 节点相关函数作出反应。此外，为获得关于如何访问变换属性的信息，例如，持续时间和优先级，请参阅 <em class="mild">MAXScript 帮助</em>。 
                        </p> 
                        <p><a name="WS73099CC142F4875514C01AC112A7ACEF169F0"></a>要了解可以与认知控制器一起使用的 MAXScript 条件的更多示例，请参见<span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm">“状态变换”对话框</a></span>。 
                        </p> 
                     </li>
                  </ul> 
               </li>
               <li>使用“状态变换”对话框来设置其它参数，例如，优先级和持续时间。 </li>
               <li>使用<span class="char_link"><a href="GUID-3CD5BE01-CD59-49E8-A016-3F8187CA962F.htm">“行为指定和组合”对话框</a></span>给代理或组合指定认知控制器。 
                  <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E80B"></a><div class="note-note"><span class="label label-target-language">注意:</span>群组不允许在代理中使用多个认知控制器。可以指定多个控制器，但在解算时，character studio 将通知您它将只使用第一个指定的认知控制器。 
                     </div>
                  </div> 
               </li>
            </ol> 
         </div>
         <div class="see-also">
            <h4>请参见</h4>
            <div class="related-links">
               <ul>
                  <li> <span class="char_link"><a href="GUID-435DDD88-C220-48BB-ACAF-764EF09AC349.htm">认知控制器编辑器 </a></span> 
                  </li>
                  <li> <span class="char_link"><a href="GUID-533D2EC1-1943-4123-BD62-101F02A5AA3B.htm">“状态”对话框</a></span> 
                  </li>
                  <li> <span class="char_link"><a href="GUID-AE3F62AF-0988-4859-B1FE-1D8886548B61.htm">“状态变换”对话框</a></span> 
                  </li>
               </ul>
            </div>
         </div>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>