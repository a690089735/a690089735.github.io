var topic = "<!DOCTYPE html><html>\n   <head>\n      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n      <meta name=\"product\" content=\"3DSMAX\">\n      <meta name=\"release\" content=\"2023\">\n      <meta name=\"book\" content=\"GeneralUser\">\n      <meta name=\"created\" content=\"2022-03-17\">\n      <meta name=\"topicid\" content=\"GUID-6352C429-A05F-4B3C-87DA-1C289008AF3A\">\n      <meta name=\"description\" content=\"群组行为的一个重要组成部分就是回避障碍物。可将障碍物看作阻止群组成员前进的任何事物。障碍物的示例有墙、电线杆和栅栏以及其他群组成员。遇到这类物体可导致回避行为，这种行为由任意组合的速度减慢、转向和停止行为组成。\">\n      <meta name=\"indexterm\" content=\"群组行为: 障碍物回避\">\n      <meta name=\"contextid\" content=\"TOPIC_OBSTACLE_AVOIDANCE\">\n      <meta name=\"contextid\" content=\"TOPIC_OBSTACLE_AVOIDANCE_PROC1\">\n      <meta name=\"contextid\" content=\"TOPIC_OBSTACLE_AVOIDANCE_PROC2\">\n      <meta name=\"contextid\" content=\"TOPIC_OBSTACLE_AVOIDANCE_PROC3\">\n      <meta name=\"contextid\" content=\"TOPIC_OBSTACLE_AVOIDANCE_PROC4\">\n      <meta name=\"contextid\" content=\"TOPIC_OBSTACLE_AVOIDANCE_PROC5\">\n      <meta name=\"topic-type\" content=\"concept\">\n      <title>障碍物回避</title><script language=\"javascript\">var index = \'index.html\';</script></head>\n   <body height=\"100%\">\n      <div class=\"body_content\" id=\"body-content\" dir=\"ltr\"><a name=\"GUID-6352C429-A05F-4B3C-87DA-1C289008AF3A\"></a><div class=\"head\">\n            <h1>障碍物回避</h1>\n         </div>\n         <p class=\"blurb\">群组行为的一个重要组成部分就是回避障碍物。可将障碍物看作阻止群组成员前进的任何事物。障碍物的示例有墙、电线杆和栅栏以及其他群组成员。遇到这类物体可导致回避行为，这种行为由任意组合的速度减慢、转向和停止行为组成。 </p>\n         <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B2\"></a>在 character studio 中有多种实现回避的方式，包括： \n         </p><a name=\"WS1A9193826455F5FFBA679E112A6A190045EAB\"></a><ul>\n            <li><span class=\"char_link\"><a href=\"GUID-FFED2BB3-4B71-437D-BFEB-2BF28AF482DC.htm\">回避行为</a></span>是其中一种最常用的行为。使用此行为可导致群组成员回避其他群组成员，或场景中的球形物。方法是在回避的物体周围创建球形<em class=\"mild\">回避体积</em>，所以这种方法不适合不规则物体。 \n               <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B3\"></a>回避行为与群组中的任何其他行为不同。在所有其他行为在代理上施加了它们的力之后，回避行为再发挥作用，它为了回避障碍物，能让代理转向、减慢速度甚至停止代理。 \n               </p> \n            </li>\n            <li>使用<span class=\"char_link\"><a href=\"GUID-0F371F76-4C5B-436D-B7AA-092CFBBC07B8.htm\">墙排斥行为</a></span>可使群组成员回避宽大、扁平的物体（如墙和栅栏）。可以设置排除作用的最大距离，并描述在代理靠近墙时墙的斥力增大的速度。 \n               <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B4\"></a>与回避行为不同，回避行为可以停止代理或减慢代理速度，墙排斥行为只对代理施加力，目的是让它绕过墙。它不保证能够回避墙。您必须使用在“指定和组合”对话框中使用它的距离和衰减参数，以及权重来控制力的强度。 \n               </p> \n            </li>\n            <li>使用<span class=\"char_link\"><a href=\"GUID-2B554BAD-7FC7-48BD-958A-E2CAD5F9DE1F.htm\">排斥行为</a></span>可使群组成员绕过物体。它的作用方式与墙排斥行为非常相似，只不过它使用的是球形体积而不是平面。可以设置排除作用的最大距离，并描述在代理靠近障碍物时斥力增大的速度。 \n               <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B5\"></a>排除对代理施加力让它绕过障碍物。它不保证能够回避障碍物。您必须在<span class=\"char_link\"><a href=\"GUID-3CD5BE01-CD59-49E8-A016-3F8187CA962F.htm\">“行为指定和组合”对话框</a></span>中使用力的距离和衰减参数，以及权重来控制它的强度。作为一种回避非陆地生物（如鱼和鸟）的简单技巧，可以使用排斥行为，而不是回避行为。 \n               </p> \n            </li>\n            <li>使用<span class=\"char_link\"><a href=\"GUID-523C7F3C-8901-452F-9D9C-19C1222C92E6.htm\">向量场</a></span>。这是一种特殊类型的空间扭曲，群组成员可以使用它来绕过不规则物体，如弯曲、凹陷的表面。可以将向量场空间扭曲和回避行为配合使用，让代理在靠近复杂物体时减慢速度，之后绕过该物体。这保证代理不穿过障碍物表面。 \n               <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B6\"></a>还可以将向量场空间扭曲和<span class=\"char_link\"><a href=\"GUID-06696FD6-6EFE-4972-AAFD-EC86DA367A0E.htm\">空间扭曲行为</a></span>配合使用。这只是向代理施加了一个模仿对象轮廓的力。它不保证代理不会穿过障碍物表面。可以将向量场与空间扭曲行为和回避行为一起使用，以组合这几种行为的效果。 \n               </p> \n            </li>\n         </ul>\n         <div class=\"section\"><a name=\"WS1A9193826455F5FF103859C11318F51BDD-4647\"></a> \n            <h2><a name=\"GUID-D5A68AA1-C013-4318-9473-80D6203CDB7E\"></a>过程\n            </h2> <a name=\"WSF742DAB041063133728B9B2112A1CE7292-7E48\"></a><p class=\"list-intro\"><a name=\"WS1A9193826455F5FFBA679E112A6A190045EAC\"></a>\n               <!--CPM-ContextId = \'TOPIC_OBSTACLE_AVOIDANCE_PROC1\'--><a name=\"GUID-1625599E-628B-4772-9C1A-E63B9A08BF25\"></a>要使用回避行为，请执行以下操作：\n            </p>\n            <ol type=\"1\" start=\"1\">\n               <li>向群组对象添加回避行为。 </li>\n               <li>在“避免行为”卷展栏中，使用“无”按钮或 <img src=\"../images/GUID-5268C54B-0A84-4430-BA48-D001FF117000-low.png\">（多个选择）来指定要避免的一个或多个目标对象。 \n                  <div><a name=\"WS1A9193826455F5FFBA22E1113C6C30C0E802\"></a><div class=\"note-tip\"><span class=\"label label-target-language\">提示</span>要使整个代理组合的代理之间能够彼此回避，请选择组合中的所有代理。群组系统使每个代理都回避彼此。 \n                     </div>\n                  </div> \n               </li>\n               <li>打开“显示硬半径”可查看视口中的半径回避区域。将代理的硬半径到调整适合的大小。 </li>\n               <li>调整“制动压力”以决定代理在遇到回避物时是否减慢速度。 </li>\n               <li>调整“预处理”参数以决定每个代理将预处理多少帧以确定回避其他物体的最佳方式。 </li>\n               <li>使用<span class=\"char_link\"><a href=\"GUID-3CD5BE01-CD59-49E8-A016-3F8187CA962F.htm\">行为指定</a></span>向代理或组合指定行为。 \n               </li>\n            </ol> <a name=\"WSF742DAB041063133728B9B2112A1CE7292-7E47\"></a><p class=\"list-intro\"><a name=\"WS1A9193826455F5FFBA679E112A6A190045EAD\"></a>\n               <!--CPM-ContextId = \'TOPIC_OBSTACLE_AVOIDANCE_PROC2\'--><a name=\"GUID-8F1F9A55-4766-42FD-B52C-96431E94703D\"></a>要使用墙排斥行为，请执行以下操作：\n            </p>\n            <ol type=\"1\" start=\"1\">\n               <li>在 <img src=\"../images/GUID-98173E20-D8BF-4A71-A169-42981748A8A8-low.png\">“创建”面板上，单击 <img src=\"../images/GUID-9A23D2B8-9CE2-40BE-98B6-651DBC94F4F7-low.png\">（辅助对象），然后单击“栅格”。在场景中创建栅格。 \n                  <div><a name=\"WS1A9193826455F5FFBA22E1113C6C30C0E803\"></a><div class=\"note-tip\"><span class=\"label label-target-language\">提示</span>为获得最佳效果，请勿使用“镜像”复制行为要使用的栅格。请在按 <span class=\"keyboardEntry\">Shift</span> 键时单击“克隆”进行复制。 \n                     </div>\n                  </div> \n               </li>\n               <li> <img src=\"../images/GUID-5D7D7630-6D16-400D-AE6F-87F13C97DEA2-low.png\"> 移动和 <img src=\"../images/GUID-7E7B2E05-D918-4D42-BE95-946D1C126036-low.png\"> 旋转栅格以确定其位置。 \n                  <div><a name=\"WS1A9193826455F5FFBA22E1113C6C30C0E804\"></a><div class=\"note-tip\"><span class=\"label label-target-language\">提示</span>墙排斥行为以在代理的局部 Z 轴方向上让代理远离该栅格。在仍选中该栅格的情况下，使用局部坐标系查看视口中 Z 轴的方向；该轴箭头所指方向是 Z 轴的正向。检查 Z 轴方向将加速设置行为过程。 \n                     </div>\n                  </div> \n               </li>\n               <li> <img src=\"../images/GUID-AEA0DCE7-AEB5-4739-B941-449CC7232C3F-low.png\"> 选择群组对象，并添加墙排斥行为。 \n               </li>\n               <li>在“墙排斥行为”卷展栏中，单击“无”，并选取该栅格。 </li>\n               <li>选择“正轴”可使代理受栅格 Z 轴一侧的排除。还可以选择“负轴”使代理受到栅格 Z 轴相反一侧的排除，或选择“双轴”使代理受到栅格 Z 轴两侧的排除。 </li>\n               <li>如果想让代理在栅格前方指定区域内才受到栅格的吸引（而不是场景的任何位置上都被吸引），请打开“使用距离”。使用“内部距离”和“外部距离”参数可以设置代理将受栅格吸引的区域。打开“显示距离”可在视口中查看该距离。 </li>\n               <li>使用<span class=\"char_link\"><a href=\"GUID-3CD5BE01-CD59-49E8-A016-3F8187CA962F.htm\">行为指定</a></span>向代理或组合指定行为。 \n               </li>\n            </ol> <a name=\"WSF742DAB041063133728B9B2112A1CE7292-7E46\"></a><p class=\"list-intro\"><a name=\"WS1A9193826455F5FFBA679E112A6A190045EAE\"></a>\n               <!--CPM-ContextId = \'TOPIC_OBSTACLE_AVOIDANCE_PROC3\'--><a name=\"GUID-49365B23-F62C-4E8D-8409-FEDFFD08AC09\"></a>要使用排斥行为，请执行以下操作：\n            </p>\n            <ol type=\"1\" start=\"1\">\n               <li>向群组对象添加排斥行为。 </li>\n               <li>在“排斥行为”卷展栏中，使用“无”按钮或 <img src=\"../images/GUID-5268C54B-0A84-4430-BA48-D001FF117000-low.png\">（多个选择）来指定要排斥代理的一个对象或多个对象。 \n               </li>\n               <li>根据需要更改默认设置。 </li>\n               <li>使用<span class=\"char_link\"><a href=\"GUID-3CD5BE01-CD59-49E8-A016-3F8187CA962F.htm\">行为指定</a></span>向代理或组合指定行为。 \n               </li>\n            </ol> <a name=\"WSF742DAB041063133728B9B2112A1CE7292-7E45\"></a><p class=\"list-intro\"><a name=\"WS1A9193826455F5FFBA679E112A6A190045EAF\"></a>\n               <!--CPM-ContextId = \'TOPIC_OBSTACLE_AVOIDANCE_PROC4\'--><a name=\"GUID-C6D78A69-AC1A-46F6-97E1-29112714582C\"></a>要添加向量场空间扭曲，请执行以下操作：\n            </p>\n            <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B7\"></a>添加向量场空间扭曲对象的效果和添加“长方体”基本几何体的效果相同。 \n            </p>\n            <ol type=\"1\" start=\"1\">\n               <li>在“对象类型”卷展栏上，单击“向量场”。 </li>\n               <li>在视口中拖动以设置初始尺寸。 <a name=\"WS1A9193826455F5FFBA679E112A6A190045EB0\"></a><ul>\n                     <li>如果使用“立方体”创建方法，这会同时设置全部三个尺寸。 </li>\n                     <li>如果使用“长方体”创建方法，松开鼠标按钮，然后垂直移动鼠标设置高度。 </li>\n                  </ul> \n               </li>\n               <li>单击以创建空间扭曲。 </li>\n            </ol> <a name=\"WSF742DAB041063133728B9B2112A1CE7292-7E44\"></a><p class=\"list-intro\"><a name=\"WS1A9193826455F5FFBA679E112A6A190045EB2\"></a>\n               <!--CPM-ContextId = \'TOPIC_OBSTACLE_AVOIDANCE_PROC5\'--><a name=\"GUID-F783C19F-CB58-434F-81B2-491275D238BC\"></a>要对代理使用向量场空间扭曲，请执行以下操作：\n            </p>\n            <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B8\"></a>此步骤介绍在群组模拟中对代理使用向量场空间扭曲的常规准则。 \n            </p>\n            <ol type=\"1\" start=\"1\">\n               <li>创建充当障碍物的对象。此对象必须是可编辑网格或基本几何体；它可以有修改器。 </li>\n               <li>添加向量场空间扭曲。 </li>\n               <li>设置空间扭曲晶格的位置和比例，以便它可以将障碍物围起来。 \n                  <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169B9\"></a>晶格应比障碍物大很多。障碍物应基本位于晶格中心。 \n                  </p> \n               </li>\n               <li>在“晶格参数”卷展栏中，增大“长度分段/宽度分段/高度分段”设置，以便晶格分段以合理的间隔与障碍物相交。 \n                  <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169BA\"></a>要确定障碍物合适的分段设置，请先检查障碍物的复杂程度。如果障碍物有许多细节，同时您希望这些细节反映在向量场中，那么需要一个相对较高的晶格分辨率。 \n                  </p> \n               </li>\n               <li>单击“障碍参数”卷展栏 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“计算向量”组 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“向量场对象”按钮（最初的标签为“无”），然后在视口中单击要在群组模拟中充当障碍的对象。 \n                  <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169BB\"></a>此操作指定了障碍物。<em class=\"mild\">范围体积栅格</em>以橄榄色的线框出现在对象的表面。 \n                  </p> \n               </li>\n               <li>增大“障碍参数”卷展栏 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“计算向量”组 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“范围”设置。 \n                  <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169BC\"></a>在增大此设置后，将会看到范围体积栅格扩大。该范围体积应将群组成员需要开始转向以回避障碍物的空间包围起来。 \n                  </p> \n               </li>\n               <li>禁用“显示”组 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“显示晶格”和“显示范围”，以便向量场在生成时更容易看见。 \n               </li>\n               <li>启用“显示组”<img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“显示向量场”。 \n               </li>\n               <li>在“计算向量”组中，单击“计算”按钮。这将生成向量场。 \n                  <div><a name=\"WS1A9193826455F5FFBA22E1113C6C30C0E805\"></a><div class=\"note-tip\"><span class=\"label label-target-language\">提示</span>若要使向量线更明显，请增大“显示组”<img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“向量缩放”设置。 \n                        <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169BD\"></a>向量显示为障碍物周围的蓝色线条。为范围体积栅格中的每个晶格交集计算一个向量。每个向量都与最接近晶格点的对象表面那点的对象法线匹配。 \n                        </p> \n                        <p><a name=\"WS73099CC142F4875514C01AC112A7ACEF169BE\"></a>与障碍物的距离越远，向量力越小，这从朝向栅格周边的向量线逐渐变短就可以看出来。 \n                        </p> \n                     </div>\n                  </div> \n               </li>\n               <li>添加<span class=\"char_link\"><a href=\"GUID-164ED404-D6B9-4B4B-A6CD-CE4F1B67EA04.htm\">群组</a></span>和<span class=\"char_link\"><a href=\"GUID-09B7C789-F4DC-4F60-9E77-DC8A48EAB7F9.htm\">代理</a></span>辅助对象。 \n               </li>\n               <li>选择群组对象并打开“修改”面板。 </li>\n               <li>在“设置”卷展栏 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“行为”组中，单击“新建”。 \n               </li>\n               <li>在显示的“选择行为类型”对话框中，选择“空间扭曲行为”，然后单击“确定”。 </li>\n               <li>在出现的空间扭曲行为卷展栏中，单击相应按钮（最初的标签为“无”），然后在视口中，单击“向量场”空间扭曲。 \n                  <div><a name=\"WS1A9193826455F5FFBA22E1113C6C30C0E806\"></a><div class=\"note-tip\"><span class=\"label label-target-language\">提示</span>使用“按名称选择”来选择空间扭曲可能更容易些。 \n                     </div>\n                  </div> \n               </li>\n               <li>在“设置”卷展栏中，单击“行为指定”按钮，然后使用<span class=\"char_link\"><a href=\"GUID-3CD5BE01-CD59-49E8-A016-3F8187CA962F.htm\">“行为指定和组合”对话框</a></span>将代理指定给该空间扭曲行为。 \n               </li>\n               <li>向模拟添加任何其它适合的对象或行为。 </li>\n               <li> <img src=\"../images/GUID-AEA0DCE7-AEB5-4739-B941-449CC7232C3F-low.png\"> 选择群组对象，然后通过单击“解算”卷展栏 <img class=\"adsk-glyph-arrow\" src=\"../images/ac.menuaro.gif\">“解算”按钮来解算模拟。 \n               </li>\n               <li>通过调整<span class=\"char_link\"><a href=\"GUID-670FC04E-3F3C-48FE-B6EF-3CD91CBF916C.htm\">晶格参数</a></span>和<span class=\"char_link\"><a href=\"GUID-3BF34F62-42AE-4F65-A0EB-825B1C8D81F1.htm\">障碍参数</a></span>，微调与向量场空间扭曲关联的行为。 \n               </li>\n               <li>在每次调整后，继续计算向量场，然后求解模拟。在某些情况下，您可能需要生成向量场参数的动画效果，以保留该字段中的对象。 </li>\n            </ol> \n         </div>\n         <div class=\"footer-block\"><a href=\"..\" class=\"comments-anchor\" target=\"_blank\"><span class=\"comments-link\">请将您关于此页内容的评论发送给我们</span></a></div><br><p class=\"footer-license-block\"><a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc-sa/3.0/\" target=\"_blank\"><img alt=\"Creative Commons License\" style=\"border-width: 0;\" src=\"../images/ccLink.png\"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc-sa/3.0/\" target=\"_blank\"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href=\"http://autodesk.com/creativecommons\" target=\"_blank\">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>\n   </body>\n</html>";