<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-A6EB9AE5-66ED-4400-8252-5E012AFBBEA0">
      <meta name="description" content="通过“动画”菜单上的“加载动画”和“保存动画”命令，可以从实际场景中单独保存和加载任意数量对象的动画数据。">
      <meta name="indexterm" content="XMM 文件（XML 动画贴图）">
      <meta name="indexterm" content="文件类型: XMM（XML 动画贴图）">
      <meta name="indexterm" content="XAF 文件（XML 动画文件）">
      <meta name="indexterm" content="文件类型: XAF（XML 动画文件）">
      <meta name="indexterm" content="加载动画">
      <meta name="indexterm" content="保存动画">
      <meta name="topic-type" content="concept">
      <title>保存和加载动画</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-A6EB9AE5-66ED-4400-8252-5E012AFBBEA0"></a><div class="head">
            <h1>保存和加载动画</h1>
         </div>
         <p class="blurb">通过“动画”菜单上的“加载动画”和“保存动画”命令，可以从实际场景中单独保存和加载任意数量对象的动画数据。 </p>
         <p><a name="WS1A9193826455F5FF-6507591011913E8F4B8-6355"></a>这些命令使用两种文件类型： 
         </p><a name="WS1A9193826455F5FFBA679E112A6A19004-2E"></a><ul>
            <li>XAF（XML 动画文件）包含动画数据。 </li>
            <li>XMM（XML 动画映射文件）包含贴图信息：传入动画数据如何指定到当前场景中的对象。 </li>
         </ul>
         <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-231F"></a>贴图相当灵活：只要数据类似，就可以指定。例如，位置和旋转动画的每个关键点都包含三个数字，因此，如果需要的话，可以将传入位置数据指定给当前对象的旋转轨迹，反之亦然。 
         </p>
         <div class="section"><a name="WS1A9193826455F5FF103859C11318F51BDD-2B4E"></a> 
            <h2><a name="GUID-FDC6AB80-E0B0-47BA-BBB8-67B8F76E365E"></a>过程
            </h2> <a name="WSF742DAB04106313339AEF003112A1CE9423-7FAC"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A19004-2D"></a>要使用“保存动画”和“加载动画”命令，请执行以下操作：
            </p>
            <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-231B"></a>一开始先保存当前场景中的动画数据。 
            </p>
            <ol type="1" start="1">
               <li>选择场景中包含动画的对象。动画可以是以下任意类型：程序、手动设置关键帧、IK，等。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-231A"></a>对所有对象而言，保存动画的帧范围都是相同的，因此确保只选择要保存相同帧范围的对象。 
                  </p> 
                  <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E3F2"></a><div class="note-note"><span class="label label-target-language">注意:</span>使用此方法，可以仅从选定对象保存动画。此外，还可以从轨迹视图中的特定轨迹保存动画；请参见<span class="char_link"><a href="GUID-FE69FC7B-F9AC-408A-90E8-C05242C92F73.htm">层次右键单击菜单</a></span>。 
                     </div>
                  </div> 
               </li>
               <li>从“动画”菜单中，选择<span class="char_link"><a href="GUID-67D51421-2B09-4832-8E09-AC09EE6BBC43.htm">“保存动画”</a></span>。 
               </li>
               <li>设置保存参数。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2319"></a>默认情况下，该命令保存选定对象动画轨迹中的所有关键点，包括从约束中派生的运动。例如，如果由于将“注视约束”应用于“旋转”轨迹而导致对象旋转，则当您在启用<span class="char_link"><a href="GUID-67D51421-2B09-4832-8E09-AC09EE6BBC43.htm#WS1A9193826455F5FF4E421D7D11BF108001D-69AA">“包含约束”</a></span>的情况下保存动画时，<span class="charspan-msgph">3ds Max</span> 会根据约束运动生成旋转关键点。它不保存实际的约束。 
                  </p> 
                  <p><a name="WS73099CC142F487551FACE55114134B88B1-731B"></a>可以通过启用<span class="char_link"><a href="GUID-67D51421-2B09-4832-8E09-AC09EE6BBC43.htm#WS73099CC142F4875514C01AC112A7ACEF16-22EC">“线段”</a></span>并设置帧范围只保存动画的一部分。 
                  </p> 
               </li>
               <li>指定文件名，然后单击“保存”，或单击“保存”旁边的“+”按钮，以增加文件名的编号，并以新文件名进行保存。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2318"></a>如果选定对象不包含可保存的动画，则会出现消息“没有要保存的动画轨迹”。如果出现这种情况，应创建动画，以根据需要保存或更改“保存动画”参数。 
                  </p> 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2317"></a>接下来可以加载动画数据。 
                  </p> 
               </li>
               <li>设置或加载新场景，然后选择所有要接收加载动画的对象。 
                  <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E3F3"></a><div class="note-note"><span class="label label-target-language">注意:</span>使用此方法，可以仅将动画加载到选定对象。此外，还可以将动画加载到轨迹视图中的特定轨迹中；请参见<span class="char_link"><a href="GUID-FE69FC7B-F9AC-408A-90E8-C05242C92F73.htm">层次右键单击菜单</a></span>。 
                     </div>
                  </div> 
               </li>
               <li>从“动画”菜单中，选择<span class="char_link"><a href="GUID-AC1F9E33-DE2B-4B0D-9E3D-7E2C693D2CDC.htm">“加载动画”</a></span>。 
               </li>
               <li>查找并高亮显示从其加载动画的 XAF 文件。 </li>
               <li>单击“加载运动”。如果添加动画的对象与从中保存动画的对象相同，则将加载动画，并自动映射。如果需要贴图，则可以对其进行设置。或者，如果已经为场景和传入动画数据设置了贴图，则从“运动贴图/重定位”下拉列表中选择一个贴图 (XMM) 文件，然后单击“获取贴图”。否则单击“编辑贴图”。
                  
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2316"></a>单击“编辑贴图”将打开<span class="char_link"><a href="GUID-231F0264-8DFE-40DF-9A9A-EF1A74B50211.htm">“贴图动画”对话框</a></span>，其中包含三个列表：按照从左到右的顺序分别为“当前”、“已映射”和“引入”。“当前”列表显示场景中选定的对象及其动画轨迹；“引入”列表显示 XAF 文件中的动画轨迹，而“映射”列表则显示对于“当前”列表中的每个轨迹，在“引入”列表中将映射到它的动画轨迹。在某些情况下，如对象同名，将自动映射一些轨迹，并且只要打开该对话框，这些轨迹就会出现在“映射”列中。已经映射的轨迹在“当前”列和“引入”列中以灰色显示。
                     
                  </p> 
               </li>
               <li>要手动映射一对轨迹，请在“当前”列表中单击一个轨迹，并在“引入”列表中单击另一个轨迹，然后单击“传入”列表左侧的左箭头 (&lt;-) 按钮。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2315"></a>从而在“映射”列表中放入传入轨迹的名称，与指定该名称的当前列表轨迹相反。 
                  </p> 
               </li>
               <li>要删除贴图指定，在“映射列表”中单击其条目，然后单击 -&gt; 按钮。 </li>
               <li>根据需要继续设置贴图指定。完成后，单击“保存贴图”或“将贴图另存为”，然后指定要保存的文件名。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2314"></a>保存贴图文件后，“加载运动”按钮处于可用状态，可以继续加载动画。 
                  </p> 
               </li>
               <li>单击“加载运动”。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2313"></a>将加载动画数据，并指定给选定对象，所有动画关键点都会出现在轨迹栏上。 
                  </p> 
               </li>
            </ol> <a name="WS1A9193826455F5FFBA679E112A6A19004-2C"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A19004-2B"></a>要重新定位传入动画，请执行以下操作：
            </p>
            <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2312"></a>这是上一个步骤的后续步骤，介绍了节点重定位的基本工作流程。<em class="mild">重定位</em> 就是缩放动画以使它与将运动映射其上的那个对象相匹配。如果需要在不同大小和比例的两个对象或装备之间传输动画，可以使用该功能。例如，一个猫伸展的动画可以重新定位到较大的狗模型，以使缩放的动画适合狗的骨骼。 
            </p>
            <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2311"></a>完成轨迹贴图指定之后，“重新定位”卷展栏上的“可重新定位节点”列表显示可用于重新定位的贴图。 
            </p>
            <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-2310"></a>有关介绍重定位角色装备的步骤信息，请参阅<span class="char_link"><a href="GUID-4D340DB3-E4FB-4B7D-A113-77F65A26B771.htm#WSF742DAB04106313339AEF003112A1CE9423-7FA4">将一个角色重定位到另一个角色</a></span>。 
            </p>
            <ol type="1" start="1">
               <li>首先，在“缩放原点”组中，选择要作为缩放原点和基础的“引入”对象和“当前”对象。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-230F"></a>例如，在重定位装备时，可以使用每个装备的根对象。 
                  </p> 
               </li>
               <li>接下来，在“导出链之间的缩放”组中，从“引入”模型和“当前”模型选择可比较的 IK 或 FK 链，以获得“比例因子”，该因子可以将传入动画成比例地重新定位到当前模型中。 </li>
               <li>单击“设置”可应用重定位。 </li>
               <li>如果模型的不同部分具有不同的比例，则可能需要对映射轨迹的不同选择部分重复步骤 2 和步骤 3。可能还需要使用“FK 重新定位范围”组来解决不同的比例。有关详细信息，请参见<span class="char_link"><a href="GUID-4D340DB3-E4FB-4B7D-A113-77F65A26B771.htm">“重新定位”卷展栏</a></span>。 
               </li>
               <li>完成后，保存您的贴图，以保留重新定位的数据，然后单击“加载运动”以将动画应用于当前选定的对象。 
                  <p><a name="WS73099CC142F4875514C01AC112A7ACEF16-230E"></a>重定位基本上是手动过程。您可能需要尝试不同的设置才能获得所需的效果。通过在“可重定位节点”列表中高亮显示映射的轨迹，然后单击“清除”，可以删除重定位结果。 
                  </p> 
               </li>
               <li>关闭“贴图动画”对话框。 </li>
            </ol> 
         </div>
         <div class="related-links">
            <h4 class="related">
               <p class="title"><a name="GUID-52FFD75E-107A-4BB3-B02E-FF0476ECD558"></a>相关信息
               </p>
            </h4>
            <ul>
               <li><span class="char_link"><a href="GUID-231F0264-8DFE-40DF-9A9A-EF1A74B50211.htm">“映射动画”对话框</a></span></li>
            </ul>
         </div><span class="noindex">
            <div class="topic-list">
               <h4 class="related">本节内容</h4>
               <ul class="jumplist">
                  <li class="topiclist-litem"><a href="GUID-AC1F9E33-DE2B-4B0D-9E3D-7E2C693D2CDC.htm">加载动画</a><p>“加载动画”允许您将 <span class="char_link"><a href="GUID-A6EB9AE5-66ED-4400-8252-5E012AFBBEA0.htm#WS1A9193826455F5FF662FFB1147077788D-7B6C">XAF（XML 动画文件）</a></span>中的动画加载到场景中的对象上。加载动画过程的一部分是映射动画，也就是指定场景中的哪些对象接收加载的动画轨迹。 
                     </p>
                  </li>
                  <li class="topiclist-litem"><a href="GUID-67D51421-2B09-4832-8E09-AC09EE6BBC43.htm">保存动画</a><p>“保存动画”能够使您将您的场景中的动画以<span class="char_link"><a href="GUID-A6EB9AE5-66ED-4400-8252-5E012AFBBEA0.htm#WS1A9193826455F5FF662FFB1147077788D-7B6C">“XML 动画文件 (XAF)”格式</a></span>存储到磁盘中。XAF 文件格式能够使您独立于实际场景，为任何数量的对象保存和加载动画。 
                     </p>
                  </li>
                  <li class="topiclist-litem"><a href="GUID-8581D6AC-2A21-4E8E-8134-6E9334DE8D97.htm">合并动画</a><p>“合并对象”将一个对象中的动画数据合并（传输）到另一个对象中去。可以将动画数据从一个场景传输到另一个场景，或在相同场景中的对象之间进行传输。来自几个对象的动画数据可以同时进行合并。 </p>
                  </li>
               </ul>
            </div></span><div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>