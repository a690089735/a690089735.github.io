<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-4FDB1222-EC26-482E-B06C-C4609D3A3A1E">
      <meta name="topic-type" content="concept">
      <title>将组转换为函数并检查明暗器代码</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-4FDB1222-EC26-482E-B06C-C4609D3A3A1E"></a><div class="head">
            <h1>将组转换为函数并检查明暗器代码</h1>
         </div><a name="OL_1721D22F1C344A5EA14BA8A7DB189216"></a><p class="list-intro"><a name="GUID-684EDA29-A57B-443D-98F8-3D830CA7C9F9"></a>创建新层组：
         </p>
         <ol type="1" start="1">
            <li>在组节点上单击 <img src="../images/GUID-69438F1B-0150-4DE6-8D60-08FEB0A339F0-low.png"> 以进入组视图。 
            </li>
            <li>选择“硬件明暗器节点”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“数学”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“添加”和“硬件明暗器节点”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“值”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“颜色”来分别创建“添加”节点和“颜色”节点。 
            </li>
            <li>按如下所示连接节点： <a name="UL_976ED686AD454ED2A238E7FB6567EF61"></a><ul>
                  <li>将“颜色”的“RGB”属性连接至“添加”的第一个“值”属性。 </li>
                  <li>将“相乘”的“结果”属性连接至“添加”的第二个“值”属性。 </li>
                  <li>将“添加”的“结果”属性连接至组节点的“漫反射颜色”属性。 </li>
               </ul> 
            </li>
            <li>选择新创建的“颜色”节点。在“特性”面板中，输入名称 <em class="strong">OffsetColor</em> 并将“UI 顺序”值更改为 <em class="strong">3</em>。 <a name="FIG_743433EFF80643A6B42DAEEDB29DCAF7"></a><div class="figure-anchor"><img src="../images/GUID-894B0C70-1324-45FB-BB01-DBE05801DD6C-low.png"></div>  
               <p><a name="GUID-AA57CDEC-76B1-4F8E-AD40-D02BD7ACCA91"></a>OffsetColor 现在显示在“材质编辑器”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“参数”卷展栏中。 
               </p> <a name="FIG_D5CD0DF7764D40C2BE91F75294401B21"></a><div class="figure-anchor"><img src="../images/GUID-0E6081AC-5084-4B5D-B7E5-10855749124F-low.png"><p></p>
                  <p class="figure-title">“参数”卷展栏上的 OffsetColor 属性</p>
               </div>  
            </li>
         </ol><a name="OL_F2F5A80B4ED545339A7B34716FEC52D9"></a><p class="list-intro"><a name="GUID-8C35E0E6-AE81-4038-A1F8-B6510AA5209B"></a>将组转换为一个函数：
         </p>
         <ol type="1" start="1">
            <li>选择“相乘”和“添加”节点，然后选择“组”菜单 <img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“创建组”。 
            </li>
            <li>在新创建的组上单击 <img src="../images/GUID-69438F1B-0150-4DE6-8D60-08FEB0A339F0-low.png">。在组视图中，选择组节点，然后在“特性”面板上，将“名称”字段中为 <em class="strong">MyColorFunction</em>。 
            </li>
            <li>也可以在“特性”面板上启用“组是函数”。使用此选项，这些节点的输出将作为一个函数封装在明暗器代码中。 </li>
            <li>为您的组节点端口指定唯一名称。当前，所有端口都被指定了“值”，因此明暗器是无效的。（如果您查看材质编辑器，“参数”卷展栏上将显示错误消息。） 
               <p><a name="GUID-C0C9AB30-B94B-4C25-B3B3-A3D64FD28C9E"></a>在“特性”面板中，进行以下更改： 
               </p> <a name="UL_EDE7F4FD62DC4174B85F609EE068B6FF"></a><ul>
                  <li>活动套接字：<em class="strong">0</em> 
                     <p><a name="GUID-2D38643B-181B-43EF-8282-8D64ABEE2FA8"></a>活动套接字标签：<em class="strong">ColorA</em> 
                     </p> 
                  </li>
                  <li>活动套接字：<em class="strong">1</em> 
                     <p><a name="GUID-B7E27FAE-17B7-4304-98B4-0A926A3C885A"></a>活动套接字标签：<em class="strong">Multiplier</em> 
                     </p> 
                  </li>
                  <li>活动套接字：<em class="strong">2</em> 
                     <p><a name="GUID-02F518A4-321A-4010-867B-498AB84E8A8B"></a>活动套接字标签：<em class="strong">ColorB</em> 
                     </p> 
                  </li>
               </ul> <a name="FIG_C94E49AAF8E14C2FA238DBCD7514323B"></a><div class="figure-anchor"><img src="../images/GUID-E30C4933-6D43-47A3-8B11-788FCAE6E4F9-low.png"></div>  
               <div><a name="GUID-34BA986E-3911-4358-A541-D73C1E28FE83"></a><div class="note-note"><span class="label label-target-language">注意:</span>在将组转变为函数时，所有组节点端口必须具有唯一的名称。否则，明暗器将变为无效。 
                  </div>
               </div> 
            </li>
            <li>退出组视图并选择“工具”菜单 <img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“计算图形”。 
               <p><a name="GUID-E81EF4CA-6B50-40DF-B191-F14DCCC2C11A"></a>现在，该明暗器再次有效了。 
               </p> 
               <p><a name="GUID-318C5C06-0F1E-422E-8027-13A187CDD23A"></a>在材质编辑器中，此明暗器的“参数”卷展栏将重新出现。 
               </p> 
            </li>
         </ol><a name="OL_57BC1A60C33543AD99FC25F1DE41CF39"></a><p class="list-intro"><a name="GUID-AA768677-BC04-4C58-BEC4-AB4B262CF4C0"></a>保存明暗器文件并检查明暗器代码
         </p>
         <ol type="1" start="1">
            <li>退出组视图。 </li>
            <li>选择“材质”节点。在“属性”面板的“硬件明暗器/文件名”字段中，输入明暗器文件的文件名，然后按 <span class="keyboardEntry">Enter</span> 键。 
            </li>
            <li>单击“硬件明暗器/保存到磁盘”。 
               <p><a name="GUID-7058DD03-5FC0-490D-B638-912ABFE6EAC6"></a>路径中的明暗器文件将保存为工具提示显示在底部的工作区域。 
               </p> 
               <div><a name="GUID-ED2DC5A0-2921-450E-8706-684AB8C5E27A"></a><div class="note-note"><span class="label label-target-language">注意:</span>ShaderFX 将组作为文件保存在文件夹 <em class="mild"> <span class="filePath">/users/&lt;用户名&gt;/my documents/3dsmax/shaderfx/shaders/</span> </em> 中 
                  </div>
               </div> 
               <p><a name="GUID-46940B5F-7161-4E88-B79E-F57E0247F324"></a>如果将明暗器保存为 FX 文件，您现在将 FX 明暗器作为 DirectX 明暗器来加载，而无需使用 ShaderFX。 
               </p> 
               <p><a name="GUID-74B893DC-2CF7-41D6-BF6C-EF530261488A"></a>您可以选择保存几种不同的明暗器格式：请参见<span class="char_link"><a href="GUID-B4328E92-C99C-4EC9-9751-8D74E12A57EC.htm">导出到 HLSL、CgFX 和 GLSL</a></span>。 
               </p> 
            </li>
         </ol><a name="OL_94BA3887EF7C4CA48C2BCF6FE107B5C3"></a><p class="list-intro"><a name="GUID-E0AB2546-E71B-48BA-B684-8F0A79CBC606"></a>检查明暗器代码，然后简化它：
         </p>
         <ol type="1" start="1">
            <li>使用文字编辑器来检查明暗器文件。搜索“MyColorFunction”。 
               <p><a name="GUID-D23FB584-76E5-4F89-9931-98AECD00B585"></a>MyColorFunction 在明暗器文件中被定义为函数。SHADERDATA 结构作为输入列出。这是默认设置。 
               </p> 
            </li>
            <li>若要针对清除器代码禁用此设置，则进入 MyColorFunction 组的组视图，选择组节点，然后在“特性”面板上启用“不添加数据结构作为函数输入”。 
               <p><a name="GUID-9FEB068D-76A3-4AB9-B6B6-C4F83DD8EB6A"></a>重新保存明暗器文件，可以看到 SHADERDATA 结构将不再作为输入参数列出。 
               </p> 
            </li>
         </ol>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>