<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-22922455-CE7B-4B73-8D19-604E1F3B29C0">
      <meta name="description" content="通过“粒子”子操作符可以为每个粒子导出特定属性。通常，对于某粒子附近的粒子，导出在该粒子周围的球形体积或特定视野内与该粒子最近的粒子的索引等属性。可以明确设置体积或视野，或者从其他子操作符中输入。">
      <meta name="topic-type" content="concept">
      <title>“粒子”子操作符</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-22922455-CE7B-4B73-8D19-604E1F3B29C0"></a><div class="head">
            <h1>“粒子”子操作符</h1>
         </div>
         <p class="blurb">通过“粒子”子操作符可以为每个粒子导出特定属性。通常，对于某粒子附近的粒子，导出在该粒子周围的球形体积或特定视野内与该粒子最近的粒子的索引等属性。可以明确设置体积或视野，或者从其他子操作符中输入。 </p>
         <div class="bodyReference"><a name="UL_0C4BE0DB0CED4225AD089B88387987F2"></a><ul>
               <li> <span class="MenuCascade" id="GUID-4039F38D-DD0F-4D34-BD4D-58C136D75BEF">“粒子视图” <img src="../images/ac.menuaro.gif"> “数据图标/操作符/图标测试/测试” <img src="../images/ac.menuaro.gif">  单击“编辑数据流”。 <img src="../images/ac.menuaro.gif"> 添加或选择“粒子”。</span> 
               </li>
            </ul>
            <p><a name="GUID-FFFE869F-AAD9-4FDC-BE33-A41135D2CF90"></a>子操作符可以处理整个流或其他粒子流中的粒子（称为代理粒子）。 
            </p>
            <div class="section"><a name="AB1010754"></a> 
               <h2><a name="GUID-662E3E22-09FD-4618-BC92-12A623E2E5A2"></a>界面
               </h2> <a name="FIG_3AB1775DBF2F44169A4B3C4745612DC0"></a><div class="figure-anchor"><img src="../images/GUID-2F97E577-4C19-4743-AB14-2656B779E630-low.png"></div>  <a name="GUID-8EC64C0F-A056-422B-AEA2-74867FC3C50D"></a><dl>
                  <dt><a name="GUID-2569E89B-E729-4B5C-978D-AA5EEBB03D4F"></a><span class="term"><a name="GUID-4C01965E-4226-420C-932F-D3701545F2EE"></a>输出类型</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-DDA7BFDB-5E8A-44CD-A0F3-37954BA0CC06"></a>此只读字段显示“聚合属性”下拉列表中活动项的数据类型。每个属性的数据类型都显示在下面的描述中。 
                     </div>
                  </dd>
               </dl>
               <div class="dl_section"><a name="GUID-0C3E18E6-ED95-45D8-8E0A-833B83BC2DC4"></a><p class="title"><a name="GUID-BC44D695-8922-4654-AEF6-695657024087"></a>“聚合属性”组
                  </p>
                  <dl>
                     <dt><a name="GUID-A8D6AB5D-CD21-41E7-AF5B-D5E59E6DC61E"></a><span class="term"><a name="GUID-BE016BAB-2B98-4910-ACC7-6920D0F65A8E"></a>聚合属性</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-2950BDD5-EE09-4E05-B48B-CC5219EC3BB7"></a>选择要从粒子中聚合的属性： <a name="UL_09D537A9D90649699C6793CA81DEC0EF"></a><ul>
                              <li><em class="strong">最近粒子距离</em>在周围球体中与最近粒子之间的距离。数据类型为实数。 
                              </li>
                              <li><em class="strong">最近粒子索引</em>周围球体中最近粒子的 ID 号。数据类型为整数。 
                              </li>
                              <li><em class="strong">最近粒子位置</em>周围球体中最近粒子在世界坐标中的位置。数据类型为向量。 
                              </li>
                              <li><em class="strong">密度</em>周围球体中粒子的密度（以每立方粒子数为单位测量）。数据类型为实数。 
                              </li>
                              <li><em class="strong">密度渐变</em>周围球体中粒子密度发生最大更改的方向。输出向量的长度指示密度发生更改的斜率或速度。数据类型为向量。 
                              </li>
                              <li><em class="strong">相邻点数</em>周围球体中粒子的数目。数据类型为整数或实数。 
                              </li>
                              <li><em class="strong">粒子数</em>当前事件或代理粒子系统中粒子的数目。数据类型为整数。 
                                 <p><a name="GUID-924E91D5-0F68-4405-B844-6E9CC75BFABC"></a>使用此选项将使大多数的其他粒子控件不可用。 
                                 </p> 
                              </li>
                              <li><em class="strong">平均自定义数据</em>周围球体中粒子的自定义数据通道的平均值。使用“平均数据通道”按钮指定自定义通道（如下所述）。数据类型只能为可求平均数的类型：实数和向量。如果要使用不同的数据类型查询平均数据，则首先必须将其转换为实数或向量。 
                              </li>
                              <li><em class="strong">平均速度</em>周围球体中粒子的平均速度。数据类型为向量。 
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt><a name="GUID-A9812452-1D5E-4BA9-B9A4-EFF23CCFF729"></a><span class="term"><a name="GUID-21A93A64-E45B-436E-819E-456FEC593B3D"></a>最近似搜索</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-B96E93A0-46DE-4821-B359-81ED52BB3365"></a>启用时，可加快聚合，但会降低精度。仅可与“最近粒子距离”、“最近粒子索引”和“最近粒子位置”一起使用。使用大量粒子时启用该选项。默认设置为禁用。 
                        </div>
                     </dd>
                     <dt><a name="GUID-15769A80-CEB2-4857-B068-29CE2F24515E"></a><span class="term"><a name="GUID-8A232E71-FEB3-4770-8AF5-8A01BEA7A75B"></a>使用 O1 作为代理粒子</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-CF7FC24C-6619-452C-BC36-4A7A63A569BD"></a>启用时，可将对象数据输入添加到“粒子”子操作符。可以将“选择对象”子操作符中的粒子流与此输入相连接。代理粒子可用于属性聚合。默认设置为启用。 
                        </div>
                     </dd>
                     <dt><a name="GUID-0A6AB8E6-C918-4AAE-8404-4866472D7C26"></a><span class="term"><a name="GUID-05A11488-7F2A-4F42-A17F-B06B1A2196CC"></a>对代理使用过滤</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-3AFCBC9C-AA32-4B24-A670-4A3516CA86A6"></a>用于从不同的操作符中输入布尔数据通道来用作过滤器。例如，您可以使用该选项限制单个事件中的粒子。使用“过滤数据通道”按钮指定过滤通道。仅当“使用 O1 作为代理粒子”处于启用状态时可用。 
                        </div>
                     </dd>
                     <dt><a name="GUID-2A27A589-7966-49EC-B18D-C47A7D8F5C07"></a><span class="term"><a name="GUID-5C863F5E-51F5-4E75-8FD2-788B55256915"></a>应用双过滤</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-0A0CB774-387C-47C4-9016-34133464A13D"></a>禁用时，对过滤后的粒子（相对于当前流中的所有粒子）执行聚合。启用时，对过滤后的粒子（仅相对于过滤后的粒子）执行聚合。仅当“使用 O1 作为代理粒子”处于禁用状态时可用。 
                        </div>
                     </dd>
                     <dt><a name="GUID-3FD7A36C-0C79-443E-B495-791D06091BCE"></a><span class="term"><a name="GUID-78AD0853-0540-496B-B2F2-ABF68991DC39"></a>过滤数据通道</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-8AD702CF-9063-45C6-BDC1-8990739751D9"></a>用于指定用来过滤代理粒子的数据通道。仅当“对代理使用过滤”处于活动状态时可用。
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="dl_section"><a name="GUID-68DCC471-AC76-410D-92D0-8F6EA9A9ABA1"></a><p class="title"><a name="GUID-1CE42E49-C5AE-4545-B680-0F2D1E84BA4D"></a>“邻近半径和视野”组
                  </p>
                  <dl>
                     <dt><a name="GUID-139DE605-6475-4F17-AB1F-06084BEC1A7F"></a><span class="term"><a name="GUID-A90452C7-0B6B-43C9-B82F-F31CBF439B6D"></a>外部</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-014CBCEA-FFD0-48CE-B115-5B2BFEFB527A"></a>与粒子之间的最大距离，在此范围内粒子被视为进行聚合。除非也使用“核心”（请参见下文），否则该体积的权重始终不变。
                        </div>
                     </dd>
                     <dt><a name="GUID-903BC0DB-51E4-4BD8-B3BE-5841D6B940CC"></a><span class="term"><a name="GUID-A9BDEFF7-6931-49A4-BDCF-8DD3C902CB2E"></a>R2</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-E215B548-8650-4EC4-8212-396CD7DE7C55"></a>启用时，可以通过将输出实数格式数据的子操作符与“粒子”子操作符的 #2 输入关联，指定“外半径”值。 
                        </div>
                     </dd>
                     <dt><a name="GUID-F7C6F321-30D7-4D67-82BB-31AF91594CBC"></a><span class="term"><a name="GUID-548B8144-47C0-478F-900A-1B87D24C358E"></a>核心</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-E2EBB665-E5FB-4C7F-ABC7-66582317C127"></a>启用时，此半径内的粒子可获得更高的优先级。在核心半径内，所有粒子的权重为 1.0 (100%)。在核心半径外，权重呈线性下降，在外半径达到 0.0。为了获得最佳结果，此值应小于“外半径”的值。仅可与“密度”、“相邻点数”和“平均自定义值/速度”属性一起使用。
                        </div>
                     </dd>
                     <dt><a name="GUID-39D57861-54DB-4C4A-A214-9122C8DC1337"></a><span class="term"><a name="GUID-E4B0E732-B8B3-4276-A651-369BFDC59089"></a>R3</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-DABB9E10-BF94-4967-9E4C-DA41E0881D5A"></a>启用时，可以通过将输出实数格式数据的子操作符与“粒子”子操作符的 #3 输入关联，指定“核心半径”值。 
                        </div>
                     </dd>
                     <dt><a name="GUID-5C5E3588-58BE-4FA7-96CE-639EAAB3B9BC"></a><span class="term"><a name="GUID-FDA18A62-EF3E-451A-9755-F97BAC35D2D3"></a>视野</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-14763D0F-EDAF-42ED-95EF-3B0A194D824A"></a>用于将聚合限于圆锥体体积内的粒子（默认情况下，圆锥体尖端位于所处理粒子的位置）。默认情况下，该值为 360.0，指定将聚合球形体积内的所有粒子。若要仅在半球内聚合粒子，请将此值设置为 180.0。如果是四分之一球体，则设置为 90.0（依此类推）。使用视野轴参数（请参见下文）设置视野的方向。
                        </div>
                     </dd>
                     <dt><a name="GUID-C49EBACC-0F30-4328-831A-0ABB7315173B"></a><span class="term"><a name="GUID-679FF263-53B4-44FE-BD9E-A280F8431945"></a>R4</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-1B5126E7-FFD9-4139-97B5-E7A1E93D7602"></a>用于通过将输出实数格式数据的子操作符与“粒子”子操作符的 #4 输入关联，指定“视野”值。 
                        </div>
                     </dd>
                     <dt><a name="GUID-7AD50D84-4AB9-4DA6-9D19-21997FD307A2"></a><span class="term"><a name="GUID-68D0B694-1D8C-48A2-890E-B0BDBE30E7B0"></a>使用速度作为视野轴</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-AD76544A-0569-4F6D-94F2-FCC1AF8B2FCC"></a>将视野的方向设置为粒子移动的方向（“前方”）。 
                        </div>
                     </dd>
                     <dt><a name="GUID-6C208B75-0395-4E11-8F72-8468F6AEA709"></a><span class="term"><a name="GUID-78E122EB-380D-4B48-A2B6-044CD4372C52"></a>使用 V5 作为视野轴</span></dt>
                     <dd>
                        <div class="definition"><a name="GUID-2E613F9D-DE60-418A-B847-1F8EBC6D97A5"></a>该选项可以通过将输出向量格式数据的子操作符与“粒子”子操作符的 #5 输入关联，指定视野的方向。例如，回顾上述内容，使用“输入标准”子操作符将“速度”设置为“向量”，然后通过对“函数”子操作符进行以下设置（“类型”为“向量”，“前因子”或“后因子”为
                           -1.0，“使用第二个运算对象”为禁用）对其进行馈送。
                        </div>
                     </dd>
                  </dl>
               </div>
               <dl>
                  <dt><a name="GUID-43480C1C-BCAC-4FD3-8946-1F93870A15A4"></a><span class="term"><a name="GUID-67B21427-4812-4D4B-8FE3-F6500FC57460"></a>使用 V6 作为位置</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-87AE97CF-F9A3-4B54-936C-FD994F793320"></a>默认情况下，视野的原点是所处理粒子的位置。此选项可以使您通过将输出向量格式数据的子操作符与“粒子”子操作符的 #6 输入关联，指定不同位置的值，从而可以为除了当前粒子位置外的一个点查找聚合属性。
                     </div>
                  </dd>
                  <dt><a name="GUID-73BB7EDE-530F-48AE-B01F-C14F1C7C6217"></a><span class="term"><a name="GUID-C8491288-A9C4-4DF7-A891-CB767C77CD2D"></a>使用自定义粒子权重</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-AD16775F-EDD7-4549-B390-4BF38E1CA9A9"></a>如果需要除了由“接近度/核心半径”设置定义的权重值之外的权重值，请使用此选项。仅可用于以下“聚合属性”选项：“密度”、“密度渐变”、“相邻点数”、“平均自定义数据”和“平均速度”。 
                        <p><a name="GUID-585AD38E-70D7-411E-AFA6-24D5C296F669"></a>例如，“密度”选项仅说明粒子的数目。比如说，您在系统中有大小不同的粒子并要计算密度（考虑粒子质量而不只是数量）。创建其他通道，按粒子大小的立方计算质量，并将其用作权重数据通道。 
                        </p>
                     </div>
                  </dd>
                  <dt><a name="GUID-D85812C9-F7E9-4E56-A190-C45488DC8B26"></a><span class="term"><a name="GUID-96974CA0-7BCA-41B2-9BD8-1B976F23D7F5"></a>权重数据通道</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-A7F0977E-2D97-4F47-AA79-6D55CC8B183F"></a>通过该选项可以指定数据通道，以便定义自定义粒子权重。仅当“使用自定义粒子权重”处于活动状态时可用。
                     </div>
                  </dd>
                  <dt><a name="GUID-BA9D13D3-2ADA-483F-86BD-F67A18511105"></a><span class="term"><a name="GUID-1C335845-32D5-4E60-911D-F9986DDDA490"></a>平均数据通道</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-1A3AF6E7-A06D-4E45-9358-C43DF76AA30D"></a>通过该选项可以指定数据通道，以便定义聚合的自定义数据。仅当“聚合属性”设置为“平均自定义数据”时可用。
                     </div>
                  </dd>
                  <dt><a name="GUID-1D374CCA-40A2-4874-AA9D-06D23B3720C4"></a><span class="term"><a name="GUID-8F3F70F3-517A-40C0-BEEA-64EBB46E3CE6"></a>搜索优化</span></dt>
                  <dd>
                     <div class="definition"><a name="GUID-E8197667-F88D-406D-A04F-A0BE2FBBA7AD"></a> 加快聚合，但占用内存。使用大量粒子时启用该选项。使用少量粒子时禁用该选项，以节省内存。默认设置为启用。
                     </div>
                  </dd>
               </dl> 
            </div>
         </div>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>