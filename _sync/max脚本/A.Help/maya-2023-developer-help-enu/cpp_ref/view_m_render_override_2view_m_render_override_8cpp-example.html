<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
      <title>C++ API Reference: viewMRenderOverride/viewMRenderOverride.cpp</title>
      
	  
      
      
      
      
      
      
      
    

</head>
   <body height="100%"><div class="body_content" id="body-content"><link rel="stylesheet" type="text/css" href="cpp_ref/navtree.css"><link rel="stylesheet" type="text/css" href="cpp_ref/doxygen.css"><link rel="stylesheet" type="text/css" href="cpp_ref/tabs.css"><link rel="stylesheet" type="text/css" href="style/adsk.cpm.css"><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('view_m_render_override_2view_m_render_override_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script>
      <div>
         <div class="head">
            <h1>C++ API Reference: viewMRenderOverride/viewMRenderOverride.cpp</h1>
         </div>

<div id="top"><!-- do not remove this div, it is closed by doxygen! -->

<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->

  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="#!/url=./cpp_ref/index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="#!/url=./cpp_ref/pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="#!/url=./cpp_ref/modules.html"><span>Modules</span></a></li>
      <li><a href="#!/url=./cpp_ref/namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="#!/url=./cpp_ref/annotated.html"><span>Classes</span></a></li>
      <li><a href="#!/url=./cpp_ref/examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="cpp_ref/search/mag_sel.png" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" alt="">
          <input type="text" id="MSearchField" value="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="cpp_ref/search/close.png" alt=""></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
</div>

<div id="doc-content">
<!-- window showing the filter options -->


<!-- iframe showing the search results (closed by default) -->


<div class="header">
  <div class="headertitle">
<div class="title">viewMRenderOverride/viewMRenderOverride.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">// Copyright 2015 Autodesk, Inc.  All rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use of this software is subject to the terms of the Autodesk license agreement</span></div>
<div class="line"><span class="comment">// provided at the time of installation or download, or which otherwise</span></div>
<div class="line"><span class="comment">// accompanies this software in either electronic or hard copy form.</span></div>
<div class="line"><span class="comment">//+</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MViewport2Renderer.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MShaderManager.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnPlugin.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MSelectionList.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnSet.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPxCommand.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MSyntax.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MArgDatabase.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MArgList.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MGlobal.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> std::unique_ptr&lt;MHWRender::MRenderOverride&gt; gsRenderOverride;</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    The following is an example plug-in which shows the various options available for</span></div>
<div class="line"><span class="comment">    the operations in an MRenderOverride (render override) for VP2.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    The render override will appear as an available renderer under the &quot;Renderer&quot; menu</span></div>
<div class="line"><span class="comment">    for 3d viewports. When chosen the renderer will be activated and will use it&#39;s default</span></div>
<div class="line"><span class="comment">    options.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    The viewMRenderOverride MEL command can be used to modify the options for the renderer.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    For code clarity, error status checking is minimal.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Custom scene operation. Currrent options which are shown:</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    1) Object set filterting:  Use a set name to filter which objects will be drawn with the operation.</span></div>
<div class="line"><span class="comment">    2) Clear mask setting: Set the clear parameters for the operation. By default both the color and depth are cleared.</span></div>
<div class="line"><span class="comment">    3) Scene element filtering : Set which types of objects to draw based on the MSceneFilterOption value. (e.g.</span></div>
<div class="line"><span class="comment">        setting to draw opaque objects only).</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">class </span>MSceneRenderTester : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html">MHWRender::MSceneRender</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    MSceneRenderTester( <span class="keyword">const</span> <a name="_a1"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; name ) </div>
<div class="line">    : <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html">MHWRender::MSceneRender</a>( name )</div>
<div class="line">    , mClearMask( (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a name="a2"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html#a55b92d9e088b6065ff2e762739b064f9aa9836daa6e01048fcf03e7023c0654d2">MHWRender::MClearOperation::kClearAll</a> )</div>
<div class="line">    , mShaderInstance( NULL )</div>
<div class="line">    , mSceneFilterOperation( MHWRender::MSceneRender::kNoSceneFilterOverride )</div>
<div class="line">    , mSceneUIDrawables(<span class="keyword">false</span>)</div>
<div class="line">    , mOverrideViewRectangle(<span class="keyword">false</span>)</div>
<div class="line">    , mDebugTrace(<span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">        Object set to draw. Returning NULL indicates we are not using an set override.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a3"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a>* <a name="a4"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a138c3fea5fc4e4371e11809ceb4cb30c">objectSetOverride</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="comment">// If not name set then don&#39;t return an override</span></div>
<div class="line">        <span class="keywordflow">if</span> (mSetName.length())</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> list; </div>
<div class="line">            list.<a name="a5"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a23929aeafb29672f2652128eac9c4dec">add</a>( mSetName );</div>
<div class="line">            </div>
<div class="line">            <a name="_a6"></a><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> obj; </div>
<div class="line">            list.<a name="a7"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a72d8cd9c78fd234dcf68cd2fb70bc432">getDependNode</a>( 0, obj );</div>
<div class="line">            </div>
<div class="line">            <a name="_a8"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_set.html">MFnSet</a> set( obj ); </div>
<div class="line">            set.<a name="a9"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_set.html#a4816acf44a8c21134cbe3d92a3f60925">getMembers</a>( mFilterSet, <span class="keyword">true</span> );</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> (mFilterSet.length())</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">                    printf(<span class="stringliteral">&quot; %s : Enable set filter = %s\n&quot;</span>, mName.asChar(), mSetName.asChar() );</div>
<div class="line">                <span class="keywordflow">return</span> &amp;mFilterSet;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> NULL;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">        Clear operation control. Will attempt to use the existing values</span></div>
<div class="line"><span class="comment">        found in the renderer for background color.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <a name="_a10"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html">MHWRender::MClearOperation</a> &amp; <a name="a11"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a5097b7718f03890d556dccc30e5fbf74">clearOperation</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <a name="_a12"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a name="a13"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">        <span class="keywordtype">bool</span> gradient = renderer-&gt;<a name="a14"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a0a37f5441ac2ecc2683c434a77e93234">useGradient</a>();</div>
<div class="line">        <a name="_a15"></a><a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a> color1 = renderer-&gt;<a name="a16"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a1f60fa4b3321b445538ed712fa85f493">clearColor</a>();</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a> color2 = renderer-&gt;<a name="a17"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#acd95ff3a7742eccf81c361a2a57761f8">clearColor2</a>();</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">float</span> c1[4] = { color1[0], color1[1], color1[2], 1.0f };</div>
<div class="line">        <span class="keywordtype">float</span> c2[4] = { color2[0], color2[1], color2[2], 1.0f };</div>
<div class="line"></div>
<div class="line">        mClearOperation.setClearColor( c1 );</div>
<div class="line">        mClearOperation.setClearGradient( gradient);</div>
<div class="line">        mClearOperation.setClearColor2( c2 );</div>
<div class="line">        mClearOperation.setMask( mClearMask );</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a18"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a6aec65d0f813d123fe1610fb992a8963">mClearOperation</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">        Scene element filter. Seem MSceneRender::MSceneFilterOption for description</span></div>
<div class="line"><span class="comment">        of available options.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471">MHWRender::MSceneRender::MSceneFilterOption</a> <a name="a19"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a0ca5f95e9a9fcb87a126f916597d1e54">renderFilterOverride</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (mSceneFilterOperation != MHWRender::MSceneRender::kNoSceneFilterOverride &amp;&amp;</div>
<div class="line">                mSceneFilterOperation != <a name="a20"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471ac1f25b9bcfb077f735a6dff88f41883c">MHWRender::MSceneRender::kRenderAllItems</a>)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot; %s : Set scene filter = %d\n&quot;</span>, mName.asChar(), mSceneFilterOperation);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> mSceneFilterOperation;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* </span></div>
<div class="line"><span class="comment">        Shader override used for objects which are surfaces.</span></div>
<div class="line"><span class="comment">        Returning NULL will indicate to not use a shader override.</span></div>
<div class="line"><span class="comment">    */</span> </div>
<div class="line">    <span class="keyword">const</span> <a name="_a21"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a>* <a name="a22"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#abaaea083c107e41fa2ec5ef26a372e84">shaderOverride</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace &amp;&amp; mShaderInstance)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : Enable shader override\n&quot;</span>, mName.asChar() );</div>
<div class="line">        <span class="keywordflow">return</span> mShaderInstance;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> <a name="a23"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a1b9feb23a28bf2cd7cbeb6c5c15e25e0">preRender</a>()<span class="keyword"> override </span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : preRender callback\n&quot;</span>, mName.asChar());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> <a name="a24"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#afb934d885b67aaf2e830c2ae37a95973">postRender</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : postRender callback\n&quot;</span>, mName.asChar());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> <a name="a25"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#ad15ab1a015ce24728b96c4580f66521c">preSceneRender</a>(<span class="keyword">const</span> <a name="_a26"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a> &amp; context)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : preScene callback\n&quot;</span>, mName.asChar());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> <a name="a27"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a35198ec596b08ec1d753fc888afd9e0a">postSceneRender</a>(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a> &amp; context)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : postScene callback\n&quot;</span>, mName.asChar());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a28"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a05c70618c28196399681a784a3686b50">hasUIDrawables</a>()<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> mSceneUIDrawables;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> <a name="a29"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#ab9e473c233f6bb30f2e659592ca9d16b">addPreUIDrawables</a>( <a name="_a30"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager, <span class="keyword">const</span> <a name="_a31"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext )<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : add pre-UI drawables\n&quot;</span>, mName.asChar());</div>
<div class="line"></div>
<div class="line">        drawManager.<a name="a32"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line"></div>
<div class="line">        drawManager.<a name="a33"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.1f, 0.5f, 0.95f ) );</div>
<div class="line">        drawManager.<a name="a34"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( <a name="a35"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a88cff078229df1c0803a690e4826b5f1a7218bb69173cb216cb619effff1055ea">MHWRender::MUIDrawManager::kSmallFontSize</a> );</div>
<div class="line">        drawManager.<a name="a36"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a name="_a37"></a><a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;Pre UI draw test in scene operation&quot;</span>), <a name="a38"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#aa56f1a82069b5feeadbb4591cb3e474fa28e0f004d9fc43a042d60286f37b6889">MHWRender::MUIDrawManager::kRight</a> );</div>
<div class="line">        drawManager.<a name="a39"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#abe48ac82aa2ede6d0efd3c9cfadb068c">line</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 0, -2 ), <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 1.0f, 1.0f, 1.0f ) );</div>
<div class="line">        drawManager.<a name="a40"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ), 0.8, <span class="keyword">false</span> );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.1f, 0.5f, 0.95f, 0.4f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ), 0.8, <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">        drawManager.<a name="a41"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> <a name="a42"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a286e2e17b366a22d510056c1aefbfa91">addPostUIDrawables</a>( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext )<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s : add post-UI drawables\n&quot;</span>, mName.asChar());</div>
<div class="line"></div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line"></div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.05f, 0.95f, 0.34f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a88cff078229df1c0803a690e4826b5f1a7218bb69173cb216cb619effff1055ea">MHWRender::MUIDrawManager::kSmallFontSize</a> );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;Post UI draw test in scene operation&quot;</span>), <a name="a43"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#aa56f1a82069b5feeadbb4591cb3e474faa9953673f54fd9f854de23739ebe2f7a">MHWRender::MUIDrawManager::kLeft</a> );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#abe48ac82aa2ede6d0efd3c9cfadb068c">line</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 0, 2), <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 1.0f, 1.0f, 1.0f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ), 0.8, <span class="keyword">false</span> );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.05f, 0.95f, 0.34f, 0.4f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ), 0.8, <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <a name="_a44"></a><a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> *<a name="a45"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_operation.html#a81e0450eebf8c3882754248f39af0062">viewportRectangleOverride</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mOverrideViewRectangle)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s : override viewport rectangle\n&quot;</span>, mName.asChar()); </div>
<div class="line"></div>
<div class="line">            <span class="comment">// 1/4 to the right and 1/4 up. 3/4 of the target size.</span></div>
<div class="line">            mViewRectangle[0] = 0.25f;</div>
<div class="line">            mViewRectangle[1] = 0.25f;</div>
<div class="line">            mViewRectangle[2] = 0.75f;</div>
<div class="line">            mViewRectangle[3] = 0.75f;</div>
<div class="line">            <span class="keywordflow">return</span> &amp;mViewRectangle;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Options</span></div>
<div class="line">    <span class="keywordtype">void</span> setClearMask( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> val )</div>
<div class="line">    {</div>
<div class="line">        mClearMask = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setObjectSetOverride( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp; val )</div>
<div class="line">    {</div>
<div class="line">        mSetName = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setRenderFilterOverride(<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471">MHWRender::MSceneRender::MSceneFilterOption</a> val)</div>
<div class="line">    {</div>
<div class="line">        mSceneFilterOperation = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setShaderOverride(<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a>* val)</div>
<div class="line">    {</div>
<div class="line">        mShaderInstance = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setSceneUIDrawables(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mSceneUIDrawables = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setOverrideViewRectangle(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mOverrideViewRectangle = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setDebugTrace( <span class="keywordtype">bool</span> val )</div>
<div class="line">    {</div>
<div class="line">        mDebugTrace = val;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mClearMask;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> mSetName;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> mFilterSet;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471">MHWRender::MSceneRender::MSceneFilterOption</a> mSceneFilterOperation;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a>* mShaderInstance;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> mViewRectangle;</div>
<div class="line">    <span class="keywordtype">bool</span> mSceneUIDrawables;</div>
<div class="line">    <span class="keywordtype">bool</span> mOverrideViewRectangle;</div>
<div class="line">    <span class="keywordtype">bool</span> mDebugTrace;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Class for testing user render operation options</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">class </span>MUserRenderOperationTester : <span class="keyword">public</span> <a name="_a46"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_user_render_operation.html">MHWRender::MUserRenderOperation</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    MUserRenderOperationTester(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line">    : <a class="code" href="#!/url=./cpp_ref/namespace_m_h_w_render.html">MHWRender</a>::MUserRenderOperation(name)</div>
<div class="line">    , mUserUIDrawables(false)</div>
<div class="line">    , mUserUILightData(false)</div>
<div class="line">    , mOverrideViewRectangle(false)</div>
<div class="line">    , mDebugTrace(false)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a name="_a47"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> <a name="a48"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_user_render_operation.html#a15b66dca635fff26069c7b5bbbb1868b">execute</a>(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a> &amp; drawContext )<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot;%s : call execute\n&quot;</span>, mName.asChar());</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a name="a49"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a50"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_user_render_operation.html#a05c70618c28196399681a784a3686b50">hasUIDrawables</a>()<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> mUserUIDrawables;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> <a name="a51"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_user_render_operation.html#a51c18131d1daa15aa761a09d622d9061">addUIDrawables</a>( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext )<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot;%s : add ui drawables\n&quot;</span>, mName.asChar()); </div>
<div class="line"></div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line"></div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.95f, 0.5f, 0.1f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a88cff078229df1c0803a690e4826b5f1a7218bb69173cb216cb619effff1055ea">MHWRender::MUIDrawManager::kSmallFontSize</a> );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 0, 2, 0 ), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;UI draw test in user operation&quot;</span>) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#abe48ac82aa2ede6d0efd3c9cfadb068c">line</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 0, 0, 0), <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 0, 2, 0 ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 1.0f, 1.0f, 1.0f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 0, 2, 0 ), 0.8, <span class="keyword">false</span> );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.95f, 0.5f, 0.1f, 0.4f ) );</div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 0, 2, 0 ), 0.8, <span class="keyword">true</span> );</div>
<div class="line"></div>
<div class="line">        drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> *<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_operation.html#a81e0450eebf8c3882754248f39af0062">viewportRectangleOverride</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mOverrideViewRectangle)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s : override viewport rectangle\n&quot;</span>, mName.asChar()); </div>
<div class="line"></div>
<div class="line">            <span class="comment">// 1/4 to the right and 1/4 up. 3/4 of the target size.</span></div>
<div class="line">            mViewRectangle[0] = 0.25f;</div>
<div class="line">            mViewRectangle[1] = 0.25f;</div>
<div class="line">            mViewRectangle[2] = 0.75f;</div>
<div class="line">            mViewRectangle[3] = 0.75f;</div>
<div class="line">            <span class="keywordflow">return</span> &amp;mViewRectangle;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a52"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_user_render_operation.html#a3f130aa677f7fc44a7c8c26b8452a276">requiresLightData</a>()<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> mUserUILightData;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Options</span></div>
<div class="line">    <span class="keywordtype">void</span> setUserUIDrawables(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mUserUIDrawables = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setUserUILightData(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mUserUILightData = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setOverrideViewRectangle(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mOverrideViewRectangle = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setDebugTrace( <span class="keywordtype">bool</span> val )</div>
<div class="line">    {</div>
<div class="line">        mDebugTrace = val;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">bool</span> mUserUIDrawables;</div>
<div class="line">    <span class="keywordtype">bool</span> mUserUILightData;</div>
<div class="line">    <span class="keywordtype">bool</span> mOverrideViewRectangle;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> mViewRectangle;</div>
<div class="line">    <span class="keywordtype">bool</span> mDebugTrace;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Class for testing HUD operation options</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">class </span>MHUDRenderTester : <span class="keyword">public</span> <a name="_a53"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_h_u_d_render.html">MHWRender::MHUDRender</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    MHUDRenderTester(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line">    : <a class="code" href="#!/url=./cpp_ref/namespace_m_h_w_render.html">MHWRender</a>::MHUDRender()</div>
<div class="line">    , mUserUIDrawables(false)</div>
<div class="line">    , mOverrideViewRectangle(false)</div>
<div class="line">    , mDebugTrace(false)</div>
<div class="line">    , mName(name)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a54"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_h_u_d_render.html#a05c70618c28196399681a784a3686b50">hasUIDrawables</a>()<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> mUserUIDrawables;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> <a name="a55"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_h_u_d_render.html#a513fab0918022677d2501413c290097a">addUIDrawables</a>( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager2D, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext )<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mUserUIDrawables)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s : add ui drawables\n&quot;</span>, mName.asChar()); </div>
<div class="line"></div>
<div class="line">            <span class="comment">// Start draw UI</span></div>
<div class="line">            drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line">            <span class="comment">// Set font color</span></div>
<div class="line">            drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.455f, 0.212f, 0.596f ) );</div>
<div class="line">            <span class="comment">// Set font size</span></div>
<div class="line">            drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a88cff078229df1c0803a690e4826b5f1a7218bb69173cb216cb619effff1055ea">MHWRender::MUIDrawManager::kSmallFontSize</a> );</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Draw renderer name</span></div>
<div class="line">            <span class="keywordtype">int</span> x=0, y=0, w=0, h=0;</div>
<div class="line">            frameContext.<a name="a56"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html#a7cd3b2dca6e4f8f4641b587bc642b08e">getViewportDimensions</a>( x, y, w, h );</div>
<div class="line">            drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(w*0.5f, h*0.91f), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;Renderer Override Options Tester&quot;</span>), <a name="a57"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#aa56f1a82069b5feeadbb4591cb3e474fae006401ce2987367501dd62b12f1396d">MHWRender::MUIDrawManager::kCenter</a> );</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Draw viewport information</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> viewportInfoText( <span class="stringliteral">&quot;Viewport information: x= &quot;</span> );</div>
<div class="line">            viewportInfoText += x;</div>
<div class="line">            viewportInfoText += <span class="stringliteral">&quot;, y= &quot;</span>;</div>
<div class="line">            viewportInfoText += y;</div>
<div class="line">            viewportInfoText += <span class="stringliteral">&quot;, w= &quot;</span>;</div>
<div class="line">            viewportInfoText += w;</div>
<div class="line">            viewportInfoText += <span class="stringliteral">&quot;, h= &quot;</span>;</div>
<div class="line">            viewportInfoText += h;</div>
<div class="line">            drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(w*0.5f, h*0.885f), viewportInfoText, <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#aa56f1a82069b5feeadbb4591cb3e474fae006401ce2987367501dd62b12f1396d">MHWRender::MUIDrawManager::kCenter</a> );</div>
<div class="line"></div>
<div class="line">            <span class="comment">// End draw UI</span></div>
<div class="line">            drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> *<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_operation.html#a81e0450eebf8c3882754248f39af0062">viewportRectangleOverride</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mOverrideViewRectangle)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s : override viewport rectangle\n&quot;</span>, mName.asChar()); </div>
<div class="line"></div>
<div class="line">            <span class="comment">// 1/4 to the right and 1/4 up. 3/4 of the target size.</span></div>
<div class="line">            mViewRectangle[0] = 0.25f;</div>
<div class="line">            mViewRectangle[1] = 0.25f;</div>
<div class="line">            mViewRectangle[2] = 0.75f;</div>
<div class="line">            mViewRectangle[3] = 0.75f;</div>
<div class="line">            <span class="keywordflow">return</span> &amp;mViewRectangle;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Options</span></div>
<div class="line">    <span class="keywordtype">void</span> setUserUIDrawables(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mUserUIDrawables = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setOverrideViewRectangle(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mOverrideViewRectangle = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setDebugTrace( <span class="keywordtype">bool</span> val )</div>
<div class="line">    {</div>
<div class="line">        mDebugTrace = val;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">bool</span> mUserUIDrawables;</div>
<div class="line">    <span class="keywordtype">bool</span> mOverrideViewRectangle;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> mViewRectangle;</div>
<div class="line">    <span class="keywordtype">bool</span> mDebugTrace;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> <a name="a58"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_operation.html#a186d657a8873bbd4e87f10cb8401119d">mName</a>;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    MRenderOverride test override which draws the following:</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    1) Scene operation with it&#39;s options. See MSceneRenderTester class for available options.</span></div>
<div class="line"><span class="comment">    2) HUD operation</span></div>
<div class="line"><span class="comment">    3) Present operation with it&#39;s options. The only option is whether to blit back depth in</span></div>
<div class="line"><span class="comment">        addition to blitting color.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">class </span>MRenderOverrideTester : <span class="keyword">public</span> <a name="_a59"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html">MHWRender::MRenderOverride</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    MRenderOverrideTester( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; name ) </div>
<div class="line">    : <a class="code" href="#!/url=./cpp_ref/namespace_m_h_w_render.html">MHWRender</a>::MRenderOverride( name ) </div>
<div class="line">    , mUIName(<span class="stringliteral">&quot;Render Override Options Renderer&quot;</span>)</div>
<div class="line">    , mOperation(0)</div>
<div class="line">    , mUseSceneShaderInstance(false)</div>
<div class="line">    , mSceneShaderInstance(NULL)</div>
<div class="line">    , mSceneFilterOperation( <a class="code" href="#!/url=./cpp_ref/namespace_m_h_w_render.html">MHWRender</a>::MSceneRender::kNoSceneFilterOverride )</div>
<div class="line">    , mSceneClearMask( (unsigned int)<a class="code" href="#!/url=./cpp_ref/namespace_m_h_w_render.html">MHWRender</a>::MClearOperation::kClearAll )</div>
<div class="line">    , mSceneUIDrawables(false)</div>
<div class="line">    , mUserUIDrawables(false)</div>
<div class="line">    , mUserUILightData(false)</div>
<div class="line">    , mPresentDepth(false)</div>
<div class="line">    , mOverrideViewRectangle(false)</div>
<div class="line">    , mDebugTrace(false)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> render1Name(<span class="stringliteral">&quot;Scene Render 1&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> presentName(<span class="stringliteral">&quot;Present Target&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> userOperationName(<span class="stringliteral">&quot;User Operation 1&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> hudOperationName(<span class="stringliteral">&quot;HUD Operation&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Clear + render set 1</span></div>
<div class="line">        mSceneRender1 = <span class="keyword">new</span> MSceneRenderTester( render1Name );</div>
<div class="line">        </div>
<div class="line">        mUserOperation1 = <span class="keyword">new</span> MUserRenderOperationTester( userOperationName );</div>
<div class="line"></div>
<div class="line">        mHUDRender = <span class="keyword">new</span> MHUDRenderTester( hudOperationName );  </div>
<div class="line"></div>
<div class="line">        mPresentTarget = <span class="keyword">new</span> <a name="_a60"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_present_target.html">MHWRender::MPresentTarget</a>( presentName ); </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ~MRenderOverrideTester()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">        <span class="keyword">const</span> <a name="_a61"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html">MHWRender::MShaderManager</a>* shaderMgr = renderer ? renderer-&gt;<a name="a62"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125">getShaderManager</a>() : NULL;</div>
<div class="line">        <span class="keywordflow">if</span> (shaderMgr)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (mSceneShaderInstance)</div>
<div class="line">            {</div>
<div class="line">                shaderMgr-&gt;<a name="a63"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a0c7deb55edc231cbb2365b271ecd55f8">releaseShader</a>(mSceneShaderInstance);</div>
<div class="line">                mSceneShaderInstance = NULL;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keyword">delete</span> mSceneRender1; mSceneRender1 = NULL;</div>
<div class="line">        <span class="keyword">delete</span> mUserOperation1; mUserOperation1 = NULL;</div>
<div class="line">        <span class="keyword">delete</span> mHUDRender; mHUDRender = NULL;</div>
<div class="line">        <span class="keyword">delete</span> mPresentTarget; mPresentTarget = NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    MHWRender::DrawAPI <a name="a64"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#a0a36b8ef8730fa92f11c853752cc1e0e">supportedDrawAPIs</a>()<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> MHWRender::kAllDevices;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a65"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#af6e4d3092d127b52a0ba00b54052afa6">startOperationIterator</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        mOperation = 0; </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">        </div>
<div class="line">    <a name="_a66"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_operation.html">MHWRender::MRenderOperation</a>* <a name="a67"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#adab552bfd7cb4332ed0162b14710ec0a">renderOperation</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">switch</span>( mOperation )</div>
<div class="line">        {</div>
<div class="line">        <span class="keywordflow">case</span> 0 : <span class="keywordflow">return</span> mSceneRender1;</div>
<div class="line">        <span class="keywordflow">case</span> 1 : <span class="keywordflow">return</span> mUserOperation1;</div>
<div class="line">        <span class="keywordflow">case</span> 2 : <span class="keywordflow">return</span> mHUDRender;</div>
<div class="line">        <span class="keywordflow">case</span> 3 : <span class="keywordflow">return</span> mPresentTarget;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a68"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#a5af9f73906f2f3d2adda03c604f58d73">nextRenderOperation</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        mOperation++; </div>
<div class="line">        <span class="keywordflow">return</span> mOperation &lt; 4 ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">        </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">        UI name to appear as renderer </span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> <a name="a69"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#aa313aa1923be350cc23326c961c33d50">uiName</a>()<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> mUIName;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">        Setup will set up options on operations.</span></div>
<div class="line"><span class="comment">        Any resources which are required are also allocated at this point.</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> <a name="a70"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#a773d1f1082e711c8d4cf216d32b07fe4">setup</a>( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp; destination )<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot;In setup of renderer: %s. Rendering to destination: %s\n&quot;</span>, mName.asChar(), destination.<a name="a71"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line"></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// 1. Scene operation options:</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Shader override option. Acquire a stock shader and set it as an</span></div>
<div class="line">        <span class="comment">// override if enabled.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (mSceneRender1)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html">MHWRender::MShaderManager</a>* shaderMgr = renderer ? renderer-&gt;getShaderManager() : NULL;</div>
<div class="line">            <span class="keywordflow">if</span> (shaderMgr &amp;&amp; !mSceneShaderInstance)</div>
<div class="line">            {</div>
<div class="line">                mSceneShaderInstance = shaderMgr-&gt;<a name="a72"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a8e4ad27d691969622af2b05d8c6213d9">getStockShader</a>( <a name="a73"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a1f7c5db8a3b5804c6ffce5f305bf51a8a56de0b4dccd3a1c52e8ddd11aac3e0e2">MHWRender::MShaderManager::k3dBlinnShader</a> );</div>
<div class="line">                <span class="keywordtype">float</span> diffuse[4] = { 1.0f, 0.0, 0.5f, 1.0f };</div>
<div class="line">                mSceneShaderInstance-&gt;<a name="a74"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;diffuseColor&quot;</span>, &amp;diffuse[0]); </div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (mUseSceneShaderInstance &amp;&amp; mSceneShaderInstance)</div>
<div class="line">            {</div>
<div class="line">                mSceneRender1-&gt;setShaderOverride(mSceneShaderInstance);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                mSceneRender1-&gt;setShaderOverride(NULL);</div>
<div class="line">            }</div>
<div class="line">        </div>
<div class="line">            <span class="comment">// Set the clear mask</span></div>
<div class="line">            mSceneRender1-&gt;setClearMask( mSceneClearMask );</div>
<div class="line">            <span class="comment">// Set scene filtering</span></div>
<div class="line">            mSceneRender1-&gt;setRenderFilterOverride( mSceneFilterOperation );</div>
<div class="line">            <span class="comment">// Set object set filtering</span></div>
<div class="line">            mSceneRender1-&gt;setObjectSetOverride( mSceneSetFilterName );</div>
<div class="line">            <span class="comment">// Set to use ui drawabls</span></div>
<div class="line">            mSceneRender1-&gt;setSceneUIDrawables( mSceneUIDrawables );</div>
<div class="line">            <span class="comment">// Set viewport rectangle</span></div>
<div class="line">            mSceneRender1-&gt;setOverrideViewRectangle( mOverrideViewRectangle );</div>
<div class="line">            <span class="comment">// Set debugging</span></div>
<div class="line">            mSceneRender1-&gt;setDebugTrace( mDebugTrace );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// </span></div>
<div class="line">        <span class="comment">// 2. User operation options:</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (mUserOperation1)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Set to use ui drawables</span></div>
<div class="line">            mUserOperation1-&gt;setUserUIDrawables( mUserUIDrawables );</div>
<div class="line">            <span class="comment">// Set to require light data</span></div>
<div class="line">            mUserOperation1-&gt;setUserUILightData( mUserUILightData );</div>
<div class="line">            <span class="comment">// Set viewport rectangle</span></div>
<div class="line">            mUserOperation1-&gt;setOverrideViewRectangle( mOverrideViewRectangle );</div>
<div class="line">            <span class="comment">// Set debugging</span></div>
<div class="line">            mUserOperation1-&gt;setDebugTrace( mDebugTrace );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// 3. HUD operation options:</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (mHUDRender)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Set viewport rectangle</span></div>
<div class="line">            mHUDRender-&gt;setOverrideViewRectangle( mOverrideViewRectangle );</div>
<div class="line">            <span class="comment">// Set to use ui drawables</span></div>
<div class="line">            mHUDRender-&gt;setUserUIDrawables( mUserUIDrawables );</div>
<div class="line">            <span class="comment">// Set debugging</span></div>
<div class="line">            mHUDRender-&gt;setDebugTrace( mDebugTrace );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// </span></div>
<div class="line">        <span class="comment">// 4. Present operation options:</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Set depth target options</span></div>
<div class="line">        mPresentTarget-&gt;setPresentDepth( mPresentDepth );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> <a name="a75"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_override.html#aca5dc8a0749ab4431a1208e16dbdaa45">cleanup</a>()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (mDebugTrace)</div>
<div class="line">            printf(<span class="stringliteral">&quot;In cleanup %s\n&quot;</span>, mName.asChar());</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Options</span></div>
<div class="line">    <span class="keywordtype">void</span> setUseSceneShaderInstance(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mUseSceneShaderInstance = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setSceneFilterOperation(<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471">MHWRender::MSceneRender::MSceneFilterOption</a> val)</div>
<div class="line">    {</div>
<div class="line">        mSceneFilterOperation = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setSceneSetFilterName( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;val )</div>
<div class="line">    {</div>
<div class="line">        mSceneSetFilterName = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setSceneUIDrawables( <span class="keywordtype">bool</span> val )</div>
<div class="line">    {</div>
<div class="line">        mSceneUIDrawables = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setPresentDepth( <span class="keywordtype">bool</span> val )</div>
<div class="line">    {</div>
<div class="line">        mPresentDepth = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setUserUIDrawables(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mUserUIDrawables = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setUserUILightData(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mUserUILightData = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setOverrideViewRectangle(<span class="keywordtype">bool</span> val)</div>
<div class="line">    {</div>
<div class="line">        mOverrideViewRectangle = val;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> setDebugTrace( <span class="keywordtype">bool</span> val )</div>
<div class="line">    {</div>
<div class="line">        mDebugTrace = val;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    MSceneRenderTester*         mSceneRender1;</div>
<div class="line">    MUserRenderOperationTester* mUserOperation1;</div>
<div class="line">    MHUDRenderTester*           mHUDRender;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_present_target.html">MHWRender::MPresentTarget</a>*  mPresentTarget;</div>
<div class="line">    <span class="keywordtype">int</span>                         mOperation;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>                     mUIName;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Scene operation options</span></div>
<div class="line">    <span class="keywordtype">bool</span> mUseSceneShaderInstance;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a>* mSceneShaderInstance;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mSceneClearMask;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> mSceneSetFilterName;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471">MHWRender::MSceneRender::MSceneFilterOption</a> mSceneFilterOperation;</div>
<div class="line">    <span class="keywordtype">bool</span> mSceneUIDrawables;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// User operation options</span></div>
<div class="line">    <span class="keywordtype">bool</span> mUserUIDrawables;</div>
<div class="line">    <span class="keywordtype">bool</span> mUserUILightData;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> mOverrideViewRectangle;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Present options</span></div>
<div class="line">    <span class="keywordtype">bool</span> mPresentDepth;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// For execution tracing</span></div>
<div class="line">    <span class="keywordtype">bool</span> mDebugTrace;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// Command to control render override options</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Syntax : </span></div>
<div class="line"><span class="comment">// </span></div>
<div class="line"><span class="comment">//  viewMRenderOverrideCmd </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      -shaderOverride {on,off,0,1}        // Enable / disable using a shader override on surface objects</span></div>
<div class="line"><span class="comment">//      -objectSet &lt;setName&gt;                // Use named object set to filter what to draw during scene operation</span></div>
<div class="line"><span class="comment">//      -sceneFilter &lt;#&gt;,                   // Scene elements filtering</span></div>
<div class="line"><span class="comment">//          where #=0 = MHWRender::MSceneRender::kNoSceneFilterOverride </span></div>
<div class="line"><span class="comment">//                  1 = MHWRender::MSceneRender::kRenderPreSceneUIItems     </span></div>
<div class="line"><span class="comment">//                  2 = MHWRender::MSceneRender::kRenderOpaqueShadedItems           </span></div>
<div class="line"><span class="comment">//                  3 = MHWRender::MSceneRender::kRenderTransparentShadedItems  </span></div>
<div class="line"><span class="comment">//                  4 = MHWRender::MSceneRender::kRenderShadedItems                     </span></div>
<div class="line"><span class="comment">//                  5 = MHWRender::MSceneRender::kRenderPostSceneUIItems                </span></div>
<div class="line"><span class="comment">//                  6 = MHWRender::MSceneRender::kRenderUIItems     </span></div>
<div class="line"><span class="comment">//      -sceneUIDrawables {on,off,0,1}      // Enable / disable user ui drawables for scene operation</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      -userUIDrawables {on,off,0,1}       // Enable / disable user ui drawables for user operation</span></div>
<div class="line"><span class="comment">//      -userUILightData {on,off,0,1}       // Enable / disable light data requirement for user operation</span></div>
<div class="line"><span class="comment">//      -presentDepth {on,off,0,1}          // Present depth when presenting color</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      -debugTrace {on,off,0,1}            // Output debug messages to stdout</span></div>
<div class="line"><span class="comment">// </span></div>
<div class="line"><span class="keyword">class </span>viewMRenderOverrideCmd : <span class="keyword">public</span> <a name="_a76"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_command.html">MPxCommand</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    viewMRenderOverrideCmd();</div>
<div class="line">                    ~viewMRenderOverrideCmd() <span class="keyword">override</span>; </div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a>                 <a name="a77"></a><a class="code" href="#!/url=./cpp_ref/class_m_px_command.html#ade7d0a873cbe811d6eab464e695390a9">doIt</a>( <span class="keyword">const</span> <a name="_a78"></a><a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html">MArgList</a>&amp; args ) <span class="keyword">override</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span> <a name="_a79"></a><a class="code" href="#!/url=./cpp_ref/class_m_syntax.html">MSyntax</a>          newSyntax();</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span>*            creator();</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a>                 parseArgs( <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html">MArgList</a>&amp; args );</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> mEnableShaderOverride;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> mObjectSetFilterName;</div>
<div class="line">    <span class="keywordtype">int</span> mSceneFilter;</div>
<div class="line">    <span class="keywordtype">bool</span> mSceneUIDrawables;</div>
<div class="line">    <span class="keywordtype">bool</span> mUserUIDrawables;</div>
<div class="line">    <span class="keywordtype">bool</span> mUserUILightData;</div>
<div class="line">    <span class="keywordtype">bool</span> mPresentDepth;</div>
<div class="line">    <span class="keywordtype">bool</span> mOverrideViewRectangle;</div>
<div class="line">    <span class="keywordtype">bool</span> mDebugTrace;</div>
<div class="line"></div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">viewMRenderOverrideCmd::viewMRenderOverrideCmd()</div>
<div class="line">: mEnableShaderOverride(false)</div>
<div class="line">, mSceneFilter(0)</div>
<div class="line">, mSceneUIDrawables(false)</div>
<div class="line">, mUserUIDrawables(false)</div>
<div class="line">, mUserUILightData(false)</div>
<div class="line">, mPresentDepth(false)</div>
<div class="line">, mOverrideViewRectangle(false)</div>
<div class="line">, mDebugTrace(false)</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line">viewMRenderOverrideCmd::~viewMRenderOverrideCmd()</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span>* viewMRenderOverrideCmd::creator()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *) (<span class="keyword">new</span> viewMRenderOverrideCmd);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Argument strings</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *shaderOverrideShortName = <span class="stringliteral">&quot;-so&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *shaderOverrideLongName = <span class="stringliteral">&quot;-shaderOverride&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *objectSetFilterShortName = <span class="stringliteral">&quot;-os&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *objectSetFilterLongName = <span class="stringliteral">&quot;-objectSet&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *scenefilterShortName = <span class="stringliteral">&quot;-sf&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *scenefilterLongName = <span class="stringliteral">&quot;-sceneFilter&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *sceneUIDrawablesShortName = <span class="stringliteral">&quot;-su&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *sceneUIDrawablesLongName = <span class="stringliteral">&quot;-sceneUIDrawables&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *userUIDrawablesShortName = <span class="stringliteral">&quot;-uu&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *userUIDrawablesLongName = <span class="stringliteral">&quot;-userUIDrawables&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *userUILightDataShortName = <span class="stringliteral">&quot;-ul&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *userUILightDataLongName = <span class="stringliteral">&quot;-userUILightData&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *viewportRectangleShortName = <span class="stringliteral">&quot;-vr&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *viewportRectangleLongName = <span class="stringliteral">&quot;-viewportRectangle&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *presentDepthShortName = <span class="stringliteral">&quot;-pd&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *presentDepthLongName = <span class="stringliteral">&quot;-presentDepth&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *debugTraceShortName = <span class="stringliteral">&quot;-db&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *debugTraceLongName = <span class="stringliteral">&quot;-debug&quot;</span>;</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_syntax.html">MSyntax</a> viewMRenderOverrideCmd::newSyntax()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html">MSyntax</a> syntax;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Use shader override</span></div>
<div class="line">    syntax.<a name="a80"></a><a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(shaderOverrideShortName, shaderOverrideLongName, <a name="a81"></a><a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Object set filter name</span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(objectSetFilterShortName, objectSetFilterLongName, <a name="a82"></a><a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2adafab53ea4a643325262b9c140af093279">MSyntax::kString</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Scene filter</span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(scenefilterShortName, scenefilterLongName, <a name="a83"></a><a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada499591c04ccb62ab4f6fc3a5450afd4c">MSyntax::kUnsigned</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Scene ui drawables</span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(sceneUIDrawablesShortName, sceneUIDrawablesLongName, <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// User ui drawables</span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(userUIDrawablesShortName, userUIDrawablesLongName, <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// User light data</span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(userUILightDataShortName, userUILightDataLongName, <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Present depth </span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(presentDepthShortName, presentDepthLongName, <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Present depth </span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(viewportRectangleShortName, viewportRectangleLongName, <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Debug output</span></div>
<div class="line">    syntax.<a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#aeaeaac3794bb4de8004afb1ac1829488">addFlag</a>(debugTraceShortName, debugTraceLongName, <a class="code" href="#!/url=./cpp_ref/class_m_syntax.html#ae6f2057f0d0419845a48c1eb6813f2ada8cfc0ab572a96edfc9db7c02f0d025d7">MSyntax::kBoolean</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> syntax;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// parseArgs</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> viewMRenderOverrideCmd::parseArgs(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html">MArgList</a>&amp; args)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a>         status;</div>
<div class="line">    <a name="_a84"></a><a class="code" href="#!/url=./cpp_ref/class_m_arg_database.html">MArgDatabase</a>    argData(syntax(), args);</div>
<div class="line"></div>
<div class="line">    mEnableShaderOverride = <span class="keyword">false</span>;</div>
<div class="line">    mObjectSetFilterName.clear();</div>
<div class="line">    mSceneFilter = 0;</div>
<div class="line">    mUserUIDrawables = <span class="keyword">false</span>;</div>
<div class="line">    mUserUILightData = <span class="keyword">false</span>;</div>
<div class="line">    mOverrideViewRectangle = <span class="keyword">false</span>;</div>
<div class="line">    mPresentDepth = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>         arg;</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; args.<a name="a85"></a><a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>(); i++ ) </div>
<div class="line">    {</div>
<div class="line">        arg = args.<a name="a86"></a><a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#ad24ff3826e4df513b55e1a0ecb0a665b">asString</a>( i, &amp;status );</div>
<div class="line">        <span class="keywordflow">if</span> (!status)              </div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check for shader override flag. </span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(shaderOverrideShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(shaderOverrideLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += shaderOverrideLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }           </div>
<div class="line">            i++;</div>
<div class="line">            args.<a name="a87"></a><a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mEnableShaderOverride);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check for object filter flag</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(objectSetFilterShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(objectSetFilterLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += objectSetFilterLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mObjectSetFilterName);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check for scene filter flag</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(scenefilterShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(scenefilterLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += scenefilterLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mSceneFilter);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(sceneUIDrawablesShortName ) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(sceneUIDrawablesLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += sceneUIDrawablesLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mSceneUIDrawables);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(userUIDrawablesShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(userUIDrawablesLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += userUIDrawablesLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mUserUIDrawables);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// User light data</span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(userUILightDataShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(userUILightDataLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += userUILightDataLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mUserUILightData);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">// Viewport rectangle</span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(viewportRectangleShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(viewportRectangleLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += viewportRectangleLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mOverrideViewRectangle);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check for present depth flag</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(presentDepthShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(presentDepthLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += presentDepthLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mPresentDepth);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check for debug output flag</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> ( arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(debugTraceShortName) || arg == <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(debugTraceLongName) ) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (i == args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>()-1) {</div>
<div class="line">                arg += <span class="stringliteral">&quot;: must specify a value for &quot;</span>;</div>
<div class="line">                arg += debugTraceLongName;</div>
<div class="line">                displayError(arg);</div>
<div class="line">                <span class="keywordflow">return</span> MS::kFailure;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">            args.<a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html#adc169cdc872457a2664c3d66c29cf504">get</a>(i, mDebugTrace);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> MS::kSuccess;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> viewMRenderOverrideCmd::doIt(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_arg_list.html">MArgList</a>&amp; args)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Find the render override</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>(); </div>
<div class="line">    MRenderOverrideTester *renderOverride = NULL;</div>
<div class="line">    <span class="keywordflow">if</span> (renderer)</div>
<div class="line">    {</div>
<div class="line">        renderOverride = (MRenderOverrideTester *) renderer-&gt;<a name="a88"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#aa0cb03754b054ca048e0b9e6265b5e82">findRenderOverride</a>( <span class="stringliteral">&quot;viewMRenderOverride&quot;</span> );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (!renderOverride)</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a89"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get command options</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = parseArgs(args);</div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set options on scene operation</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    renderOverride-&gt;setUseSceneShaderInstance( mEnableShaderOverride );</div>
<div class="line">    renderOverride-&gt;setSceneSetFilterName( mObjectSetFilterName );</div>
<div class="line">    renderOverride-&gt;setSceneUIDrawables( mSceneUIDrawables );</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471">MHWRender::MSceneRender::MSceneFilterOption</a> filters[7] = {</div>
<div class="line">        MHWRender::MSceneRender::kNoSceneFilterOverride,</div>
<div class="line">        <a name="a90"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471ac644a9e1a410f709b1d004157be60aff">MHWRender::MSceneRender::kRenderPreSceneUIItems</a>,                </div>
<div class="line">        <a name="a91"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471aa495b7b7881d7dacc1e6f3191022c9f1">MHWRender::MSceneRender::kRenderOpaqueShadedItems</a>,          </div>
<div class="line">        <a name="a92"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471ae0c745e0f7e63027d292bc1f7c2322cf">MHWRender::MSceneRender::kRenderTransparentShadedItems</a>, </div>
<div class="line">        <a name="a93"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471a223455dc264231885d7460f8ab0841ab">MHWRender::MSceneRender::kRenderShadedItems</a>,                        </div>
<div class="line">        <a name="a94"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_scene_render.html#a952370b3954e51c4f19349a9a440d471a746b2f05d1e20dbb3ba121991fb3fa1f">MHWRender::MSceneRender::kRenderPostSceneUIItems</a>,       </div>
<div class="line">        MHWRender::MSceneRender::kRenderUIItems             </div>
<div class="line">    };</div>
<div class="line">    <span class="keywordflow">if</span> (mSceneFilter &gt;=0 &amp;&amp; mSceneFilter &lt; 7)</div>
<div class="line">    {</div>
<div class="line">        renderOverride-&gt;setSceneFilterOperation( filters[mSceneFilter] );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set options on user operation</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    renderOverride-&gt;setUserUIDrawables( mUserUIDrawables );</div>
<div class="line">    renderOverride-&gt;setUserUILightData( mUserUILightData );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set options on present operation</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    renderOverride-&gt;setPresentDepth( mPresentDepth );</div>
<div class="line"></div>
<div class="line">    renderOverride-&gt;setOverrideViewRectangle( mOverrideViewRectangle );</div>
<div class="line"></div>
<div class="line">    renderOverride-&gt;setDebugTrace( mDebugTrace );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Cause a refresh to occur so that viewports will update</span></div>
<div class="line">    <a name="a95"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a2c877a6e116f8fd3a6e76387403c023a">MGlobal::executeCommandOnIdle</a>(<span class="stringliteral">&quot;refresh&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> status;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Plugin registration</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> </div>
<div class="line">initializePlugin( <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> obj )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (renderer)</div>
<div class="line">    {</div>
<div class="line">        gsRenderOverride.reset(<span class="keyword">new</span> MRenderOverrideTester(<span class="stringliteral">&quot;viewMRenderOverride&quot;</span>));</div>
<div class="line">        status = renderer-&gt;<a name="a96"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#ae677d98e2300e2f9c69abb576539ac37">registerOverride</a>(gsRenderOverride.get());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">    {</div>
<div class="line">        <a name="_a97"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_plugin.html">MFnPlugin</a> plugin(obj);</div>
<div class="line">        status = plugin.registerCommand(<span class="stringliteral">&quot;viewMRenderOverride&quot;</span>,</div>
<div class="line">                                        viewMRenderOverrideCmd::creator,</div>
<div class="line">                                        viewMRenderOverrideCmd::newSyntax);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Plugin deregistration</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> </div>
<div class="line">uninitializePlugin( <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> obj )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>(); </div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (renderer)</div>
<div class="line">    {</div>
<div class="line">        status = renderer-&gt;<a name="a98"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a98edf29a485507737ea8f0523408296b">deregisterOverride</a>(gsRenderOverride.get());</div>
<div class="line">        gsRenderOverride = <span class="keyword">nullptr</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_plugin.html">MFnPlugin</a> plugin(obj);</div>
<div class="line">    status = plugin.deregisterCommand( <span class="stringliteral">&quot;viewMRenderOverride&quot;</span> );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> status;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->

      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
   </div></body>
</html>
