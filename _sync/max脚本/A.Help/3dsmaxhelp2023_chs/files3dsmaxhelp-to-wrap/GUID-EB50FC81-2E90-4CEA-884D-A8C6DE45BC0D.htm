<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-EB50FC81-2E90-4CEA-884D-A8C6DE45BC0D">
      <meta name="topic-type" content="concept">
      <title>流程集成支持</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-EB50FC81-2E90-4CEA-884D-A8C6DE45BC0D"></a><div class="head">
            <h1>流程集成支持</h1>
         </div>
         <p> 本主题介绍的功能用于自定义 3ds Max 的部署和执行以更好地集成到生产流程中。 
            	 
         </p>
         <p> 对于由不同团队使用特定于步骤的硬件和软件配置执行多个步骤的大型复杂项目，明确定义的生产工作流或“流程”有助于促进流程的高效流动。 
            	 
         </p>
         <p> 灵活且可自定义的工具是制定生产流程的关键，这些工具可根据受生产细节驱动的新要求进行重新配置。 
            	 
         </p>
         <p> 3ds Max 支持通过 Maxscript 和 Python 编写脚本，还支持通过用户定义的<span class="char_link"><a href="GUID-C372E124-2B7E-41BB-94B0-5FF945D51095.htm">启动脚本</a></span>、一组丰富的<span class="char_link"><a href="GUID-1A97CFEC-60A3-4221-B9C3-5C808E2AED35.htm">命令行参数</a></span>、<span class="char_link"><a href="GUID-48A78515-C24B-4E46-AC5F-884FBCF40D59.htm">批处理</a></span>和<span class="char_link"><a href="GUID-B30BA517-B3C1-4D7C-AFB6-B220C2EDC529.htm">命令行渲染</a></span>模式对脚本的各个方面进行自定义，使其可以轻松集成到生产流程中。 
            	 
         </p>
         <p> 在 <em class="strong">3ds Max 2022.3</em> 中，这些流程集成功能已增强，工作室可以更轻松地配置软件，这样美工人员可以在需要独特配置环境（包括项目设置、用户首选项、脚本和插件）的任务之间无缝切换。为此，我们公开了多个环境变量来控制环境的各个方面（项目位置、用户设置、脚本和资源），并添加了对将环境变量代币嵌入到
            3ds Max 使用的配置文件中存储的文件和文件夹路径的支持。 
            	 
         </p>
         <div class="section"><a name="SECTION_46175CFA21904C258484630C72200121"></a> 
            <h2><a name="GUID-779D6630-B7BA-49B6-9CF2-CC7F35479B80"></a> <em class="strong">通过环境变量进行自定义</em> 
            </h2> 
            <p> 用户数据、用户脚本、插件、基于文件的资源（如贴图和外部参照）和项目的路径表示 3ds Max 用户环境。以下部分介绍了如何使用环境变量自定义和扩展它们（如果支持）。有关 3ds Max 使用的所有系统环境变量的列表，请参见<span class="char_link"><a href="GUID-D7D373FD-CA78-4986-AB3D-B1E25F2A37CC.htm">环境变量</a></span>主题。 
               		
            </p> 
            <p> 下面介绍的环境变量适合用于自定义 3ds Max 流程的环境，无论其版本如何。例如，从同一安装中启动的两个或多个 <span class="filePath">3dsmax.exe</span> 流程可以具有不同的环境。如果环境变量是在用户或系统级别设置的，它们将影响由该用户或在该计算机上安装和执行的所有 3ds Max 版本。 
               		
            </p> 
            <div><a name="GUID-D002C585-C787-4CD4-917F-928163A7F305"></a><div class="note-note"><span class="label label-target-language">注意:</span> 尽管可以通过用户界面、脚本或 SDK 访问多个表示用户环境的路径，但无法通过这些方式修改下面描述的环境变量的值。 
                  		
               </div>
            </div> 
            <div class="section"><a name="SECTION_6AFC319E522C438C86FE99903F28A6E7"></a> 
               <h3><a name="GUID-3A30FB50-84F0-4071-847F-A35EDC7262D7"></a> 用户数据文件夹
               </h3> 
               <p> 当定义了 <span class="code">ADSK_3DSMAX_APPDATA_DIR</span> 环境变量时，3ds Max 会使用该环境变量的值作为存储本地用户数据的位置。默认情况下，用户数据存储在 <span class="filePath">C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt; - 64bit\&lt;lang&gt;</span>。在 Maxscript 和 Python 中，<span class="code">$maxData</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p> 此环境变量只允许定义一个路径。它必须是有效路径。如果路径无效，3ds Max 将无法启动并显示 -10 退出代码。如果路径有效但不存在，3ds Max 将创建该路径。可以使用此环境变量的不同值运行多个同步 3ds Max 会话。 
                  		  
               </p> 
               <p> 为了使此环境变量生效，3ds Max 必须在启用“用户配置文件”的情况下运行。当 <span class="filePath">&lt;3dsMaxInstall&gt;\InstallSettings.ini</span> 文件包含以下数据时，它将使用用户配置文件（如果已在 Windows 中启用）。 
                  		  
               </p> 
               <div class="codeBlock"><pre>[Least User Privilege]
useUserProfiles=1</pre></div> 
            </div> 
            <div class="section"><a name="SECTION_AC59599D59BE4F7D8B2AF2D2AB0612AD"></a> 
               <h3><a name="GUID-451D64FB-D6C4-4419-9A84-5AF76F08903F"></a> 用户设置文件夹
               </h3> 
               <p> 3ds Max 2020 中引入了“用户设置”位置概念。 
                  		  
               </p> 
               <p>当定义了 <span class="code">ADSK_3DSMAX_USERSETTINGS_DIR</span> 环境变量时，3ds Max 会使用该环境变量的值作为存储用户设置的文件夹。默认情况下，用户设置存储在 <span class="filePath">C:\Users\&lt;username&gt;\Autodesk\3ds Max &lt;year&gt;\User Settings</span>。在 Maxscript 和 Python 中，<span class="code">$userSettings</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p>请注意，当前并非所有用户设置都存储在“用户设置”位置。自 3ds Max 2022 起，大多数用户设置仍存储在用户数据文件夹中。 
                  		  
               </p> 
               <p>此环境变量只允许定义一个路径。它必须是有效路径。如果路径无效，3ds Max 将无法启动并显示 -10 退出代码。如果路径有效但不存在，3ds Max 将创建该路径。可以使用此环境变量的不同值运行多个同步 3ds Max 会话。 
                  		  
               </p> 
               <p>在启动 3ds Max 期间，将按照以下优先级顺序设置用户设置文件夹： 
                  		  
               </p> <a name="OL_3F61A3AB875F4503AE30EC34D7F69987"></a><ol type="1" start="1">
                  <li>启动脚本（覆盖环境变量设置） 
                     			 
                  </li>
                  <li><span class="code">ADSK_3DSMAX_USERSETTINGS_DIR</span> 环境变量（覆盖 <span class="filePath">3dsmax.ini</span> 设置） 
                     			 
                  </li>
                  <li><span class="filePath">3dsmax.ini</span> 中的用户设置值 
                     			 
                  </li>
               </ol> 
               <p>如果上述方法均未提供用户设置文件夹，则 3ds Max 将恢复使用默认用户设置文件夹。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_E64EE61D812842E5BFA8E8E46616C57B"></a> 
               <h3><a name="GUID-D181E28F-1289-4429-84A3-2458523D4DD2"></a> 用户工具文件夹
               </h3> 
               <p>定义 <span class="code">ADSK_3DSMAX_USERTOOLS_DIR</span> 环境变量后，3ds Max 将其值用作用户工具（如场景转换器脚本和 Max Creation Graph 复合）的文件夹。默认情况下，用户工具存储在 <span class="filePath">C:\Users\&lt;用户名&gt;\Autodesk\3ds Max &lt;年份&gt;\User Tools</span> 中。在 Maxscript 和 Python 中，<span class="code">$userTools</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p>此环境变量只允许定义一个路径。它必须是有效路径。如果路径无效，3ds Max 将无法启动并显示 -10 退出代码。如果路径有效但不存在，3ds Max 将创建该路径。可以使用此环境变量的不同值运行多个同步 3ds Max 会话。 
                  		  
               </p> 
               <p>在启动 3ds Max 期间，将按照以下优先级顺序设置用户工具文件夹： 
                  		  
               </p> <a name="OL_F8C336BB3BA8466983512A7A2EDB792E"></a><ol type="1" start="1">
                  <li>启动脚本（覆盖环境变量设置） 
                     			 
                  </li>
                  <li><span class="code">ADSK_3DSMAX_USERTOOLS_DIR</span> 环境变量（覆盖 <span class="filePath">3dsmax.ini</span> 设置） 
                     			 
                  </li>
                  <li><span class="filePath">3dsmax.ini</span> 中的用户工具值 
                     			 
                  </li>
               </ol> 
               <p>如果上述方法均未提供用户工具文件夹，则 3ds Max 将恢复使用默认用户工具文件夹。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_62426DF052F2464CA6808C470BE94B98"></a> 
               <h3><a name="GUID-674E89CD-5BD9-4CC2-981A-90A11A7B6ACA"></a> 项目文件夹
               </h3> 
               <p> 3ds Max 2020 中引入了项目文件夹概念。有关详细信息，请参见<span class="char_link"><a href="GUID-50275CEE-01E1-4023-897D-E9B573C38126.htm">项目</a></span>主题。 
                  		  
               </p> 
               <p> 当定义了 <span class="code">ADSK_3DSMAX_PROJECT_FOLDER_DIR</span> 环境变量并且 3ds Max 以新场景启动时，它会使用此环境变量的值存储项目数据（如材质库、渲染预设、渲染输出、自动备份文件位置等）。 
                  		  
               </p> 
               <p> 默认情况下，项目配置位于 <span class="filePath">C:\Users\&lt;username&gt;\Documents\3ds Max &lt;year&gt;</span>。项目文件夹自定义通过 <span class="code">pathConfig</span> 结构的方法（如 <span class="code">pathConfig.setCurrentProjectFolder&lt;path&gt;</span>）向 Maxscript 和 Python 公开。 
                  		  
               </p> 
               <p> 此环境变量只允许定义一个路径。它必须是有效路径。如果路径无效，3ds Max 将无法启动并显示 -10 退出代码。如果路径有效但不存在，3ds Max 将创建该路径。可以使用此环境变量的不同值运行多个同步 3ds Max 会话。 
                  		  
               </p> 
               <p> 在启动 3ds Max 期间，将按照以下优先级顺序设置项目文件夹： 
                  		  
               </p> <a name="OL_ECDBAF3492CC4BCFA050016F061C6DBC"></a><ol type="1" start="1">
                  <li>启动脚本（覆盖环境变量设置） 
                     			 
                  </li>
                  <li><span class="code">ADSK_3DSMAX_PROJECT_FOLDER_DIR</span> 环境变量（覆盖 <span class="filePath">3dsmax.ini</span> 设置） 
                     			 
                  </li>
                  <li><span class="filePath">3dsmax.ini</span> 中的 <span class="code">ProjectFolder</span> 值 
                     			 
                  </li>
               </ol> 
               <p> 如果上述方法均未提供项目文件夹，则 3ds Max 将恢复使用默认项目文件夹。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_3AC1AE43CDB440368B2D471E177D8E29"></a> 
               <h3><a name="GUID-6A2D68A1-4D43-499A-937A-125C9D4E3B26"></a> 用户启动脚本文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_STARTUPSCRIPTS_ADDON_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了通过“配置用户和系统路径”<span class="MenuCascade"></span>对话框定义的启动脚本文件夹外，3ds Max 还使用这些路径来搜索用户定义的启动脚本。 
                  		  
               </p> 
               <p> 默认情况下，用户启动脚本存储在 <span class="filePath">C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt; - 64bit\&lt;language&gt;\scripts\startup</span>。在 Maxscript 和 Python 中，<span class="code">$userStartupScripts</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p>在用户定义的启动脚本位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值执行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (<span class="filePath">Max.log</span>) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_57A8F35621C849EFB97C79EF9FD7B542"></a> 
               <h3><a name="GUID-BD206F49-B042-465C-971C-0CE50241DE79"></a> 用户脚本文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_SCRIPTS_ADDON_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了<em class="mild"></em>通过“配置用户和系统路径”<span class="MenuCascade"></span>对话框定义的用户脚本文件夹外，3ds Max 还使用这些路径来搜索用户脚本。默认情况下，用户脚本存储在 <span class="filePath">C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt; - 64bit\&lt;language&gt;\scripts\</span>。在 Maxscript 和 Python 中，<span class="code">$userScripts</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p> 在用户定义的脚本位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值执行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (<span class="filePath">Max.log</span>) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_9F61C73DD2554E20BD9FE94BE27E68CF"></a> 
               <h3><a name="GUID-4F5C8C4F-1CC5-4FA2-8812-8C393747373A"></a> 用户宏脚本文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_MACROS_ADDON_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了<em class="mild"></em>通过“配置用户和系统路径”<span class="MenuCascade"></span>对话框定义的用户宏脚本文件夹外，3ds Max 还使用这些路径来搜索用户宏脚本。默认情况下，用户宏脚本存储在 <span class="filePath">C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt; - 64bit\&lt;language&gt;\usermacros</span>。在 Maxscript 和 Python 中，<span class="code">$userMacros</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p> 在用户定义的宏脚本位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值执行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (<span class="filePath">Max.log</span>) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_CC1C88438D3E48D6B4D5731D2021CE48"></a> 
               <h3><a name="GUID-3B848E7A-DF32-4072-9643-ACB07A1CC8AD"></a>用户图标文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_ICONS_ADDON_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了<em class="mild"></em>通过“配置用户和系统路径”<span class="MenuCascade"></span>对话框定义的用户图标文件夹外，3ds Max 还使用这些路径来搜索用户定义的图标。默认情况下，用户图标存储在 <span class="filePath">C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt; - 64bit\&lt;language&gt;\usericons</span>。在 Maxscript 和 Python 中，<span class="code">$userIcons</span> 符号路径名表示此位置。 
                  		  
               </p> 
               <p> 在用户定义的图标位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值执行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (<span class="filePath">Max.log</span>) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_42514A83F5AE4E74B52AC7DA2010D55C"></a> 
               <h3><a name="GUID-38BBC644-0570-40D1-8476-67D276DFDB0F"></a> 用户插件文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_PLUGINS_ADDON_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了<em class="mild"></em>通过“配置用户和系统路径”<span class="MenuCascade"></span>对话框定义的文件夹外，3ds Max 还使用这些路径来搜索第三方插件。以下配置文件存储用户插件路径：<span class="filePath">C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt; - 64bit\&lt;language&gt;\Plugin.UserSettings.ini</span>。在 Maxscript 和 Python 中，<span class="code">pluginPath</span> 结构提供对用户定义的插件路径的脚本访问。 
                  		  
               </p> 
               <p> 在用户定义的插件搜索位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值执行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (<span class="filePath">Max.log</span>) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_73062B43657B4F409B85213E24EE1F9A"></a> 
               <h3><a name="GUID-C179601B-5D09-4B6B-9FCF-FCF08950D7FB"></a>用户插件程序包文件夹
               </h3> 
               <p> <span class="code">ADSK_APPLICATION_PLUGINS</span> 环境变量用于定义以分号分隔的路径列表，除了<em class="mild"></em>内置位置 <span class="filePath">%ALLUSERSPROFILE%\Autodesk\ApplicationPlugins\</span> 和 <span class="filePath">%APPDATA%\Autodesk\ApplicationPlugins</span> 外，3ds Max 还使用这些路径来搜索插件程序包。在 Maxscript 和 Python 中，<span class="code">$publicExchangeStoreInstallPath</span> 和 <span class="code">$privateExchangeStoreInstallPath</span> 符号路径名表示这些位置。 
                  		  
               </p> 
               <p> 在内置的插件程序包搜索位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值运行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (Max.log) 中记录错误。 
                  		  
               </p> 
               <p> 有关 <span class="code">ADSK_APPLICATION_PLUGINS</span> 环境变量的更多详细信息，请参见《C++ 开发人员手册》中的“打包插件”主题。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_382A97A079A54FB4938B872DEEAFD3BF"></a> 
               <h3><a name="GUID-D49A8B3E-240C-4FEA-9E10-7AEDBC9057F5"></a>用户贴图文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_ASSETS_MAPS_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了<em class="mild"></em>通过“配置项目路径”<span class="MenuCascade"></span>对话框的“外部文件”选项卡定义的文件夹外，3ds Max 还使用这些路径来搜索贴图。贴图路径列表存储在项目文件中（尽管它还复制到 3dsmax.ini 中）。向 Maxscript 和 Python 公开的 mapPaths 结构使脚本编写人员可以自定义这些搜索路径。
                  
                  		  
               </p> 
               <p> 在用户定义的贴图搜索位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值运行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (Max.log) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_D6DB02BB86D748F095A0A21AFA1E24F3"></a> 
               <h3><a name="GUID-2E752A06-79B1-422F-A5F7-62FC857E68EF"></a> 外部参照文件夹
               </h3> 
               <p> <span class="code">ADSK_3DSMAX_ASSETS_XREFS_DIR</span> 环境变量用于定义以分号分隔的路径列表，除了通过“配置项目路径”<span class="MenuCascade"></span>对话框的“外部参照”选项卡定义的文件夹外，3ds Max 还使用这些路径来搜索外部参照。外部参照路径列表存储在项目文件中（尽管它还复制到 <span class="filePath">3dsmax.ini</span> 中）。在 Maxscript 和 Python 中，<span class="code">xrefPaths</span> 结构使脚本编写人员可以自定义这些搜索路径。 
                  		  
               </p> 
               <p> 在用户定义的外部参照搜索位置之后，可以搜索通过此环境变量指定的路径。可以使用此环境变量的不同值执行多个同步 3ds Max 会话。如果通过此环境变量定义的任何路径不正确，则将在系统日志 (<span class="filePath">Max.log</span>) 中记录错误。 
                  		  
               </p> 
            </div> 
            <div class="section"><a name="SECTION_465B5A29BBFE444CB8AF82180EEC6EE9"></a> 
               <h3><a name="GUID-BE2CB06E-39E1-4785-9DCC-B102EC43AC36"></a> 3ds Max 项目（mxp 文件）
               </h3> 
               <p>3ds Max 项目设置（路径）在 <span class="filePath">.mxp</span> 文件中定义，这些文件的格式与 <span class="filePath">.ini</span> 文件类似。 
                  		  
               </p> 
               <p>请注意，当 3ds Max 启动时，由项目文件定义的所有路径都将重新写入 <span class="filePath">3dsmax.ini</span> 文件。因此，如果要自定义任何特定于项目的路径，应通过项目文件而不是 <span class="filePath">3dsmax.ini</span> 来完成。 
                  		  
               </p> 
               <p>可以使用 <span class="code">ADSK_3DSMAX_PROJECT_DIR</span> 环境变量来配置项目文件夹的位置。要自定义属于项目的各个文件夹，可以使用启动脚本。 
                  		  
               </p> 
               <p>下面列出了通过项目文件 (<span class="filePath">.mxp</span>) 定义和控制的路径（键）： 
                  		  
               </p> <a name="TABLE_85177922F738427487ACD1D32A87365C"></a><div class="table-not-ruled">
                  <table cellpadding="0" cellspacing="0" class="not-ruled">
                     <colgroup>
                        <col>
                        <col>
                     </colgroup>
                     <tr class="not-ruled-odd-row">
                        <td class="table-body"><em class="strong"> 部分 </em> 
                        </td>
                        <td class="table-body"><em class="strong"> 键 </em> 
                        </td>
                     </tr>
                     <tr class="not-ruled-even-row">
                        <td class="table-body"> Directories 
                           					 
                        </td>
                        <td class="table-body"> 
                           <p class="table-body">Animations 
                              						
                           </p> 
                           <p class="table-body"> Archives 
                              						
                           </p> 
                           <p class="table-body"> AutoBackup 
                              						
                           </p> 
                           <p class="table-body"> BitmapProxies 
                              						
                           </p> 
                           <p class="table-body"> CFD 
                              						
                           </p> 
                           <p class="table-body">Downloads 
                              						
                           </p> 
                           <p class="table-body"> Export 
                              						
                           </p> 
                           <p class="table-body"> Expressions 
                              						
                           </p> 
                           <p class="table-body"> Images 
                              						
                           </p> 
                           <p class="table-body"> Import 
                              						
                           </p> 
                           <p class="table-body"> Materials 
                              						
                           </p> 
                           <p class="table-body"> MaxStart 
                              						
                           </p> 
                           <p class="table-body"> Photometric 
                              						
                           </p> 
                           <p class="table-body"> Previews 
                              						
                           </p> 
                           <p class="table-body"> ProjectFolder 
                              						
                           </p> 
                           <p class="table-body"> RenderAssets 
                              						
                           </p> 
                           <p class="table-body"> RenderOutput 
                              						
                           </p> 
                           <p class="table-body"> RenderPresets 
                              						
                           </p> 
                           <p class="table-body">Scenes 
                              						
                           </p> 
                           <p class="table-body"> Sounds 
                              						
                           </p> 
                           <p class="table-body"> VideoPost 
                              						
                           </p> 
                        </td>
                     </tr>
                     <tr class="not-ruled-odd-row">
                        <td class="table-body"> XReferenceDirs 
                           					 
                        </td>
                        <td class="table-body"> alldirs 
                           					 
                        </td>
                     </tr>
                     <tr class="not-ruled-even-row">
                        <td class="table-body"> BitmapDirs 
                           					 
                        </td>
                        <td class="table-body"> alldirs 
                           					 
                        </td>
                     </tr>
                  </table>
               </div> 
            </div> 
         </div>
         <div class="section"><a name="SECTION_BE2A2A1B771748C391541534BF93FB1E"></a> 
            <h2><a name="GUID-975BD20F-3B9D-439D-9333-5DC9CF4B80F1"></a> 通过环境变量代币进行自定义
            </h2> 
            <p>此功能允许您使用用户定义的环境变量（称为“环境变量代币”）构造在各种 3ds Max 配置文件（包括 <span class="filePath">3dsmax.ini</span>）中定义的路径。3ds Max 在运行时会将代币扩展为相应环境变量的值，以便轻松高效地以编程方式构造用于定义和配置 3ds Max 环境（包括用户脚本和插件、资源搜索路径等）的路径。 
               		
            </p> 
            <p> 代币应采用以下格式： 
               		
            </p> 
            <p><span class="code">%&lt;token_name&gt;%</span>，其中 <span class="code">&lt;token_name&gt;</span> 是系统或用户环境变量的名称。 
               		
            </p> 
            <p><em class="strong"> 示例： </em> 
            </p> <a name="UL_197CF047EDF24EB8B0EFBCBF9719EC8B"></a><ul>
               <li> 
                  <p> 在 <span class="filePath">3dsmax.ini</span> 中找到的非代币化用户启动脚本路径： 
                     			 
                  </p> 
                  <div class="codeBlock"><pre>Additional Startup Scripts=C:\Users\&lt;username&gt;\AppData\Local\Autodesk\3dsMax\&lt;year&gt;- 64bit\ENU\scripts\startup 
		</pre></div> 
               </li>
               <li> 
                  <p> 代币化的用户启动脚本路径： 
                     			 
                  </p> 
                  <div class="codeBlock"><pre> Startup Scripts=%NEW_3DSMAX_USER_SCRIPTS_ROOT%\startup, 
		</pre></div> 
                  <p> 其中 <span class="code">NEW_3DSMAX_USER_SCRIPTS_ROOT</span> 是环境变量的名称，其值是用户希望 3ds Max 用户定义脚本所在的位置。 
                     			 
                  </p> 
               </li>
            </ul> 
            <p> 详细信息： 
               		
            </p> 
            <p> 代币化路径的展开形式显示在 3ds Max 的用户界面中，并可通过 Maxscript 和 C++ API 访问。 不会阻止用户通过用户界面、Maxscript 或 C++ API 编辑/修改路径。对这些路径所做的更改不会覆盖配置文件中基于代币的设置。更改将仅在当前
               3ds Max 会话中有效。 
               		
            </p> 
            <p>如果环境变量代币展开失败，代币将原样保留在路径中，并将向 <span class="filePath">Max.log</span> 记录错误，但不会向用户显示任何错误。依赖这些路径的 3ds Max 功能可能会各自检测无效路径并对其做出不同反应，一些功能会弹出错误对话框，而其他功能则以比较静默的方式失败。 
               		
            </p> 
            <p> 不支持嵌套代币 
               		
            </p> 
            <p> </p> 
            <div class="section"><a name="SECTION_832D688DB63F422DBA28DDAB8B179CAA"></a> 
               <h3><a name="GUID-B5EE30F5-2F26-4BC5-A05B-7514E0F2CD63"></a> 支持的配置文件和路径
               </h3> 
               <p> 下面列出了支持代币展开的配置文件以及这些文件中的路径。 
                  		  
               </p> 
               <div class="section"><a name="SECTION_15B731AEEF19416C97C45CE8DD3C56C0"></a> 
                  <h4><a name="GUID-B7B51956-3927-4327-9F3B-84ED7031FCB2"></a> 3dsmax.ini
                  </h4> <a name="TABLE_6C350CBB5EFC48198589E190DFB9C930"></a><div class="table-not-ruled">
                     <table cellpadding="0" cellspacing="0" class="not-ruled">
                        <colgroup>
                           <col>
                           <col>
                        </colgroup>
                        <tr class="not-ruled-odd-row">
                           <td class="table-body"><em class="strong"> 部分 </em> 
                           </td>
                           <td class="table-body"><em class="strong"> 键 </em> 
                           </td>
                        </tr>
                        <tr class="not-ruled-even-row">
                           <td class="table-body"> <span class="code">Directories</span> 
                           </td>
                           <td class="table-body"> 支持的所有键 
                              						
                           </td>
                        </tr>
                        <tr class="not-ruled-odd-row">
                           <td class="table-body"> <span class="code">CuiConfiguration</span> 
                           </td>
                           <td class="table-body"> 当前热键 Dir 
                              						
                           </td>
                        </tr>
                        <tr class="not-ruled-even-row">
                           <td class="table-body"> <span class="code">PreRenderScriptDirs</span>  
                              						
                           </td>
                           <td class="table-body"> 以“Dir”开头的所有键 
                              						
                           </td>
                        </tr>
                        <tr class="not-ruled-odd-row">
                           <td class="table-body"> <span class="code">PostRenderScriptDirs</span> 
                           </td>
                           <td class="table-body"> 以“Dir”开头的所有键 
                              						
                           </td>
                        </tr>
                        <tr class="not-ruled-even-row">
                           <td class="table-body"> <span class="code">RenderPrestetsMruFiles</span>  
                              						
                           </td>
                           <td class="table-body"> 以“RenderPresetsMruFile”开头的所有键。请注意，可以覆盖它们。 
                              						
                           </td>
                        </tr>
                        <tr class="not-ruled-odd-row">
                           <td class="table-body"> <span class="code">Performance</span> 
                           </td>
                           <td class="table-body"> ArchiveProg 
                              						
                           </td>
                        </tr>
                     </table>
                  </div> 
               </div> 
               <div class="section"><a name="SECTION_6E2061AD83ED4007B06DB381CF9EDC16"></a> 
                  <h4><a name="GUID-C8BD3051-31EA-4CD8-B0AA-2C81BAD03079"></a><span class="filePath">ParticleFlowToolsBox3.ini</span></h4> 
                  <p> “Presets”部分中的所有路径都支持环境变量代币。 
                     			 
                  </p> 
               </div> 
               <div class="section"><a name="SECTION_3144292FEC88484281086FD706A7A1B4"></a> 
                  <h4><a name="GUID-F0268728-C221-41AF-9D97-002CA4CDE141"></a> <span class="filePath">MaxDotNet.config</span></h4> 
                  <p> “Plugin Directories”部分中的所有路径都支持环境变量代币。 
                     			 
                  </p> 
               </div> 
               <div class="section"><a name="SECTION_BEC80F41394B4218982D1605E092EE82"></a> 
                  <h4><a name="GUID-F6738F01-AFF3-4893-A073-951AA2363219"></a><span class="filePath">Plugin.ini</span> 和 <span class="filePath">Plugin.UserSettings.ini</span></h4> 
                  <p> “Directories”和“Include”部分中的所有路径都支持环境变量代币。 
                     			 
                  </p> 
               </div> 
            </div> 
            <div class="section"><a name="SECTION_FB816631979941ED917C84A6ADBD91BB"></a> 
               <h3><a name="GUID-EAF9D64B-322F-4B53-A922-7BF0FE79294A"></a> 在配置文件中自动代币化 3ds Max 安装路径
               </h3> 
               <p> 在配置文件（例如 <span class="filePath">3dsmax.ini</span>）中找到的多个路径指向 3ds Max 安装文件夹。如果因流程或其他要求而需要更改安装文件夹名称，更新配置文件中的路径意味着进行额外的工作并增加复杂性。为了解决该问题，3ds Max 现在支持在以下配置文件中自动代币化指向 3ds Max 安装文件夹的路径：
                  
                  		  
               </p> 
               <p> <a name="UL_06DBDD5A7FEC4512B390F4FB21449371"></a><ul>
                     <li> <span class="filePath">%LOCALAPPDATA%\Autodesk\3dsmax\&lt;年份&gt;- 64bit\&lt;语言&gt;\3dsmax.ini</span> 
                     </li>
                     <li><span class="filePath">%LOCALAPPDATA%\Autodesk\3dsmax\&lt;年份&gt;- 64bit\&lt;语言&gt;\plugcfg_ln\ParticleFlowToolsBox3.ini</span> 
                     </li>
                  </ul> 
               </p> 
               <p> <a name="UL_B575DE28593845BAA0DE59B6C3FB6A77"></a><ul>
                     <li> <span class="filePath">%LOCALAPPDATA%\Autodesk\3dsmax\&lt;年份&gt;- 64bit\&lt;语言&gt;\plugcfg\MaxDotNet.config</span> 
                     </li>
                     <li><span class="filePath">%HOMEPATH%\Documents\3ds Max&lt;年份&gt;\3ds Max 2021.mxp</span> 
                     </li>
                     <li> <span class="filePath">&lt;MaxInstall&gt;\&lt;语言&gt;\plugin.ini</span> 
                     </li>
                  </ul> 
               </p> 
               <p> 默认情况下，自动代币化 3ds Max 安装路径功能处于禁用状态。可以通过命令行开关或环境变量启用此功能，如下所示： 
                  		  
               </p> 
               <div class="codeBlock"><pre> ADSK_3DSMAX_ENVVAR_TOKEN_SUPPORT=1|0 
3dsmax.exe -envvartoken 
		  </pre></div> 
               <p> 启用自动代币化后，上述配置文件中 3ds Max 安装文件夹的根目录将替换为 <span class="code">%ADSK_3DSMAX_ROOT%</span> 环境变量代币。<span class="code">ADSK_3DSMAX_ROOT</span> 环境变量由 3ds Max 进程本身定义。用户无需定义它。 
                  		  
               </p> 
               <p> 例如，如果 3ds Max 已安装或部署到 <span class="filePath">C:\GameABC\ver1.2\3dsmax\2022\</span>，则 <span class="filePath">3dsmax.ini</span> 中的“Startup Scripts”键设置为 <span class="filePath">%ADSK_3DSMAX_ROOT%\scripts\startup</span>，其中 <span class="code">%ADSK_3DSMAX_ROOT%</span> 是 3ds Max 在运行时定义的环境变量，并设置为 <span class="filePath">C:\GameABC\ver1.2\3dsmax\2022</span>。 
                  		  
               </p> 
               <p><em class="strong"> 注： </em> 
               </p> 
               <p> <a name="UL_620D65F2E0A34946B2D3402E0BD402F1"></a><ul>
                     <li> 自动代币化路径不会影响配置文件中已存在的路径。也就是说，自动代币化最适合在 3ds Max 从头开始创建配置文件时使用。 
                        			 
                     </li>
                  </ul> 
               </p> 
               <p> <a name="UL_DEB9CE0F06494101920E045AB81BC498"></a><ul>
                     <li> 保存在 <span class="filePath">3dsmax.ini</span> 中的位图路径不会代币化（也不需要代币化）。这些路径是项目文件中相应路径的副本，是出于历史原因才存在的。如果安装文件夹发生变化，3ds Max 将自动更新 <span class="filePath">3dsmax.ini</span> 文件中的这些路径。 
                        			 
                     </li>
                  </ul> 
               </p> 
            </div> 
         </div>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>