<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-BCB04DEC-7967-4091-B980-638CFDFE47EC">
      <meta name="description" content="3ds Max 可以直接在命令行中输入脚本命令。从 DOS 命令行启动 3ds Max 后，可以运行指定的 MAXScript 或 Python 启动脚本。这对自动批处理渲染这样的任务来说非常有用。">
      <meta name="indexterm" content="命令行: MAXScript 选项">
      <meta name="indexterm" content="MAXScript: 命令行">
      <meta name="indexterm" content="Python: 命令行">
      <meta name="topic-type" content="topic">
      <title>从命令行运行脚本</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-BCB04DEC-7967-4091-B980-638CFDFE47EC"></a><div class="head">
            <h1>从命令行运行脚本</h1>
         </div>
         <p class="blurb"> <span class="charspan-msgph">3ds Max</span> 可以直接在命令行中输入脚本命令。从 DOS 命令行启动 <span class="charspan-msgph">3ds Max</span> 后，可以运行指定的 MAXScript 或 Python 启动脚本。这对自动批处理渲染这样的任务来说非常有用。 
            
         </p>
         <p><a name="WS73099CC142F487552A50A53111913E7C26F-6AF1"></a>当启动 <span class="charspan-msgph">3ds Max</span> 时，该功能使用 -U 命令行切换命名一个要运行的工具。-U 切换使用一个可选的附加参数，对 MAXScript 和 Python 来说，该参数是要运行的启动脚本名。MAXScript 的大小写（大写）必须如以下示例中所示（打开 CD 后进入
            <span class="charspan-msgph">3ds Max</span> 目录）： 
            	 
         </p>
         <div class="codeBlock"><pre>3dsmax -U MAXScript rendercams.ms</pre></div>
         <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F8"></a>此示例命令行将启动 <span class="charspan-msgph">3ds Max</span> 可执行文件，启用 MAXScript，然后让其运行启动脚本 <em class="mild">rendercams.ms</em>。 
            	 
         </p>
         <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F7"></a>在下例中，启动脚本加载两个场景，从各自的摄影机进行帧渲染，然后退出 <span class="charspan-msgph">3ds Max</span>： 
            	 
         </p>
         <div class="codeBlock"><pre>loadMaxFile "foo.max"
for c in cameras do render camera:c outputfile:("foo_"+c.name+".bmp")
loadMaxFile "baz.max"
for c in cameras do render camera:c outputfile:("baz_"+c.name+".bmp")
quitMax #noPrompt
</pre></div>
         <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F5"></a>在该例子中当脚本调用结束时，使用 quitMax() 方法退出 <span class="charspan-msgph">3ds Max</span>。启动脚本不一定是本例中的批处理脚本，但可以作为条件 <span class="charspan-msgph">3ds Max</span> 交互使用，例如加载一个场景文件并设置一些用户界面选项。 
            	 
         </p>
         <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F4"></a>通常的启动脚本为<em class="mild">startup.ms</em> 以及位于 <em class="mild">\scripts\startup</em> 目录中的其他脚本文件，在启动脚本之前运行。也可以在单独的场景文件中添加脚本，当场景打开或关闭或遇到其他事件的时候自动运行这些脚本。 
            	 
         </p>
         <div><a name="WS73099CC142F487551051018113CCCDB767-5CA"></a><div class="note-note"><span class="label label-target-language">注意:</span>在 <em class="mild"></em> <span class="charspan-msgph">3ds Max</span> 完全启动且标准脚本和启动脚本已运行后，运行命令行 -U MAXScript 启动脚本。 
               	 
            </div>
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044523"></a> 
            <h2><a name="GUID-0141D3E5-160C-4B29-A8D6-0CC1750B67EE"></a>MAXScript 和 Python 命令行开关
            </h2> 
            <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F3"></a>以下开关专门处理 MAXScript 和 Python 文件和函数。 
               		
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044524"></a><div class="table-ruled">
               <table cellpadding="0" cellspacing="0" class="ruled">
                  <colgroup>
                     <col width="24.9909974792942%">
                     <col width="75.0090025207058%">
                  </colgroup>
                  <tr class="ruled-heading">
                     <th class="table-heading">开关 
                        				  
                     </th>
                     <th class="table-heading">效果 
                        				  
                     </th>
                  </tr>
                  <tr class="ruled-odd-row">
                     <td class="table-body">-mi 
                        				  
                     </td>
                     <td class="table-body">以最小化模式启动 <span class="charspan-msgph">3ds Max</span> – 但绝不会允许您打开交互使用的窗口。 
                        				  
                     </td>
                  </tr>
                  <tr class="ruled-even-row">
                     <td class="table-body">-mxs 
                        				  
                     </td>
                     <td class="table-body">该切换本质上与<em class="mild">-U MAXScript file.ms</em> 相同，但取消了必须为 .ms 文件的限制。可以遵照具有 MAXScript 命令的开关。 
                        				  
                     </td>
                  </tr>
                  <tr class="ruled-odd-row">
                     <td class="table-body">-silent 
                        				  
                     </td>
                     <td class="table-body">与 MAXScript 命令相比，<em class="mild">setSilentMode</em> 开关会取消所有 MAXScript 和 <span class="charspan-msgph">3ds Max</span> UI 对话框，以使 -U 命令指定的批处理脚本不被中断。 
                        				  
                     </td>
                  </tr>
                  <tr class="ruled-even-row">
                     <td class="table-body">-u MAXScript <em class="mild">&lt;文件名&gt;</em> 
                     </td>
                     <td class="table-body">打开指定的 MAXScript 文件。 
                        				  
                     </td>
                  </tr>
                  <tr class="ruled-odd-row">
                     <td class="table-body">-u PythonHost <em class="mild">&lt;文件名&gt;</em> 
                     </td>
                     <td class="table-body">打开指定的 Python 脚本文件。 
                        				  
                     </td>
                  </tr>
               </table>
            </div> 
            <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F2"></a>语法示例： 
               		
            </p> 
            <div class="codeBlock"><pre>3dsmax.exe -silent -mxs "for c in cameras do render c outputFile:(c.name + \".bmp\") vfb:off " file.max</pre></div> 
            <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F1"></a>此示例将以静默模式启动 <span class="charspan-msgph">3ds Max</span>，打开 <em class="mild">file.max</em> 并将每个摄影机视图渲染为 BMP 文件，但不显示渲染帧窗口。请注意，传递的脚本内带引号的字符串需要转义。
               		
            </p> 
            <div class="codeBlock"><pre>3dsmax.exe -q -mi -U MAXScript \\server1\folder\myScript.ms \\server2\folder\file.max</pre></div> 
            <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9F0"></a>该示例以最小化状态启动 <span class="charspan-msgph">3ds Max</span> 后抑制初始屏幕，通过网络服务器打开 <em class="mild">file.max</em> 并运行另一个服务器上的 <em class="mild">myScript.ms</em>。如果 <em class="mild">myScript.ms</em> 包含第一个示例中的相同命令，那么这两个示例将得到相同的结果。 
               		
            </p> 
            <div class="codeBlock"><pre>3dsmax.exe -q -silent -mip -mxs  "for c in cameras do render c outputFile:(c.name + \".bmp\") vfb:on; quitMAX() #nopromptfile.max" file.max</pre></div> 
            <p><a name="WS1A9193826455F5FFBA679E112C9EF5A71-9EF"></a>最后一个示例会在以静默模式和永久最小化状态启用 <span class="charspan-msgph">3ds Max</span> 时取消启动屏幕，打开 <em class="mild">file.max</em>，将每个摄影机视图渲染为显示渲染帧窗口的 BMP 文件，然后退出 <span class="charspan-msgph">3ds Max</span>。 
               		
            </p> 
         </div>
         <div class="related-topics"><span class="noindex">
               <div class="related-information">
                  <h4 class="related">相关信息</h4>
                  <ul>
                     <li class="topiclist-litem"><a href="GUID-0968FF0A-5ADD-454D-B8F6-1983E76A4AF9.htm">关于 3ds Max Batch</a></li>
                  </ul>
               </div></span></div>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>