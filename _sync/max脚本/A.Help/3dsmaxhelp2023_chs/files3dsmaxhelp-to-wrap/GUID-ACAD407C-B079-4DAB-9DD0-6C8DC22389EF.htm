<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-ACAD407C-B079-4DAB-9DD0-6C8DC22389EF">
      <meta name="description" content="使用动画层功能可以将同一对象上的多个动画轨迹合并到一起。试用动画时，可以将不同的动画存储在层中，从而可以根据自己的喜好启用或禁用这些层，并可以将其与权重设置合并。在大多数情况下，使用此功能的最佳方法是通过“动画层”工具栏上的命令，在本主题的“界面”部分中对此进行了介绍。">
      <meta name="indexterm" content="动画层权重">
      <meta name="indexterm" content="禁用层">
      <meta name="indexterm" content="塌陷层">
      <meta name="indexterm" content="创建层">
      <meta name="indexterm" content="添加层">
      <meta name="indexterm" content="启用层">
      <meta name="indexterm" content="动画层">
      <meta name="indexterm" content="粘贴: 动画层（步骤）">
      <meta name="indexterm" content="复制: 动画层（步骤）">
      <meta name="indexterm" content="创建新贴图文件">
      <meta name="contextid" content="ANIMATION TOOLS-OPENANIMATIONLAYERS">
      <meta name="topic-type" content="topic">
      <title>动画层（层控制器）</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-ACAD407C-B079-4DAB-9DD0-6C8DC22389EF"></a><div class="head">
            <h1>动画层（层控制器）</h1>
         </div>
         <p class="blurb">使用动画层功能可以将同一对象上的多个动画轨迹合并到一起。试用动画时，可以将不同的动画存储在层中，从而可以根据自己的喜好启用或禁用这些层，并可以将其与权重设置合并。在大多数情况下，使用此功能的最佳方法是通过“动画层”工具栏上的命令，在本主题的“界面”部分中对此进行了介绍。
            
            
         </p><a name="UL_C6EF211E980447BEA623771645E07F96"></a><ul>
            <li> <span class="MenuCascade" id="GUID-76AA9298-6175-44B5-B04C-8DDDFFEC2EB9">右键单击任何工具栏的未使用区域。 <img src="../images/ac.menuaro.gif"> “动画层”</span> 
            </li>
            <li> <span class="MenuCascade" id="GUID-D4A60861-88A7-4D6A-837C-8D7AC1416357">默认菜单：“动画”菜单  <img src="../images/ac.menuaro.gif"> “动画层”</span> 
            </li>
            <li> <span class="MenuCascade" id="GUID-419E3278-6A1A-4C82-9718-FD5EDE71001B">Alt 菜单：“动画”菜单  <img src="../images/ac.menuaro.gif"> “工具(动画设置)” <img src="../images/ac.menuaro.gif"> “动画层”</span> 
            </li>
         </ul>
         <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4351"></a>动画层功能相当于列表控制器和 Biped 层系统的功能，但可使动画师更易于使用。它也更灵活。 
            
         </p>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044A7C"></a> 
            <h2><a name="GUID-7C9C4A3E-9720-41DF-B240-D790452354C1"></a>启用动画层
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4350"></a>在为选定对象启用动画层时，<span class="charspan-msgph">3ds Max</span> 将为您在“启用动画层”对话框中指定的每个动画轨迹指定一个层控制器。 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A7D"></a><div class="figure-anchor"><img src="../images/GUID-23FA51E9-20FE-4344-9988-3E1AAA98B2B8-low.png"></div>  
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-434F"></a>当 <span class="charspan-msgph">3ds Max</span> 添加层控制器时，它将原始控制器复制到第一层（叫做<em class="mild"></em>基础层），并保留它可能已经包含的所有动画数据。 
               
            </p> 
            <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E4FF"></a><div class="note-note"><span class="label label-target-language">注意:</span>基础层不是新层；它与任何其他控制器轨迹处于同一层级上。 
                  
               </div>
            </div> <a name="WS1A9193826455F5FFBA679E112A6A190044A7E"></a><div class="table-ruled">
               <table cellpadding="0" cellspacing="0" class="ruled">
                  <colgroup>
                     <col width="50.254841997961265%">
                     <col width="13.76146788990826%">
                     <col width="35.98369011213048%">
                  </colgroup>
                  <tr class="ruled-odd-row">
                     <td class="table-body"> <a name="WS1A9193826455F5FFBA679E112A6A190044A7F"></a><div class="figure-anchor"><img src="../images/GUID-EDD4D7FE-87B0-46CD-98D3-283CDE1925D1-low.png"><p class="figure-title">启用动画层之前的原始控制器</p>
                        </div> 
                     </td>
                     <td class="table-body">&nbsp; <a name="WS1A9193826455F5FFBA679E112A6A190044A80"></a><div class="figure-anchor"><img src="../images/GUID-B33DFF29-D6E3-49F0-8DBB-F34BA0E85213-low.png"></div> 
                     </td>
                     <td class="table-body"> <a name="WS1A9193826455F5FFBA679E112A6A190044A81"></a><div class="figure-anchor"><img src="../images/GUID-D03649DC-1AE6-41B4-88B7-6C1C61EF096D-low.png"><p class="figure-title">层控制器嵌套在原始控制器的基础层中。</p>
                        </div> 
                     </td>
                  </tr>
               </table>
            </div>   
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-434E"></a>要从层控制器还原到原始控制器，请单击动画层工具栏上的 <img src="../images/GUID-5D6A9A09-7E11-4BCA-8EF2-6866A96CD972-low.png">（禁用动画层）。请注意，仅当基础层存在时，“禁用”命令才可用；如果对象包含多个动画层，则首先需要删除这些动画层或使其塌陷。 
               
            </p> 
            <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E501"></a><div class="note-tip"><span class="label label-target-language">提示</span>也可以通过“层控制器”对话框来禁用层控制器。 
                  
               </div>
            </div> 
            <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E502"></a><div class="note-note"><span class="label label-target-language">注意:</span>禁用“启用动画层”对话框中的轨迹不会禁用它。 
                  
               </div>
            </div> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-434D"></a>可以在控制器轨迹的树叶层级（如材质的漫反射颜色轨迹），或树枝层级（如“位置”轨迹）指定层控制器。 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A82"></a><div class="table-ruled">
               <table cellpadding="0" cellspacing="0" class="ruled">
                  <colgroup>
                     <col width="53.822629969418955%">
                     <col width="46.17737003058104%">
                  </colgroup>
                  <tr class="ruled-odd-row">
                     <td class="table-body"> <a name="WS1A9193826455F5FFBA679E112A6A190044A83"></a><div class="figure-anchor"><img src="../images/GUID-60CAD7AF-3094-46C9-8403-F8E29E975157-low.png"><p class="figure-title">层控制器影响 Point3 树枝。</p>
                        </div> 
                     </td>
                     <td class="table-body"> <a name="WS1A9193826455F5FFBA679E112A6A190044A84"></a><div class="figure-anchor"><img src="../images/GUID-CD216D05-6AF1-4E4E-AE92-9F431149A558-low.png"><p class="figure-title">层控制器影响树叶轨迹。</p>
                        </div> 
                     </td>
                  </tr>
               </table>
            </div>   
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-434C"></a>如果启用层时所选对象已经具有列表控制器轨迹，则该控制器将保留在新的层控制器的基础层内。 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A85"></a><div class="table-ruled">
               <table cellpadding="0" cellspacing="0" class="ruled">
                  <colgroup>
                     <col width="46.88457609805924%">
                     <col width="16.751787538304395%">
                     <col width="36.36363636363637%">
                  </colgroup>
                  <tr class="ruled-odd-row">
                     <td class="table-body"> <a name="WS1A9193826455F5FFBA679E112A6A190044A86"></a><div class="figure-anchor"><img src="../images/GUID-D7573D50-D364-421A-9EF5-0D1A6E1F4042-low.png"><p class="figure-title">原始列表控制器</p>
                        </div> 
                     </td>
                     <td class="table-body">&nbsp; <a name="WS1A9193826455F5FFBA679E112A6A190044A87"></a><div class="figure-anchor"><img src="../images/GUID-B33DFF29-D6E3-49F0-8DBB-F34BA0E85213-low.png"></div> 
                     </td>
                     <td class="table-body"> <a name="WS1A9193826455F5FFBA679E112A6A190044A88"></a><div class="figure-anchor"><img src="../images/GUID-D0F7DB10-298C-4C5C-84AE-9EA6A0F2A248-low.png"><p class="figure-title">新的层控制器嵌套在列表控制器中。</p>
                        </div> 
                     </td>
                  </tr>
               </table>
            </div>   
            <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E503"></a><div class="note-note"><span class="label label-target-language">注意:</span>不能在列表控制器或另一个层控制器内嵌套层控制器。 
                  
               </div>
            </div> 
         </div>
         <div class="section"><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FD0"></a> 
            <h2><a name="GUID-4963D819-6B11-4FC7-9FC1-8B606554FF44"></a>使用动画层
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-434B"></a>“动画层”工具栏上的动画层列表的工作原理如下。有关常见的工作流示例，请参见此主题后面的“过程”部分。 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A89"></a><ul>
               <li>该列表为所选对象显示所有现有的层。如果所选对象尚未启用层，则将显示“（启用层）”。 
                  	 
               </li>
               <li>默认情况下，首次对对象启用层时，基础层为活动层。当您对对象启用层时，此层会存储任何现有的动画关键点。 
                  	 
               </li>
               <li>在对对象启用层后创建的每个层都将成为新的活动层，并显示在列表中前一个层之后。 
                  	 
               </li>
               <li>活动层存储所有新创建的动画关键点。 
                  	 
               </li>
               <li>选择对象时，将自动选择其活动层。在展开时，下拉列表将高光显示活动层。 
                  		<a name="WS1A9193826455F5FFBA679E112A6A190044A8A"></a><div class="figure-anchor"><img src="../images/GUID-9F606D2A-7D66-4202-9516-C145C1E2A28A-low.png"></div>  
               </li>
               <li>当选择拥有不同活动层的多个对象时，将出现“（多个活动层）”。 
                  		
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-434A"></a>下拉列表将显示所有可以共用的层（即名称相同）；不能共用的层不显示。 
                     		
                  </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A8B"></a><div class="figure-anchor"><img src="../images/GUID-A3FACABD-62A6-461E-971D-1342C17ED209-low.png"><p></p>
                     <p class="figure-title">选择多个对象时，下拉列表中将不显示不能共用的层。</p>
                  </div>  
               </li>
               <li>可以通过单击展开列表中任何层的灯泡图标来对其进行切换操作。禁用层会隐藏该层的动画而不会删除它。 
                  		<a name="WS1A9193826455F5FFBA679E112A6A190044A8C"></a><div class="figure-anchor"><img src="../images/GUID-E021DEC5-ED0E-4B77-83FB-15764F6F7F42-low.png"><p></p>
                     <p class="figure-title">要切换层，请单击它的电灯泡图标。</p>
                  </div>  
               </li>
               <li>可以通过单击“加号”或“减号”图标来从输出轨迹包含或排除任何层。输出轨迹包括所有包含层的动画。可以使用此轨迹，通过 MAXScript 和参数关联来控制其它对象的轨迹。 
                  		<a name="WS1A9193826455F5FFBA679E112A6A190044A8D"></a><div class="figure-anchor"><img src="../images/GUID-152F1F1E-BB34-4C2B-A31B-FC67297DB8E1-low.png"><p></p>
                     <p class="figure-title">要在输出轨迹中切换层的包含，请单击加号/减号图标。</p>
                  </div>  
                  <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E504"></a><div class="note-tip"><span class="label label-target-language">提示</span>有关演示如何使用此选项的步骤，请参见后面的“过程”部分中的“示例：要使用层控制器的输出轨迹将两个对象与连线参数相链接，请执行以下操作”。 
                        		
                     </div>
                  </div> 
               </li>
               <li>单击层的锁定图标即可对层进行锁定和解除锁定。如果层被锁定，便无法操纵层处于活动状态时所控制的任何对象属性（如运动）。 
                  		<a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D3D"></a><div class="figure-anchor"><img src="../images/GUID-22574967-BBD9-4349-9AF8-7912D72DB0C8-low.png"><p></p>
                     <p class="figure-title">要切换此功能以更改层中的动画，请单击该层的锁定图标。</p>
                  </div>  
               </li>
            </ul> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4349"></a>每个动画层都具有一个全局权重值，如果此值改变了，则将影响该活动层中的所有控制器。与列表控制器相似，可以为层的权重设置动画，并使用轨迹栏过滤器子菜单在“轨迹栏”中切换所得关键点的可见性。 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A8E"></a><div class="figure-anchor"><img src="../images/GUID-9F017EC6-1934-4855-8A3F-C7A429E17871-low.png"></div>  
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4348"></a>当添加新动画层时，可以选择一个已经在现有层中使用的名称；这将链接两个层的权重轨迹（目前为实例）。 
               
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044A8F"></a> 
            <h2><a name="GUID-6EDB9707-5DDC-4700-9AC3-2BD2A5AB02FC"></a>使用含有层的合并场景或 XRef 场景
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4347"></a>当将包含层的源场景（或对象）合并或外部参照到主场景时，系统会将传入的层添加到主场景的层列表中。 
               
            </p> 
            <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E505"></a><div class="note-note"><span class="label label-target-language">注意:</span>引入的 XRef 对象或场景中的所有动画都将保留在XRef 控制器中。除非将外部参照对象或外部参照控制器合并到主场景中，否则无法对其进行编辑。 
                  
               </div>
            </div> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4346"></a>如果合并的场景或外部参照场景中某个层的名称与主场景中某个层的名称相同，则两个层将变得同步，即权重轨迹将同时实例化到两个层上。 
               
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044A90"></a> 
            <h2><a name="GUID-75B012F0-89AB-41EC-A962-5966AA22BEF8"></a>塌陷层
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4345"></a>如满足以下条件，则塌陷层时会合并关键点： 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A91"></a><ul>
               <li>两个控制器类型相似（Bezier、Float、TCB 等）。 
                  	 
               </li>
               <li>它们具有相同类型的切线。 
                  	 
               </li>
               <li>“层控制器”对话框的“象四元数一样混合 Euler”选项已禁用。 
                  	 
               </li>
            </ul> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4344"></a>但是，很多因素可能会导致在每一帧上都有塌陷（即在每个帧上设置一个关键点）： 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A92"></a><ul>
               <li>一个控制器的类型为 TCB（四元数），另一个为 Bezier (Euler)。 
                  	 
               </li>
               <li>启用“层控制器”对话框的“象四元数一样混合 Euler”选项，并且两个旋转控制器都由 Euler 驱动。 
                  	 
               </li>
               <li>层控制器的“作为四元数混合 Euler”选项已禁用，且两个旋转控制器都为 Euler 驱动但都具有不同类型的切线。 
                  	 
               </li>
               <li>两个控制器都不可设置关键点。 
                  	 
               </li>
            </ul> 
         </div>
         <div class="section"><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FCF"></a> 
            <h2><a name="GUID-2D027C05-01B3-41BE-8349-7A37274DE944"></a>步骤：在工作流中集成动画层
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4343"></a>下面一系列步骤说明了如何在工作流中使用动画层来为同一对象快速创建并合并不同的动画轨迹。要完成以下步骤，您必须首先具备有关制作动画和创建关键点的基础知识。 
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A93"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190044A94"></a>示例：要启用层，请执行以下操作：
            </p>
            <ol type="1" start="1">
               <li>创建一个茶壶，然后启用 <img src="../images/GUID-859D11E8-44CA-4A08-A696-F5A17CA856E0-low.png"> 并在第 15 帧和第 30 帧处 <img src="../images/GUID-5D7D7630-6D16-400D-AE6F-87F13C97DEA2-low.png"> 移动茶壶来创建一个短动画。 
                  		
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6A76"></a>默认情况下，还会同时在第 1 帧处创建一个关键点。起始关键点可能在第 0 帧处；就本示例而言，这一点无关紧要。 
                     		
                  </p> 
               </li>
               <li>在主工具栏上，选择“动画”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“动画层”。 
                  		
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6A75"></a>这将打开动画层工具栏。 
                     		
                  </p> 
               </li>
               <li>确保茶壶已选定，然后单击 <img src="../images/GUID-D438629C-A674-481E-BE6C-4E5864E1D08C-low.png">（启用动画层）。 
                  	 
               </li>
               <li>在“启用动画层”对话框，仅启用“位置”轨迹，然后单击“确定”。 
                  		
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4342"></a>现在，新的层控制器将嵌套茶壶的动画。 
                     		
                  </p> 
               </li>
            </ol> <a name="WS1A9193826455F5FFBA679E112A6A190044A95"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190044A96"></a>示例：要添加层并更改其控制器类型，请执行以下操作：
            </p>
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4341"></a>这是上一个步骤的继续，将为已设置动画的对象启用层。 
               
            </p>
            <ol type="1" start="1">
               <li>在“动画层”工具栏上，单击 <img src="../images/GUID-85353FE8-1A5E-4F60-93C9-BF9B835DF998-low.png">（添加动画层）。 
                  
               </li>
               <li>在“创建新动画层”对话框中，输入“噪波层”以作为名称，然后单击“确定”。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4340"></a>现在，茶壶具有两个动画层，每个动画层都可以包含一个能够彼此独立控制的单独的动画。 
                     	 
                  </p> 
               </li>
               <li>右键单击该茶壶，然后从上下文菜单中选择曲线编辑器。在左侧的层次列表中，向下滚动至 Teapot01 对象。按以下顺序展开层次：“Teapot01”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“变换”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“位置”。 
                  	 
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6A74"></a>在“位置”层下，您将看到“基础层”、“噪波层”、两个“权重轨迹”和“输出” 
                     	 
                  </p> 
               </li>
               <li>高亮显示<em class="mild">噪波层</em>，然后右键单击它。 
                  
               </li>
               <li>从上下文菜单中，选择“指定控制器”，并拾取“噪波位置”控制器。 
                  
               </li>
               <li>这将打开“噪波控制器”对话框。不对选项做出任何更改，关闭对话框。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-433F"></a>有两个不同的控制器现在正在驱动茶壶的位置。 
                     	 
                  </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A97"></a><div class="figure-anchor"><img src="../images/GUID-D27E9D79-43DF-43E9-86E0-0957C7D4C363-low.png"></div>  
               </li>
               <li> <img src="../images/GUID-5B32F2AB-610D-42BB-8C54-81463BE72359-low.png"> 播放该动画以了解在茶壶沿原来动画路径移动时的抖动情况。 
                  
               </li>
            </ol> <a name="WS1A9193826455F5FFBA679E112A6A190044A98"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190044A99"></a>示例：要启用和禁用层，请执行以下操作：
            </p>
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-433E"></a>该步骤讨论启用和禁用现有层。从上一步继续。 
               
            </p>
            <ol type="1" start="1">
               <li>在“动画层”工具栏，展开下拉列表。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-433D"></a>该列表目前包含前面步骤中的原始基础层和<em class="mild">噪波层</em>。 
                     	 
                  </p> 
               </li>
               <li>在列表中移动光标，然后单击<em class="mild">噪波层</em> 旁边的灯泡图标。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-433C"></a>执行此操作将禁用层，并对其余轨迹隐藏“噪波”控制器轨迹。 
                     	 
                  </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A9A"></a><div class="figure-anchor"><img src="../images/GUID-4F1ED810-2621-4A5A-AF38-BE93B86C7D4B-low.png"></div>  
               </li>
               <li>拖动时间滑块，并注意茶壶如何不再抖动。 
                  
               </li>
               <li>尝试启用和禁用列表中的层以查看结果。完成后，启用这两个层。 
                  
               </li>
            </ol> <a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D3C"></a><p class="list-intro"><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D3B"></a>示例：锁定和解除锁定层：
            </p>
            <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D3A"></a>这个过程讨论了锁定和解除锁定层。从上一步继续。 
               
            </p>
            <ol type="1" start="1">
               <li>如果“基础层”尚未处于活动状态，请在动画层工具栏上展开下拉列表并选择“基础层”。 
                  
               </li>
               <li>确保 <img src="../images/GUID-48CE32A3-32F5-433A-B89D-C6F12E6A7C44-low.png"> 已启用，然后转到第 20 帧处并移动茶壶以设置一个新动画关键点。 
                  	 
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D37"></a>现在，<img src="../images/GUID-5B32F2AB-610D-42BB-8C54-81463BE72359-low.png"> 播放动画时便将新的关键点包含在内。 
                     	 
                  </p> 
               </li>
               <li>在“动画层”工具栏，展开下拉列表。在“基础层”的列表条目上，单击锁定图标即可使其显示为已锁定状态。 
                  	 <a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D35"></a><div class="figure-anchor"><img src="../images/GUID-2D0A20FF-6BF2-40F6-A0BC-F5DAED2B6971-low.png"></div>  
               </li>
               <li>在“基础层”仍处于活动状态的情况下，尝试移动茶壶。 
                  	 
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D33"></a>您将无法移动茶壶，因为该层已锁定。这样可防止该层上的动画被意外更改。 
                     	 
                  </p> 
               </li>
               <li>打开“轨迹视图”并查找“位置”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif"> 茶壶的“基础层”轨迹，然后展开它。高亮显示“X 位置”轨迹（或“Y 位置”轨迹、“Z 位置”轨迹），然后右键单击高亮显示的轨迹，从四元菜单的左上角区域中选择“解除锁定”。 
                  	 
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D31"></a>“基础层”轨迹的后面不再显示“(锁定)”文本。 
                     	 
                  </p> 
               </li>
               <li>返回“动画层”对话框并选中“基础层”锁定图标。 
                  	 
                  <p><a name="WS1A9193826455F5FF-5187222B11EEADCDC61-6D2F"></a>该层便不再锁定。这显示了在动画层中锁定和解除锁定轨迹将影响该层控制的<em class="mild">所有</em>轨迹。 
                     	 
                  </p> 
               </li>
            </ol> <a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FCE"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190044A9B"></a>示例：要使用层控制器的输出轨迹将两个对象与参数相链接，请执行以下操作：
            </p>
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-433B"></a>此步骤是使用输出轨迹，通过连线参数控制立方体位置的一种便捷方法。从上一步继续。 
               
            </p>
            <ol type="1" start="1">
               <li>确保“动画层”工具栏上列出的两个层都处于启用状态，如灯泡图标所示。 
                  
               </li>
               <li>创建茶壶旁边的长方体。 
                  
               </li>
               <li>右键单击它，然后从四元菜单中选择连线参数。 
                  
               </li>
               <li>导航弹出菜单并选择 Z 位置。 
                  	 <a name="WS1A9193826455F5FFBA679E112A6A190044A9C"></a><div class="figure-anchor"><img src="../images/GUID-FF8E0C44-B124-41AF-94D7-0C21EAC4C5F6-low.png"></div>  
               </li>
               <li>此时将出现一条虚线。单击茶壶，然后从四元菜单中选择 X 输出轨迹。 
                  	 <a name="WS1A9193826455F5FFBA679E112A6A190044A9D"></a><div class="figure-anchor"><img src="../images/GUID-902F07F6-B552-47A8-9562-656C673BE016-low.png"></div>  
               </li>
               <li> <span class="charspan-msgph">3ds Max</span> 随即打开“参数关联”对话框并高亮显示两个参数。单击左方向箭头按钮，以使用茶壶的动画来控制立方体的位置。 
                  	 <a name="WS1A9193826455F5FFBA679E112A6A190044A9E"></a><div class="figure-anchor"><img src="../images/GUID-E4724C37-3533-4239-8968-E579315C5042-low.png"></div>  
               </li>
               <li>单击“连接”，然后关闭对话框。拖动时间滑块，并注意 Z 中的立方体位置如何与 X 中的茶壶的分层动画相匹配。 
                  
               </li>
               <li> <img src="../images/GUID-AEA0DCE7-AEB5-4739-B941-449CC7232C3F-low.png"> 选择茶壶，并从“动画层”工具栏展开层列表。 
                  
               </li>
               <li>单击<em class="mild">噪波层</em> 旁边的加号图标。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-433A"></a>这样做将会从输出轨迹中排除层。 
                     	 
                  </p> <a name="WS1A9193826455F5FFBA679E112A6A190044A9F"></a><div class="figure-anchor"><img src="../images/GUID-34269DF4-9A9B-4709-ABAC-DA8ECFCABCB5-low.png"></div>  
               </li>
               <li>再次拖动时间滑块。立方体不能像茶壶一样无规律地移动。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4339"></a>尝试包含和排除列表中的两个层以查看结果。 
                     	 
                  </p> 
               </li>
            </ol> <a name="WS1A9193826455F5FFBA679E112A6A190044AA0"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190044AA1"></a>示例：要复制和粘贴层并更新活动层，请执行以下操作：
            </p>
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4338"></a>此步骤从上一步骤继续，并只聚焦在茶壶上。 
               
            </p>
            <ol type="1" start="1">
               <li>确保选择茶壶，并从动画层列表中选择基础层，以使其处于活动状态。 
                  
               </li>
               <li>在“动画层”工具栏上，单击 <img src="../images/GUID-3E0DFF53-8B1D-40C7-B503-7049AECCA210-low.png">（复制动画层）以缓冲该层及其包含的数据。 
                  
               </li>
               <li> 单击 <img src="../images/GUID-6A0C6925-02B3-4B1E-B34B-BEE8E4D97BC8-low.png">（粘贴新层）。在“重命名动画层”对话框中，输入“Z 轴上的更改”以作为名称，然后单击“确定”。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4337"></a>新层变为活动层。 
                     	 
                  </p> 
               </li>
               <li>启用 <img src="../images/GUID-48CE32A3-32F5-433A-B89D-C6F12E6A7C44-low.png"> 后，在 Z 轴上的第 5 帧和第 20 帧处移动茶壶。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4336"></a>更新动画仅会影响活动层的位置轨迹。 
                     	 
                  </p> <a name="WS1A9193826455F5FFBA679E112A6A190044AA2"></a><div class="figure-anchor"><img src="../images/GUID-42CE345D-3C33-4F61-B69B-9429E7047873-low.png"></div>  
               </li>
            </ol> <a name="WS1A9193826455F5FFBA679E112A6A190044AA3"></a><p class="list-intro"><a name="WS1A9193826455F5FFBA679E112A6A190044AA4"></a>示例：要塌陷层，请执行以下操作：
            </p>
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4335"></a>该步骤从上一步骤继续。 
               
            </p>
            <ol type="1" start="1">
               <li>在动画层列表中，禁用<em class="mild">噪波层</em>。然后选择 <em class="mild">Z 轴上的更改</em> 来激活它。 
                  
               </li>
               <li>在“动画层”工具栏上，单击 <img src="../images/GUID-CADD183F-8730-404D-98C2-1D5D263852BE-low.png">（塌陷动画层）。 
                  	 
                  <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4334"></a> 此操作将把该层合并到下一个可用层（基础层）上，跳过已禁用的<em class="mild">噪波层</em>。 
                     	 
                  </p> 
               </li>
               <li>返回到列表中的<em class="mild">噪波层</em>。 
                  
               </li>
            </ol> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FF103859C11318F51BDD-4333"></a> 
            <h2><a name="GUID-F5B2D810-1AD3-4868-BD38-9F19A771DF52"></a>界面
            </h2> <a name="WS1A9193826455F5FFBA679E112A6A190044AA5"></a><div class="figure-anchor"><img src="../images/GUID-0B9379E4-9BD8-42D4-8C90-C92869F3E791-low.png"></div>  <a name="GUID-760CABCD-64B1-43F4-B229-A5FAE5E91364"></a><dl>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78AA"></a><span class="term"><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FCD"></a> <img src="../images/GUID-D438629C-A674-481E-BE6C-4E5864E1D08C-low.png"> 启用动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A90"></a>  
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA8752714"></a>为指定的轨迹分配一个层控制器。 
                        
                     </p> 
                     <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E506"></a><div class="note-note"><span class="label label-target-language">注意:</span>启用动画层不会创建新层，但会将所有选定的控制器轨迹（请参见下文）传送到基础层。 
                           
                        </div>
                     </div> 
                     <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4332"></a>此操作将打开“启用动画层”对话框，可以使您启用要将层控制器指定到的轨迹。 
                        
                     </p> <a name="WS1A9193826455F5FFBA679E112A6A190044AA8"></a><div class="figure-anchor"><img src="../images/GUID-23FA51E9-20FE-4344-9988-3E1AAA98B2B8-low.png"></div>  
                     <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4331"></a>默认情况下，位置、旋转和缩放轨迹都处于启用状态。您仍然可以为该对话框上那些已启用的属性之外的属性设置动画，但这些属性不受“层”控制器的控制。 
                        
                     </p> 
                     <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E507"></a><div class="note-note"><span class="label label-target-language">注意:</span>一旦为某个轨迹类型启用动画层，便只能通过禁用各自的层控制器才能禁用动画层。 
                           
                        </div>
                     </div> 
                     <p><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FCC"></a>如果为运动混合器中已经加载动画的对象启用了动画层，则将打开以下对话框： 
                        
                     </p> <a name="WS1A9193826455F5FFBA679E112A6A190044AA9"></a><div class="figure-anchor"><img src="../images/GUID-E65C9129-F53E-440F-9C66-BD07E6E10698-low.png"></div>  
                     <p><a name="WS1A9193826455F5FF103859C11318F51BDD-4330"></a>在这种情况下，重新贴图很有必要，因为启用“动画层”会使整个控制器的名称改变。例如，如果球体的 X 位置轨迹在启用“动画层”之前为 Sphere01\Transform\Position\X Position，则启用“动画层”之后，可能会变为 Sphere01\Transform\Position\Base
                        Layer\X Position（层名称被插入到控制器名称中）。 
                        
                     </p> 
                     <p><a name="WS1A9193826455F5FF103859C11318F51BDD-432F"></a>如果接受默认的对话框选项以自动创建新的贴图文件，则 <span class="charspan-msgph">3ds Max</span> 将自动生成任何必要的 XMM 文件，且该文件与 XAF 文件同名，然后将这些 XMM 文件放到与原始贴图文件相同的目录中，或者如果贴图文件不存在，则将其放置在与 XAF 文件相同的目录中。之后，打开此场景文件时，会自动加载贴图文件，而且不需要其他贴图。
                        
                        
                     </p> 
                     <p><a name="WS1A9193826455F5FF103859C11318F51BDD-432E"></a>但是，如果在单击“确定”之前，取消“是否自动创建新贴图文件？”，将不生成任何贴图文件，并且下次打开场景文件时将提示您创建贴图文件。如果没有贴图文件，则动画不会正确显示。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A9"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-432D"></a> <img src="../images/GUID-3D878A9E-A712-4C64-A8AB-C381A4A99778-low.png"> 选择活动层对象</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A8F"></a> 选择场景中属于活动层的所有对象。 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A8"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-432C"></a>[动画层列表]</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A8E"></a> 为选定对象列出所有现有层。列表中的每个层都含有切换图标，用于启用和禁用层以及从控制器输出轨迹包含或排除层。通过从列表中选择来设置活动层。 
                     
                     <p><a name="GUID-5C95C660-1A7C-4FA6-9E55-32DCD1136A66"></a>请参见本主题之前的“使用动画层”。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A7"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-432B"></a>[权重]</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A8D"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA8752717"></a>设置活动层的全局权重，这将影响到活动层（例如基础层）是否由多个对象共享。更改其权重会影响所有层。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A6"></a><span class="term"><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FCB"></a> <img src="../images/GUID-F168E200-FB91-42E7-AD03-7EAC66657213-low.png"> 动画层属性</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A8C"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA8752718"></a>打开“层”控制器的“层属性”对话框，其中提供了动画层的全局选项。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A5"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-432A"></a> <img src="../images/GUID-85353FE8-1A5E-4F60-93C9-BF9B835DF998-low.png"> 添加动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A8B"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA8752719"></a>打开“创建新动画层”对话框，可以指定与新层相关的设置。执行此操作将为具有层控制器的各个轨迹添加新层。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A4"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-4329"></a> <img src="../images/GUID-72E81325-B471-4B42-B859-08005C602C76-low.png"> 删除动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A8A"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA875271A"></a>移除活动层以及它所包含的数据。删除前将会出现提示确认对话框。 
                        
                     </p> 
                     <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E508"></a><div class="note-note"><span class="label label-target-language">注意:</span>无法删除基础层。相反，要完全移除层控制器，单击 <img src="../images/GUID-5D6A9A09-7E11-4BCA-8EF2-6866A96CD972-low.png">（禁用动画层）。 
                           
                        </div>
                     </div> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A3"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-4328"></a> <img src="../images/GUID-3E0DFF53-8B1D-40C7-B503-7049AECCA210-low.png"> 复制动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A89"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA875271B"></a>复制活动层的数据，并启用“粘贴活动动画层”和“粘贴新层”。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A2"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-4327"></a> <img src="../images/GUID-AE6FB4B8-8186-46CC-A0D1-4A4140FA456B-low.png"> 粘贴活动动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A88"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA875271C"></a>用复制的数据覆盖活动层控制器类型和动画关键点。 
                        
                     </p> 
                     <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E509"></a><div class="note-note"><span class="label label-target-language">注意:</span>无法将复制的层从一个对象粘贴到另一个对象上。 
                           
                        </div>
                     </div> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A1"></a><span class="term"><a name="WS1A9193826455F5FF103859C11318F51BDD-4326"></a> 粘贴新层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A87"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA875271D"></a>使用复制层的控制器类型和动画关键点创建新层。打开“重命名动画层”对话框，在该对话框中可以使用默认的层名称或输入新名称。 
                        
                     </p> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-78A0"></a><span class="term"><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FCA"></a> <img src="../images/GUID-CADD183F-8730-404D-98C2-1D5D263852BE-low.png"> 塌陷动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A86"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA875271E"></a>只要活动层尚未禁用，则可以将它塌陷至其下一层。如果活动层已禁用，则已塌陷的层将在整个列表中循环，直到找到可用层为止。 
                        
                     </p> 
                     <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E50A"></a><div class="note-note"><span class="label label-target-language">注意:</span>塌陷层并不会移除层控制器。要移除它，请单击“禁用动画层”。 
                           
                        </div>
                     </div> 
                  </div>
               </dd>
               <dt><a name="WS1A9193826455F5FF-4F542F6211C68D07B4A-789F"></a><span class="term"><a name="WSF742DAB041063133-128E6F4112A1CE6C39-7FC9"></a> <img src="../images/GUID-5D6A9A09-7E11-4BCA-8EF2-6866A96CD972-low.png"> 禁用动画层</span></dt>
               <dd>
                  <div class="definition"><a name="WS1A9193826455F5FF-4855151011E22F62443-5A85"></a> 
                     <p><a name="WS1A9193826455F5FF1DBC298511635BEA875271F"></a>从所选对象移除层控制器。基础层上的动画关键点还原为原始控制器。将出现一个对话框，以提示您进行确认。 
                        
                     </p> 
                     <div><a name="WS1A9193826455F5FFBA22E1113C6C30C0E50B"></a><div class="note-note"><span class="label label-target-language">注意:</span>在禁用基础层之前，必须删除或塌陷以上的所有层。 
                           
                        </div>
                     </div> 
                  </div>
               </dd>
            </dl> 
         </div>
         <div class="related-topics"><span class="noindex">
               <div class="related-information">
                  <h4 class="related">相关信息</h4>
                  <ul>
                     <li class="topiclist-litem"><a href="GUID-70D656D0-63E3-4A26-B31C-1915DE35BB28.htm">列表控制器</a></li>
                     <li class="topiclist-litem"><a href="GUID-1D2FBDE2-55A3-4788-90F8-884A60EEFA6F.htm">“层”卷展栏</a></li>
                     <li class="topiclist-litem"><a href="GUID-A55E4702-263E-4768-9964-5866698784DA.htm">轨迹栏</a></li>
                     <li class="topiclist-litem"><a href="GUID-3C61E27E-27EC-44E5-B9AE-42B5213C2FE4.htm">“合并文件”对话框</a></li>
                     <li class="topiclist-litem"><a href="GUID-487E7E7D-25B2-4380-B9E5-64C478C88E1F.htm">外部参照 (XRef)</a></li>
                     <li class="topiclist-litem"><a href="GUID-D34EF40C-A420-4FE4-A372-CB6BFB46A8B0.htm">XRef 控制器</a></li>
                     <li class="topiclist-litem"><a href="GUID-A4F4A6A6-27A9-482C-9A95-853B1ADC68C4.htm">运动混合器</a></li>
                  </ul>
               </div></span></div>
         <div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>