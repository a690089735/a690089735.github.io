---
layout: post
title: 3dsmax疑难杂症和治疗方案
date: 2020-08-21 09:27:13.00 +08:00
categories: 经验
tags: 3dsmax
comments: false
typora-root-url: ..
---

因为平常主要在绑定和动画方面用的多,所以遇到的问题更有偏向性一点,也会更冷门一些.

### 病毒类的

**3dground的免费工具Prune Scene支持全版本的max自动杀毒和主动防御以及批量查杀,支持中文(我用尽量准确客观的方式翻译的语言包,语言包提交给了官方).**
而且Prune Scene安装后只需要启动一次,设置好主动防御就行,后续完全没有多余的打扰.([下载地址](https://github.com/3DGROUND/Prune-Scene/blob/master/PruneScene.mzp?raw=true)和[3dground官方页面](https://3dground.net/en/prod/prune-scene-2180817))
2014及以下,建议使用Prune Scene,2015以上可以安装旧版官方杀毒.2017以上可以安装新版官方杀毒.更高版本已经内置了防病毒功能.
注意高版本的官方安全设置(禁止运行第三方工具)有时可能需要关闭才能正常使用一些常用工具.

> Prune Scene 是共享软件,就是你可以免费用,要是喜欢的话,可以付费再买个正式版,正式版多一个自动联网更新的功能.
> <img src="./assets-images/2020-08-21-经验-3dsmax问题解决-imgs/image-20230209152054830.png" alt="image-20230209152054830" style="zoom: 67%;" />



### 四元视口切换快捷键`Alt+W`无效.

这个问题只在2020年以后的新版QQ出现.主要是PC版QQ多了一个语音输入的功能,其快捷键与max冲突.清除设置即可.虽然也可以更改max快捷键来解决,但是这么常用的快捷键,QQ还是往后站吧.
<img src="/assets-images/2020-08-21-经验-3dsmax问题解决-imgs/QQ截图20200821092311.png" alt="QQ截图20200821092311" style="zoom:67%;" />

### Biped手脚骨骼不能正常移动

- 这是个极小概率出现的稳定问题.(可手动重现),但很难找到问题原因.
- 在max2014中,当某个物体A(比如某个虚拟体)开启了轨迹显示,然后在显示面板按类型隐藏了物体A后,Bip会发生此Bug.
- 可以关闭所有隐藏物体的轨迹,或者把物体A显示出来.

### 打开角色动画,动画错乱

- 当自定义绑定中含有样条线蒙皮绑定时,如果保存文件的时候时间轴起始帧不是0,再次打开动画会错乱.
- 错乱的动画以0帧再保存一遍可恢复正常.
- 请以0帧为起始帧保存.
- 测试2014-2018都有此问题.

### 除了默认的右键四元菜单,其他四元菜单均卡死

**使用旧版微软拼音输入法**
比如使用Alt+右键,呼出动画四元菜单.整个窗口完全卡死.点击窗口外(窗口丢失激活状态后)才能恢复.且所有版本都会发生这个问题.
<img src="/assets-images/2020-08-21-经验-3dsmax问题解决-imgs/右键菜单不能选择.gif" alt="右键菜单不能选择" style="zoom:50%;" />
这个问题是Windows更新中的新版输入法导致的,这次更新的2004号更新,使用了新版的微软拼音输入法,与max产生了不明原因的冲突.解决方法只能是暂时使用旧版输入法.
微软可能预先考虑到了这种意外情况,所以新版输入法的设置中多了一个选项 `使用以前版本的微软拼音输入法`
勾选打开即可.
<img src="/assets-images/2020-08-21-经验-3dsmax问题解决-imgs/image-20200910175446794.png" alt="image-20200910175446794" style="zoom: 67%;" />

### IK链剧烈抖动

1通常是由于单位过小,精度不够那么细致了才导致的.可以调整精度值解决.或者只有两段IK的话,用limbIK可以很好的避免抖动.
2但是我遇到的情况比较特殊.我的原因是因为对IK目标做了位置约束并开启了相对偏移,而约束的目标是另一个IK目标...这应该是个Bug,在我把约束目标换成普通物体之后,就不抖了.
应该是内部的计算逻辑问题,建议规避.
(一开始以为是版本问题或者软件内部临时性错误,重启了几次,换了一些高版本打开,结果版本越高,抖的越吓人.)

### Vray渲染严重闪烁^图像存在随机半透明^

这个问题曾经导致我把近千帧的动画反复渲染了几遍,开始以为是光线问题,用了各种去闪烁插件,后来发现是透明问题,又反复叠加序列.花了大量时间也只能达到一个并不完美的效果.
一般闪烁的问题都会是因为光子或射线的反射采样太低,结果几次对比之后发现闪烁的原因竟然是部分帧有随机的透明,alpha在0.9-0.01之间...
最后豁出去一晚上排查了出来.实际上只是因为当时用高版Vray还是高版Max保存的文件,在低版本打开后,有一项采样的选项不能被识别,自动丢失了设置.而其他的设置完好无损,所以很难排查.
我的是选择渲染块和渐进式渲染那里,处于一个什么都没选的空白状态.只要把这个空白的错误选项重新选择一下,就好了.

### 添加Morpher(变形器)等修改器后,模型呈块面显示

这个问题是因为Morpher在某些情况下不能取到模型上保存的自定义法线,而模型又没有设置平滑组.想平滑显示不变,可以在变形器的上面加一个编辑法线(不推荐),也可以指定一下底层的平滑组(推荐).

### 该程序不能在hyper-v下运行

hyper-v是一个windows虚拟化服务,按理说和max的运行没什么关系.
遭遇此提示时,我发现程序卡在加载Vray的过程.但是vray应该没有什么太矫情的地方,况且之前一切正常.
考虑到问题出现的时机,**卸载大黄蜂云课堂**后重启电脑之后,max可正常启动.
应该是Vray和大黄蜂云课堂的一些检测虚拟机的服务冲突了.

### BonesPro导出到Skin权重不一致

**删除BonesPro修改器上的关键帧.**
BonesPro的各个权重参数,会在AutoKey自动关键帧模式下被记录关键帧,虽然最终效果看起来仍然没问题,但是底层还是按时间记录了不同的数值状态.导出时只会取第0帧的状态,所以一些调整过的数值就会丢失了.
还有时删了帧也不行,需要用脚本暴力导出权重.(估计也是关键帧的事,这个关键帧可能记到了什么奇怪的地方,删不到它)

### 拖动文件到窗口有时会直接合并

![image-20230209150003086](./assets-images/2020-08-21-经验-3dsmax问题解决-imgs/image-20230209150003086.png)
当禁用视口的时候,"拖放文件到视口"的操作会由"弹出菜单"变成"合并文件".
禁用哪个视口,哪个视口就会直接合并文件.理解了这一点的话,这个特性也可以当作一个功能来用.

### Max昨天用着还好好的,今天就打不开了,一打开崩溃

**大多数情况可以通过删除配置文件来解决**

### Max怎么都按不上

**看看是不是路径有中文(安装包和安装路径都看看)**

### 安装了新的Max,默认打开方式变了

**可以通过安装一个想要的版本的更新包,或者改变注册表键值来解决.**
-----max文件关联 注册表-----
"C:\Program Files\Autodesk\3ds Max 2014\\3dsmax.exe" "1%"
计算机\HKEY_CLASSES_ROOT\3dsmax\Shell\Open\Command\3dsmax\DefaultIcon(图标)
计算机\HKEY_CLASSES_ROOT\3dsmax\Shell\Open\Command\3dsmax\shell\open\Command(路径)
计算机\HKEY_CLASSES_ROOT\3dsmax\Shell\Open\Command\3dsmax\shell\open(名字)
(修改以上注册表的内容,可以更改max文件相关联的max程序,从而做到**更改默认启动的max版本,**填写格式按照第一句来写,把路径改为自己的安装路径)

### 多个Max安装的时候,不同的安装顺序,可以加速Max安装速度吗?

不论按版本从高到低,还是按版本从低到高安装,3dmax所需要的依赖库的总数应该是一样的.
但是极小概率情况下,按版本从高到底确实可能减少安装依赖库的总数.
假设2090版使用了.net16.3.5的库,如果2080也使用了这个库,这个库就可以跳过安装,但是反过来先安装2080也是一样的
不过小概率情况是:2090版使用了.net16.3.5的库,2080使用的是.net16.0.4的库,但.net16库向下兼容,按从高到底的顺序就可以少按一个库.
但这种情况很少,即使发生了也节省不了太多时间,还是按自己的需求为主.

### Max开启缩略图预览

![img](./assets-images/2020-08-21-经验-3dsmax问题解决-imgs/175932pwfkxxaq19exkq44.png)

**在cmd中运行此命令:**
regsvr32 "C:\Program Files\Autodesk\3ds Max 2014\MaxThumbnailShellExt.dll"
其中3ds Max 2014可以改成你自己的版本比如3ds Max 2020
开启max文件缩略图时可能提示失败,是因为文件夹权限不够(可能是防病毒问题,也可能是用户设置问题,也可能是中毒了),可以试试用带管理员权限的CMD(或powershell),然后再执行上面的命令即可
