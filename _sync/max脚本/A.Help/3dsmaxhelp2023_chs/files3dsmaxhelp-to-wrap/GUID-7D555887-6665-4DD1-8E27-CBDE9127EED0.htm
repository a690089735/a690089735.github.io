<!DOCTYPE html><html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="3DSMAX">
      <meta name="release" content="2023">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2022-03-27">
      <meta name="topicid" content="GUID-7D555887-6665-4DD1-8E27-CBDE9127EED0">
      <meta name="description" content="HI（历史独立）解算器在时间上不依赖于上一个关键帧计算得到的 IK 解决方案，因此无论在第 2000 帧处还是在第 20 帧处使用 HI 解算器，其速度都一样快。">
      <meta name="indexterm" content="设置动画: 使用 IK 解算器">
      <meta name="indexterm" content="HI IK 解算器">
      <meta name="indexterm" content="IK 解算器">
      <meta name="indexterm" content="重叠 IK 链">
      <meta name="indexterm" content="IK: 重叠链">
      <meta name="indexterm" content="控制对象 (IK)">
      <meta name="indexterm" content="历史独立型 IK 解算器">
      <meta name="contextid" content="INVERSE KINEMATICS-HI_IK">
      <meta name="topic-type" content="concept">
      <title>历史独立型 (HI) IK 解算器</title><script language="javascript">var index = 'index3dsmaxhelp.html';</script></head>
   <body height="100%">
      <div class="body_content" id="body-content" dir="ltr"><a name="GUID-7D555887-6665-4DD1-8E27-CBDE9127EED0"></a><div class="head">
            <h1>历史独立型 (HI) IK 解算器</h1>
         </div>
         <p class="blurb">HI（历史独立）解算器在时间上不依赖于上一个关键帧计算得到的 IK 解决方案，因此无论在第 2000 帧处还是在第 20 帧处使用 HI 解算器，其速度都一样快。 </p>
         <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E40"></a>“HI 解算器”使用目标来设置链动画。设置目标动画，IK 解算器移动末端效应器（链中最后一个关节的轴点）来匹配目标的位置。通常，目标是其他控制对象（例如点或虚拟对象、脊椎或骨骼）的父对象，而这些控制对象与视口或卷展栏滑块相关联。 
         </p>
         <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E3F"></a>IK 解决方案在<em class="mild">解算器平面</em> 中发生。解算器平面在世界空间中的角度受一个名为<span class="char_link"><a href="GUID-FABCED32-D76C-4CDB-AAB1-225736FE0EF3.htm">旋转角度</a></span>的参数控制。旋转角度可以设置动画。可以直接对它进行调整，也可以使用操纵器来调整。 
         </p>
         <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E3E"></a>“HI 解算器”允许创建多个链或重叠链。这允许为其他控件创建多个目标。将目标链接到点、脊椎、骨骼或虚拟对象后，可以创建简单的控制来实现复杂链或层次的动画。也可以在这些目标上使用限制或控制对象，以及其他动画工具。 
         </p>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044D40"></a> 
            <h2><a name="GUID-15B01133-9574-42ED-B29C-CB17BBE36C56"></a>应用“HI 解算器”
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E3D"></a>要将“HI 解算器”应用到层次中的任意部分，请选择要开始使用解算器的骨骼或对象。然后选择“动画”菜单 <img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“IK 解算器”<img class="adsk-glyph-arrow" src="../images/ac.menuaro.gif">“HI 解算器”。在活动视口中，将光标移到要结束链的骨骼上。单击选择此骨骼后，便将目标放到了这个骨骼的轴点上。如果希望目标位于骨骼的远端，细化要放置目标的骨骼。会添加额外的骨骼，然后选择该骨骼将目标放在末端。 
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E3C"></a>创建骨骼时，在链的末端自动创建一个很小的“凸起”骨骼以辅助完成此过程。 
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044D41"></a> 
            <h2><a name="GUID-FA73FC63-CD11-4281-94CF-757B83E3F672"></a>设置多个链
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E3B"></a>要为人类的腿部装备骨骼，可以在一条腿中使用如下三条链： 
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044D42"></a><ul>
               <li>第一条链从臀部到脚踝处。此链控制腿部的整体运动包括膝部弯曲。 </li>
               <li>第二条链从脚踝到拇指球。此链控制脚跟的上下移动。 </li>
               <li>第三条链从拇指球到脚趾。 </li>
            </ul> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E3A"></a>三条链一起协调工作，保持脚部在空间中的位置。这意味着当角色的身体移动时，将保持脚部踩踏在地面上。这三条 IK 链在臀部至脚趾的设置中在脚的关键点位置放置目标，以此模拟自然的脚部动作。现实生活中，脚趾、拇指球和脚跟既可以踩踏地面又可以从地面上抬起。
               
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E39"></a>每条链上都有用于驱动脚跟、拇指球和脚趾运动的目标。使用 IK 目标来抬起脚跟、弯曲脚趾、移动或旋转整个足部，并保持脚的空间位置。 
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044D43"></a> 
            <h2><a name="GUID-BCBA18E9-951D-4093-81AC-D6F87BB5D1C9"></a>重叠链 
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E38"></a>IK 解算器系统允许在单个层次中创建重叠 IK 链。例如，在人类的腿部中，可以创建一条由臀部到脚踝的链，接着创建从膝部到拇指球的第二条链，再创建从脚踝到脚趾的第三条链。希望将目标应用到后续的骨骼中，但却不想细化骨骼时，可以使用重叠链。 
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E37"></a>重叠 HI IK 链的另一个用途是可以保持层次底部的目标稳固地位于根位置。在腿部的例子当中，脚踝、拇指球和脚趾将不发生移动，直到层次上部已经达到拉伸的最大限度。 
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044D44"></a><div class="figure-anchor"><img src="../images/GUID-FB392E7D-AFDE-425D-982B-4234569FE405-low.png"><p class="figure-title">重叠链使脚趾一直贴在地面上</p>
            </div> <a name="WS1A9193826455F5FFBA679E112A6A190044D45"></a><div class="figure-anchor"><img src="../images/GUID-09B914F2-5D21-4823-9ED9-39D0D52269FF-low.png"><p class="figure-title">重叠链使脚趾一直贴在地面上</p>
            </div>   
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E36"></a>不要使用不同种类的 IK 解算器来设置重叠链，否则将会得到不可预测的结果。 
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044D46"></a> 
            <h2><a name="GUID-4661F7C4-7EF9-4574-9C32-606BFE2DC26D"></a>创建控制对象
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E35"></a>要创建控制对象来设置目标动画，先在目标附近创建虚拟对象、点、样条线或其他对象，然后将目标链接到控制对象。例如在人类的腿部中，可以在脚踝、拇指球和脚趾处放置目标。然后在脚下创建三条样条线，一条用于脚跟、一条用于拇指球，另一条用于脚趾。将每个目标链接到每条样条线，然后便可以使用这些样条线来设置目标动画。也可以将样条线链接在一起，以便脚趾的转动由脚跟的移动控制。
               
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E34"></a>除了层次链接之外，现在还可以结合 IK 解算器使用新的“约束”系统。可以应用任何约束来创建目标或骨骼与其他对象之间的关系。目标的位置可以约束在移动的虚拟对象上。或者可以在相同的位置创建三条骨骼链，将一条骨骼链约束到其他骨骼链，然后为这些约束加权。
               
            </p> <a name="WS1A9193826455F5FFBA679E112A6A190044D47"></a><div class="figure-anchor"><img src="../images/GUID-AABFB16B-9EC1-48F1-A22E-9B64D8BA73CA-low.png"><p class="figure-title">骨骼链约束到一起 </p>
            </div>  
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E33"></a>使用控制对象在视口中提供了更强大的选择工具。可以使用控制对象来分离链，例如在人的手臂中，一条链可能在腕部结束，并为手和手指创建一条单独的链。腕部的控制对象用作手部链的根节点，但手部链从层次上讲是与手臂链断开的。 
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E32"></a>可以使用操纵器辅助对象创建视口滑块，然后使用视口滑块操纵控制对象的变换。使用<span class="char_link"><a href="GUID-B084D14B-2925-4EA6-890F-4F2564BB9D9A.htm">连线参数</a></span>将滑块和控制对象关联。也可以创建“自定义属性”将这些滑块添加到“对象”卷展栏中。 
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044D48"></a> 
            <h2><a name="GUID-CB1F7440-5306-45DD-8738-29C2EA3FBB3F"></a>混合使用“正向运动学”和“反向运动学”
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E31"></a>HI IK 解算器提供了在单个动画轨迹中混合 FK 和 IK 的工具。在 IK 控制器下面有一个由该解算器指定的 FK 子控制器。 
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E30"></a>激活“启用”按钮后，FK 控制器的值得到保留但是被忽略。禁用“启用”选项后，应用 FK 子控制器的值。要访问“启用”按钮，选择目标并转到“运动”面板，然后禁用“启用”按钮。这将允许使用骨骼或层次对象的 FK 旋转来创建动画。 
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E2F"></a>“IK 设置 FK 姿势”允许在 FK 的操作过程中启用 IK。禁用“启用”按钮并启用“IK 设置 FK 姿势”后，选择和移动目标时将允许使用 IK 创建正向运动学关键帧。启用“自动关键点”后，移动目标调整骨骼姿势并为链中的所有对象添加旋转关键点。
               
            </p> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E2E"></a>同时使用 IK 和 FK 时，可能会创建目标离开链末端的情况。使用“IK/FK 捕捉”按钮重新放置目标，将目标捕捉回链的末端。启用“自动捕捉”选项后，捕捉自动进行；接触目标时，不需单击 IK/FK 捕捉按钮。 
            </p> 
         </div>
         <div class="section"><a name="WS1A9193826455F5FFBA679E112A6A190044D49"></a> 
            <h2><a name="GUID-283A86AE-F76C-4261-B14B-DBB2D4505D38"></a>控制 HI IK 精度 
            </h2> 
            <p><a name="WS1A9193826455F5FF103859C11318F51BDD-3E2D"></a>使用“HI 解算器”设置动画时，如果发现肢体动画不平滑，应当尝试将<span class="char_link"><a href="GUID-0FDEA7C4-0E6C-4541-9F5E-D8CC84E8D73B.htm">“HI 解算器属性”卷展栏</a></span>中“解决方案”组中的“迭代次数”加倍。也可以试着降低“阈值”来平滑动画。 
            </p> 
         </div>
         <div class="related-links">
            <h4 class="related">
               <p class="title"><a name="GUID-EE20C3AC-475C-46A2-A602-6977E4BB8749"></a>相关信息
               </p>
            </h4>
            <ul>
               <li><span class="char_link"><a href="GUID-0175CB18-73AA-4578-BBEF-05BF45A04674.htm">“IK 解算器”卷展栏（HI 解算器） </a></span></li>
            </ul>
         </div><span class="noindex">
            <div class="topic-list">
               <h4 class="related">本节内容</h4>
               <ul class="jumplist">
                  <li class="topiclist-litem"><a href="GUID-FABCED32-D76C-4CDB-AAB1-225736FE0EF3.htm">白皮书：HI IK 解算器的旋转角度</a><p>HI 解算器的基本要求是，该解决方案属于历史独立型，即只能基于当前状态下的目标和其他附带参数。 </p>
                  </li>
                  <li class="topiclist-litem"><a href="GUID-56A372CB-1402-467F-B358-753142750723.htm">“HI IK 解算器”卷展栏（“运动”面板）</a><p>这些主题介绍了“运动”面板上显示的 HI IK 解算器的控件。</p>
                  </li>
               </ul>
            </div></span><div class="footer-block"><a href=".." class="comments-anchor" target="_blank"><span class="comments-link">请将您关于此页内容的评论发送给我们</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>除非另有说明，否则此作品受到 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"> Creative Commons 署名-非商业性使用-相同方式共享 3.0 未本地化版本许可证</a>的制约。请参见 <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons 常见问题</a>(英文)以获取更多信息。</em></p><br></div>
   </body>
</html>